!function(){var e=function(e,i,t){if(window.addEventListener)e.addEventListener(i,t,!1);else e.attachEvent("on"+i,t)};var i=function(e,i,t){if(window.removeEventListener)e.removeEventListener(i,t);else e.detachEvent("on"+i,t)};var t=function(e){e=e||"";return e.replace(/\:\/\/([^\/]+)/,function(e){return e+"/b"})};var n={},r,a,o=[],s;n.flag=!1;n.getDiscoverCss=function(){var e="";if(this.__coverBackground&&this._$supportCss3("animation"))e=this.__coverBackground.indexOf("background:")!=-1?this.__coverBackground:"";return"position:fixed;_position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;background:rgb(0,0,0); filter:progid:DXImageTransform.Microsoft.Alpha(opacity=60);-moz-opacity:0.6;-khtml-opacity:0.6;opacity:0.6;z-index:1000;"+e};n.getPanelCss=function(e,i){return"position:fixed;z-index:10000;left:50%;top:50%;width:"+e+"px;margin-left:-"+e/2+"px;height:"+i+"px;margin-top:-"+i/2+"px;"};n.getIframeCss=function(){var e=null;if(this.__iframeShowAnimation)e="-webkit-animation:"+this.__iframeShowAnimation+";-moz-animation:"+this.__iframeShowAnimation+";-ms-animation:"+this.__iframeShowAnimation+";-o-animation:"+this.__iframeShowAnimation+";animation:"+this.__iframeShowAnimation+";";return"width:100%;height:100%;border:none;background:none;"+(e?e:"")};n.setOpacity=function(e,i){e.style.opacity=i/100};n.setWh=function(e,i,t){e.style.cssText=this.getPanelCss(i,t)};n.addIframe=function(e,i){var t=document.getElementById("x-URS-iframe"),r=this._name||"";if(!t){try{t=document.createElement('<iframe  name="'+r+'" allowTransparency=true ></iframe>')}catch(a){t=document.createElement("iframe");t.allowTransparency=!0;t.name=r}t.frameBorder=0;t.id="x-URS-iframe";t.scrolling="no";t.style.cssText=this.getIframeCss()}if(i)e.appendChild(t);else{var o=420,s=408;if(n.frameSize){o=n.frameSize.width;s=n.frameSize.height}var c=document.getElementById("x-discover");if(!c){c=document.createElement("div");c.id="x-discover";c.style.cssText=this.getDiscoverCss()}var f=document.getElementById("x-panel");if(!f){f=document.createElement("div");f.id="x-panel";this._panel=f;f.style.cssText=this.getPanelCss(o,s)}f.appendChild(t);e.appendChild(c);e.appendChild(f);e.style.display="none"}};n.initIframe=function(e){var i=this;var t=document.getElementById("x-URS-iframe");if(a.afterSetIframeSrc)a.afterSetIframeSrc(t);window.setTimeout(function(){i.__loadTime=(new Date).getTime();if(r.indexOf("?")==-1)r+="?pkid="+(a.promark||"")+"&product="+(a.product||"");else r+="&pkid="+(a.promark||"")+"&product="+(a.product||"");t.src=r},0);i.sto=clearTimeout(i.sto);if(window._$needUrsBgp)if(1!=e)i.sto=setTimeout(function(){i.sto=clearTimeout(i.sto);if(r.indexOf("webzj.reg.163.com")>=0){r=r.replace("webzj.reg.163.com","webzj2.reg.163.com");r=r.replace(/wdaId=([^&]+)/,"wdaId=UA1482833332087");n.initIframe.call(i,1)}},1e4)};n._$supportCss3=function(e){var i=["webkit","Moz","ms","o"],t,n=[],r=document.documentElement.style,a=function(e){return e.replace(/-(\w)/g,function(e,i){return i.toUpperCase()})};for(t in i)n.push(a(i[t]+"-"+e));n.push(a(e));for(t in n)if(n[t]in r)return!0;return!1};var c=function(){var e=document.getElementById("x-URS-iframe");var i=window.name||"_parent";var t={};t.data=a;t.data.from="URS|";t.origin="*";t.source=i;t.data.loadTime=(new Date).getTime()-this.__loadTime;u(e.contentWindow,t)};var f=function(){var e=/^([\w]+?:\/\/.*?(?=\/|$))/i;return function(i){i=i||"";if(e.test(i))return RegExp.$1;else return"*"}}();var d=function(e,i){try{i=i.toLowerCase();if(null===e)return"null"==i;if(void 0===e)return"undefined"==i;else return Object.prototype.toString.call(e).toLowerCase()=="[object "+i+"]"}catch(t){return!1}};var l=function(e,i,t){if(!e)return"";var n=[];for(var r in e)if(e.hasOwnProperty(r)){var a=e[r];if(a)if(!d(a,"function")){if(d(a,"date"))a=a.getTime();else if(d(a,"array"))a=a.join(",");else if(d(a,"object"))a=JSON.stringify(a);if(t)a=encodeURIComponent(a);n.push(encodeURIComponent(r)+"="+a)}else;else;}else;return n.join(i||",")};var u=function(){var e="MSG|";var i=function(i){var t={};i=i||{};t.origin=i.origin||"";t.ref=location.href;t.self=i.source;t.data=JSON.stringify(i.data);return e+l(t,"|",!0)};return function(e,t){if(window.postMessage){t=t||{};e.postMessage(JSON.stringify(t.data),f(t.origin))}else o.unshift({w:e,d:escape(i(t))})}}();var m=function(){var e=navigator.appName;if("Netscape"==e){var i=window.open("about:blank","_self");i.opener=null;i.close()}else if("Microsoft Internet Explorer"==e){window.opener=null;window.open("","_self");window.close()}};window.URS=function(l,u,p){1==this._$COM_NUM?this._$COM_NUM=1:this._$COM_NUM=2;if("object"==typeof l)p=l;if(p.needUrsBgp&&"1"==p.needUrsBgp)window._$needUrsBgp=1;n.frameSize=p.frameSize;n.__coverBackground=p.coverBackground;n.__iframeShowAnimation=p.iframeShowAnimation;window.PTDOM=0!=p.isHttps?"https://":"http://";if(p.cssDomain&&p.cssFiles){n.__cssStr="cd="+p.cssDomain+"&cf="+p.cssFiles;if(n.__cssStr.indexOf("http://")!=-1)window.PTDOM="http://";n.__cssStr=encodeURIComponent(n.__cssStr)}this.isInclude=0;if(p.includeBox)if("string"==typeof p.includeBox)this.isInclude=document.getElementById(p.includeBox)||0;else this.isInclude=p.includeBox;n.needPrepare=p.needPrepare||0;var h,g;if("string"==typeof u)g=u;if("string"==typeof l)h=document.getElementById(l);else h=l;if(p.logincb)this.logincb=p.logincb;if(p.closecb)this.closecb=p.closecb;if(p.regcb)this.regcb=p.regcb;if(p.statecb)this.statecb=p.statecb;if(p.resize)this.resize=p.resize;if(p.changepage)this.changepage=p.changepage;if(p.initReady)this.initReady=p.initReady;if(p.otherRegSuccess)this.otherRegSuccess=p.otherRegSuccess;s=document.createElement("div");s.id="x-URS";document.body.appendChild(s);this.box=s;var w="index.html";if(p.single){w="index_dl.html";if("register"==p.page)w="index_reg.html"}var v=p.crossDomainUrl||"webzj.reg.163.com/out/pub/";r=window.PTDOM+v+w;if(p.pathB)r=t(r);if(n.__cssStr)r+="?"+n.__cssStr+"&wdaId="+(p.wdaId||"");else r+="?wdaId="+(p.wdaId||"");a=p||{};try{JSON.stringify(a)}catch(y){return null}if(!this.isInclude&&h&&g)e(h,g,this.showIframe);else this.includeBox=this.isInclude;if(n.needPrepare||this.isInclude)this.prepareIframe();var _=function(e){if(e)e.stopPropagation?e.stopPropagation():e.cancelBubble=!0};var I=function(e){_(e);var i=e.data||"{}";b({data:i,origin:f(e.origin)})};var S=this;var b=function(e){var t=e.data;var r;if(S.isInclude)r=S.includeBox;else r=n._panel;if(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(a){t={}}if(t["URS-READY"]){S.sto=clearTimeout(S.sto);if(S.initReady)S.initReady()}if(!t["URS-READY"]||!S.isInclude&&n.needPrepare){if(t["URS-READY"]&&!n._initReady)n._initReady=!0;if(t["URS-CM"]&&document.getElementById("x-URS-iframe"))if(!t["URS-CM-STATE"])if(!t||!t.fromOutLogin||t.toOpener){if("otherRegSuccess"==t.type){if(S.otherRegSuccess)S.otherRegSuccess(t)}else if("success"==t.type){if(S.logincb)S.logincb(t.username,t.isOther,t);if(!this.isInclude){if(h&&g)i(h,g,S.showIframe);S.closeIframe()}}else if("close"==t.type){if(S.closecb)S.closecb();S.closeIframe()}else if("resize"==t.type||"init"==t.type){r.style.width=t.width+"px";r.style.height=t.height+"px";if(!S.isInclude)r.style.marginLeft=-1*t.width/2+"px";if(S.resize)S.resize(t)}else if("register-success"==t.type){if(S.regcb)S.regcb(t.username,t.url)}else if("changepage"==t.type)if(S.changepage)S.changepage(t.page)}else{try{window.opener.$outLogin(t)}catch(a){}setTimeout(function(){m()},200)}else if(S.statecb)S.statecb(t["URS-CM-STATENAME"],t["URS-CM-STATE"])}else c.call(S)}};var x=function(){var e="MSG|";var i=function(e,i){var t=d(i,"function")?i:function(e){return e===i},n=null;for(var r=0,a=e.length-1,o;r<a;r++){o=e[r];if(t(o))n=r}return null!=n?n:-1};var t=function(){var e;var t=function(t,n,r){if(i(e,t.w)<0){e.push(t.w);r.splice(n,1);t.w.name=t.d}};return function(){e=[];if(o&&o.length)for(var i=o.length,n;i--;i>=0){n=o[i];t(n,i,o)}e=null}}();var n=function(){var i=unescape(window.name||"");if(i&&0==i.indexOf(e)){window.name="";var t=i.replace(e,""),n=t.split("|"),r=n.length,a={};for(var o=0;o<r;o++){var s=n[o].split("=");if(!s||!s.length)return;var c=s.shift();if(!c)return;a[decodeURIComponent(c)]=decodeURIComponent(s.join("="))}t=a;var d=(t.origin||"").toLowerCase();if(!d||"*"==d||0==location.href.toLowerCase().indexOf(d))b({data:t.data||"null",origin:f(t.ref||document.referrer)})}};return function(){setInterval(t,100);setInterval(n,20)}}();var R=function(){if(!window.__hasRun){if(window.postMessage)e(window,"message",I);else x();window.__hasRun=1}};return R()};window.URS.prototype.prepareIframe=function(){if(this.isInclude){n.addIframe(this.includeBox,1);n.initIframe.call(this);this.showIframe()}else{n.addIframe(s);n.initIframe.call(this)}};window.URS.prototype.showIframe=function(e){if(!this.isInclude)if(!n.needPrepare){n.addIframe(s);n.initIframe.call(this)}else if(!n._initReady)return;e=e||{};if(e.page){if(e.page!=a.page&&a.single){var i="index_dl.html";if("register"==e.page)i="index_reg.html";var o=e.crossDomainUrl||"webzj.reg.163.com/out/pub/";if(e.pathB)r=t(r);r=window.PTDOM+o+i;if(n.__cssStr)r+="?"+n.__cssStr+"&wdaId="+(e.wdaId||"");else r+="?wdaId="+(e.wdaId||"")}n.initIframe.call(this);a.page=e.page}if(n.needPrepare&&!this.isInclude)c.call(this);s.style.display="block"};window.URS.prototype.closeIframe=function(){if(!this.isInclude){s.style.display="none";n.initIframe.call(this);if(!n.needPrepare){n.flag=!1;if(navigator.userAgent.indexOf("MSIE")>0){var e=document.getElementById("x-URS-iframe"),i=e.contentWindow;if(e){e.src="about:blank";try{i.document.write("");i.document.clear()}catch(t){}}var r=document.getElementById("x-panel");r.removeChild(e);window.CollectGarbage()}s.innerHTML=""}}else;}}();