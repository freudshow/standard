define("wiki-lemma:widget/lemma_content/mainContent/lemmaReference/lemmaReferenceTip/lemmaReferenceTip.js",function(e,t,n){var i=e("wiki-common:widget/lib/jquery/jquery.js"),o=e("wiki-common:widget/util/string.js"),s=function(e){var t=['<div class="reference-tip">',"<table><tr>",'<td class="content"></td>','<td class="title" valign="middle">参考资料</td>',"</tr></table>",'<em class="triangle-bg"></em>','<em class="triangle-border"></em>',"</div>"].join(""),n=e,s=i(t),l=this,r=function(e){var t=e.text().replace("[","").replace("]","");t=t.split("-");for(var n=parseInt(t[0]),i=parseInt(t[t.length-1]),o=[],s=n;i>=s;s++)o.push(s);return o};this.display=function(e){for(var t=r(e),l=e.offset(),a=[],u=0;u<t.length;u++){var c=i("[id='reference-["+t[u]+"]-"+n.subLemmaId+"-wrap']"),m=c.find(".text"),d=c.find(".site"),f=(m.length>0?m.text().substr(0,48):"")+(d.length>0?d.text():"");a.push((t.length>1?"["+t[u]+"] ":"")+f)}var h=a.join("\n");h=o.encodeHTML(h),s.find(".content").html(h),s.css({left:l.left-10,top:l.top-s.height()-15}),this.show()},this.show=function(){s.show()},this.hide=function(){s.hide()};var a=function(){var e=null;s.on("mosueover",function(){e&&(clearTimeout(e),e=null),l.show()}).on("mouseout",function(){e&&(clearTimeout(e),e=null),e=setTimeout(function(){l.hide()},200)}),i(document.body).on("mouseover","sup",function(t){if(!i(this).hasClass("normal")){e&&(clearTimeout(e),e=null);var n=i(t.target);l.display(n)}}).on("mouseout","sup",function(){e&&(clearTimeout(e),e=null),e=setTimeout(function(){l.hide()},200)}),s.appendTo(i(document.body))};a()};n.exports=s});