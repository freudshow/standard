----------------------- Page 1-----------------------

  ICS  点击此处添加 ICS号  

  点击此处添加中国标准文献分类号  
            
                                                        DL  

   中 华 人 民 共 和 国 电 力 行 业 标 准  

                                                          DL/T 698.45—201X  

                                                                        代替   

                                                                              

                                                                              

                电能信息采集与管理系统  
第4-5 部分：面向对象的互操作性数据交换 
                                  协议  

               Electric energy data acquire and management system  

         Part4-5  Object oriented interoperability data exchange protocol  
                ： 

                 点击此处添加与国际标准一致性程度的标识  

                                  （报批稿） 
                                             

                                              
                                          

  201X - XX - XX 发布                                          201X - XX - XX 实施  

                          国家能源局      发 布   

----------------------- Page 2-----------------------

                                                                               DL/T 698.45—201X  

                                           目    次  

前言 ............................................................................... III  

1  范围 .............................................................................. 1  

2  规范性引用文件 .................................................................... 1  

3  术语、定义和缩略语 ................................................................ 1  

  3.1  术语和定义 .................................................................... 1  
  3.2  符号和缩略语 .................................................................. 3  

4  通信架构 .......................................................................... 4  

  4.1  信息交换模型 .................................................................. 4  
  4.2  面向应用连接的数据交换 ........................................................ 4  
  4.3  请求/响应类型的数据交换 ....................................................... 4  
  4.4  通知/确认类型的数据交换 ....................................................... 5  
  4.5  服务器模型 .................................................................... 5  

5  数据链路层 ........................................................................ 5  

  5.1  帧结构 ........................................................................ 5  
  5.2  字节格式 ...................................................................... 9  
  5.3  传输规则 ...................................................................... 9  

6  应用层 ........................................................................... 11  

  6.1  应用层服务规范 ............................................................... 11  
  6.2  应用层协议规范 ............................................................... 23  
  6.3  应用层数据单元规范 ........................................................... 28  
  6.4  应用层编码规范 ............................................................... 69  

7  接口类与对象标识 ................................................................. 69  

  7.1  对象模型 ..................................................................... 69  
  7.2  接口类的表示方法 ............................................................. 69  
  7.3  接口类 ....................................................................... 70  
  7.4  对象标识 .................................................................... 109  
  7.5  接口类管理 .................................................................. 121  

附录A （规范性附录）  对象标识定义 .................................................. 123  

附录B （规范性附录）  物理单位枚举定义 .............................................. 179  

附录C （规范性附录）  有关一致性协商 ................................................ 181  

附录D （资料性附录）  校验算法 ...................................................... 184  

附录E （规范性附录）  安全认证说明 .................................................. 187  

附录F （资料性附录）  安全模式参数 .................................................. 189  

                                                                                               I  

----------------------- Page 3-----------------------

                                                                                  DL/T 698.45—201X  

附录G （资料性附录）  状态字、特征字、模式字 ........................................ 192  

附录H （资料性附录）  APDU 编码举例 ................................................. 200  

附录I （资料性附录）  版本信息 ...................................................... 214  

      

                                                                                                  II  

----------------------- Page 4-----------------------

                                                      DL/T 698.45—201X  

                             前      言  

   DL/T 698  电能信息采集与管理系统分为以下部分：  
   DL/T 698.1  电能信息采集与管理系统  第1部分：导则；  
   DL/T 698.2  电能信息采集与管理系统  第2部分：主站技术规范；  
   DL/T 698.31  电能信息采集与管理系统  第3-1部分：电能信息采集终端技术规范－通用要求；  
   DL/T 698.32  电能信息采集与管理系统  第3-2部分：电能信息采集终端技术规范－厂站采集终端 
特殊要求；  
   DL/T 698.33  电能信息采集与管理系统  第3-3部分：电能信息采集终端技术规范－专变采集终端 
特殊要求；  
   DL/T 698.34  电能信息采集与管理系统  第3-4部分：电能信息采集终端技术规范－公变采集终端 
特殊要求；  
   DL/T 698.35  电能信息采集与管理系统  第3-5部分：电能信息采集终端技术规范－低压集中抄表 
终端特殊要求；  
   DL/T 698.41  电能信息采集与管理系统  第4-1部分：通信协议－主站与电能信息采集终端通信；  
   DL/T 698.42  电能信息采集与管理系统  第4-2部分：通信协议－集中器本地通信接口协议。  
   本部分为DL/T 698新增的第4-5部分,并与以上标准共同构成对DL/T 698-1999 《低压电力用户集中 
抄表系统技术条件》的修订。  
   本部分依据GB/T 1.1-2009给出的规则起草。  
   本部分由中国电力企业联合会提出。  
   本部分由电力行业电测量标准化技术委员会归口。  
   本部分起草单位：。  
   本部分主要起草人：。  
   本标准在执行过程中的意见或建议反馈至中国电力企业联合会标准化中心（北京市白广路二条一 
号,100761）。  

                                                               III  

----------------------- Page 5-----------------------

                                                          DL/T 698.45—201X  

                       电能信息采集与管理系统  
          第4-5 部分：面向对象的互操作性数据交换协议  

1  范围  

   本部分规定了电能信息采集与管理系统主站（以下简称“主站”）、采集终端或电能表（以下简称 
 “终端”）之间,采用的面向对象具有互操作性的数据传输协议,包括通信架构、数据链路层、应用层、 
以及接口类及其对象和对象标识。  
   本部分适用于主站、采集终端、电能表之间采用点对点、多点共线及一点对多点通信方式的通信数 
据交换。  

2  规范性引用文件  

   下列文件对于本文件的应用是必不可少的。凡是注日期的引用文件,仅所注日期的版本适用于本文 
件。凡是不注日期的引用文件,其最新版本（包括所有的修改单）适用于本文件。  
   GB/T 16262.1-2006  信息技术  抽象语法记法（ASN.1） 第1部分 基本记法规范  
   DL/T 645-2007  多功能电能表通信协议  
   DL/T 790.6-2010  采用配电线载波系统的配电自动化 第6部分 A-XDR编码规则  
   GB/T17966-2000  微处理器系统的二进制浮点运算  

3  术语、定义和缩略语  

3.1  术语和定义  

   下列术语和定义适用于本部分。  

3.1.1    

   面向对象的互操作性数据交换协议 object oriented interoperability data exchange protocol  
   基于面向对象建模方法建立的一套适用于采集系统的互操作性协议。面向对象建模以接口类实现继 
承关系,以对象来封装数据及操作,以对象为互操作的基本要素。  

3.1.2    

   对象标识 object identification  
   标识终端中对象唯一名称的编码。  

3.1.3    

   逻辑名  logical name  
   用于标识接口类的实例,它是接口类的第一个属性,它的值与对象标识一致。  

3.1.4    

                                                                      1  

----------------------- Page 6-----------------------

                                                                      DL/T 698.45—201X  

    类标识码 class id  
    用于区别对象接口类的标识码,相当于接口类的名称。  

3.1.5    

    服务器地址 server address  
    指客户机/服务器（Client/Server）访问模型中的服务器（Server）的通信地址。  

3.1.6    

    客户机地址 client address  
    指客户机/服务器（Client/Server）访问模型中的客户机（Client）的通信地址。主站访问采集终 
端时,采集终端为服务器,主站为客户机；主站访问电能表时,电能表为服务器,主站为客户机；采集 
终端访问电能表时,电能表为服务器,采集终端为客户机。  

3.1.7    

    采集启动时标 acquisition start time  
    指启动一次采集任务时的设备时钟当前值,其值只与启动时刻有关,与执行的时间长短无关。  

3.1.8    

    采集成功时标 acquisition time  
    指客户机成功接收到服务器响应时的设备时钟当前值。  

3.1.9    

    采集存储时标 acquisition storage time  
    采集到的数据进行存储的时间。  

3.1.10    

    采集规则 acquisition rules  
    描述采集设备采集的数据的内容及其对应关系。  

3.1.11    

    组地址 group address  
    具有某一相同属性的设备群组编码,如属于同一行业,同一变电站,同一线路,可以响应同一个命 
令。  

3.1.12    

    通配地址 the wildcard address  
    在十进制编码表示的地址码中出现一位或多位采用了通配符的地址码被称为通配地址。  

3.1.13    

    消息鉴别码 Message Authentication Code  

    消息鉴别码算法的输出。  
      

                                                                                    2  

----------------------- Page 7-----------------------

                                                                                   DL/T 698.45—201X  

3.2  符号和缩略语  

     符号和缩略语见表1  。  

                                          表1  符号和缩略语  

    符号和缩略语                                 全文                                       表示  

         A                               Address                                    地址域  

        ACD                          Ask Call Demand                             请求访问标识  

        AD                            Acquired Data                                采集数据  

        AF                             Address Flag                                地址标识  

       APDU                Application layer Protocol Data Unit               应用层协议数据单元  

       A-XDR               Adapted Extended Data Representation              可调整的扩展数据表示  

         B                                Binary                                    二进制  

        BCD                        Binary Code Decimal                        二进制编码的十进制  

         CA                           Client Address                            客户机通信地址  

       ComBCD                         Compressed BCD                              压缩BCD 码  

        CSD                    Column Selection Descriptor                       列选择描述符  

        DAR                         Data Access Result                           数据访问结果  

        DIR                             Direction                                 传输方向位  

        ESAM                  Embedded Secure Access Module                   嵌入式安全控制模块  

        FCS                          Frame Check Sum                                帧校验  

         H                                 Hex                                     十六进制  

        HCS                           Head Check Sum                               帧头校验  

         IC                          Interface Class                                接口类  

        LSB                        Least Significant Bit                          最低有效位  

        MAC                    Message Authentication Code                        消息鉴别码  

        MS                              Meter Set                                 电能表集合  

        OAD                    Object Attribute Descriptor                      对象属性描述符  

         OI                          Object Identify                               对象标识  

        OMD                      Object Method Descriptor                       对象方法描述符  

       PIID                       Priority and Invoke ID                        序号及优先标志  

      PIID-ACD               Priority and Invoke ID with ACD            带请求访问标识的序号及优先标志  

        PRM                      Primary Request Message                          启动标识位  

        RCSD                Record Column Selection Descriptor                 记录列选择描述符  

         RN                           Random Numbers                                随机数  

        ROAD                Record Object Attribute Descriptor               记录型对象属性描述符  

        RSD                    Record Selection Descriptor                      记录选择描述符  

         SA                           Server Address                            服务器通信地址  

         TI                           Time Interval                                时间间隔  

        TSA                       Target Server Address                         目标服务器地址  

        ∷=                                                                          定义为  

  

                                                                                                    3  

----------------------- Page 8-----------------------

                                                          DL/T 698.45—201X  

4  通信架构  

4.1  信息交换模型  

   本部分信息交换模型见图1  。客户机和服务器的应用进程分别位于不同的设备,它们的信息交换 
借助于通信协议实现。  

                                                          

                             图1  信息交换模型  

   客户机和服务器的应用使用最高层协议的服务,所以应用层是唯一包含服务组件的协议层,应用层 
协议数据单元（APDU）通过数据链路层协议传输帧的链路用户数据域传输。  

4.2  面向应用连接的数据交换  

   本部分是面向应用连接的数据交换协议,数据交换过程见图2  。  

                                      客户机应用       服务器应用 

                                        客户机        服务器 

                                             预连接 

                  第一阶段：建立应用连接 

                  第二阶段：数据交换 

                  第三阶段：断开或超时断开应用连接 
             时间 
                                                              

                        图2  面向应用连接的数据交换过程  

   客户机和服务器在开始通信前,之间的通信信道必须先完成连通,简称预连接。预连接建立后,默 
认具有一个最低权限的应用连接,客户机和服务器之间可直接进行数据交换。当客户机需要得到较高权 
限的服务器服务时,客户机必须发起建立较高权限的应用连接。  

4.3  请求/响应类型的数据交换  

   本部分支持请求/响应类型数据交换,即：客户机应用进程向服务器应用进程提出服务请求,服务 
器应用进程向客户机应用进程提供远程服务响应,见图3  。  

                                                                      4  

----------------------- Page 9-----------------------

                                                             DL/T 698.45—201X  

   客户机应用                                   服务器应用  
                服务请求（SERVICE.request ）  

    客户机         服务响应（SERVICE.response ）      服务器  

                           图3  请求/响应类型数据交换  

4.4  通知/确认类型的数据交换  

   本部分支持通知/确认类型数据交换,即：服务器应用进程根据客户机预先定制的主动上报内容, 
向客户机应用进程提供远程主动上报数据服务,客户机应用进程向服务器应用进程回复服务确认,见图 
4  。  

   客户机应用                                   服务器应用  
               服务提供（SERVICE.notification ）  

    客户机         服务确认（SERVICE.response ）      服务器  

                           图4  通知/确认类型数据交换  

4.5  服务器模型  

   服务器模型见图5  ,物理设备由若干可访问的接口类对象构成,包括一个预先建立的应用连接对 
象（简称预连接对象）、若干个应用连接对象、若干个其他接口类对象。  
   预连接对象为物理设备必须具备的对象。  
   应用连接对象为可选对象,根据访问权限所需进行增加。  
   其他接口类对象为可选对象,根据设备功能所需进行增加。  

                                                         

                                图5  服务器模型  

5  数据链路层  

5.1  帧结构  

5.1.1  帧格式  

                                                                         5  

----------------------- Page 10-----------------------

                                                                 DL/T 698.45—201X  

    本部分采用异步式传输帧结构,定义见图6  。  

                           起始字符（68H）                   

                              长度域L                     

                              控制域C                 帧头  

                              地址域A                     

                             帧头校验HCS                   

                                   
                                                链路用户数据  
                             链路用户数据             
                                                  （应用层）  
                                   

                              帧校验FCS            
                                                   帧尾  
                            结束字符（16H）           

                                 图6  帧格式定义  

5.1.2  长度域L  

    长度域L由2字节组成,见图7  。   

       Bit15 Bit14 Bit13 Bit12 Bit11 Bit10 Bit9 Bit8 Bit7 Bit6 Bit5 Bit4 Bit3 Bit2 Bit1 Bit0  

          保留                          用户数据长度Len  

                                 图7  长度域定义  

    用户数据长度Len：由D0～D13组成,采用BIN编码,是传输帧中除起始字符和结束字符之外的帧字 
节数。  

5.1.3  控制域C  

5.1.3.1  控制域格式定义  

    控制域C为1个字节,按位或位的组合使用,具体定义见图8  。  

            bit7         bit6         bit5     bit4   bit3   bit2   bit1   bit0  

        传输方向位DIR      启动标志位PRM      分帧标志位         保留           功能码  

                                图8  控制域C 定义  

5.1.3.2  传输方向位及启动标志位  

    传输方向位：DIR=0表示此帧是由客户机发出的；DIR=1表示此帧是由服务器发出的。  
    启动标志位：PRM=1表示此帧是由客户机发起的；PRM=0表示此帧是由服务器发起的。  
    传输方向位DIR和启动标志位PRM组合意义见表2  。  

                     表2  传输方向位DIR 和启动标志位PRM 组合意义  

        DIR                  PRM                         组合意义  

         0                   0                     客户机对服务器上报的响应  

         0                   1                        客户机发起的请求  

         1                   0                        服务器发起的上报  

         1                   1                     服务器对客户机请求的响应  

                                                                             6  

----------------------- Page 11-----------------------

                                                              DL/T 698.45—201X  

  

5.1.3.3  分帧标志位  

    分帧标志位为1,表示此帧链路用户数据为APDU片段,收齐所有片段按片段序号合并后为完整APDU； 
分帧标志位为0表示此帧链路用户数据为完整APDU。  

5.1.3.4  功能码  

    功能码定义见表3  。  

                                表3  功能码定义  

       功能码                服务类型                         应用说明  

         0                 保留                               

         1                链路管理               链路连接管理（登录,心跳,退出登录）  

         2                 保留                               

         3                用户数据                   应用连接管理及数据交换服务  

       4…7                 保留                               

     

5.1.4  地址域A  

5.1.4.1  地址域组成  

   地址域A由1字节的地址标识AF、可变字节数的服务器地址SA、和1字节的客户机地址CA组成,其排 
列次序见图9  。  

                                   地址标识AF  

                                  服务器地址SA  

                                  客户机地址CA  

                                图9  地址域组成  

5.1.4.2  地址标识AF  

   地址标识AF由1字节组成,用bit0…bit7表示该字节八位位组的最低位到最高位,具体定义为：  
   a)  bit0…bit3：为地址域服务器地址的字节数,采用编码方式,取值范围：0…15,对应表示1…16 
       个字节长度；  
   b)  bit4…bit5：保留；   
    c)  bit6…bit7：为地址域服务器地址的类别标志,采用编码方式,0 表示单地址,1 表示通配地 
       址,2 表示组地址,3 表示广播地址。  

5.1.4.3  服务器地址SA  

5.1.4.3.1  单地址  

    当服务器地址的类别标志为单地址时,SA为可变长度地址,服务器地址字节数由地址标识AF表示, 
最长16字节,对应服务器地址取值范围为1…99999999999999999999999999999999,0保留,其排列是高 
位在前,低位在后,十进制每两位占一字节,用bit0…bit7表示一字节八位位组的最低位到最高位,各 
字节中bit7…bit4对应十进制高位,bit3…bit0对应低位,为压缩BCD码方式,即每字节二进制高低各4 

                                                                           7  

----------------------- Page 12-----------------------

                                                                         DL/T 698.45—201X  

位分别编码表示两个0到9的十进制数,且分别对应十进制数的高低两位。当排列的最后字节中的十进制 
低位（即bit3…bit0）为FH时,表示为无效,也就是说当服务器地址的十进制位数为奇数时,最后字节 
的bit3…bit0用FH表示。举例如下：  
    服务器地址SA=12345678的排列见图10  。  

                              LSB          LSB          LSB          LSB  

                      1     2      3     4      5     6      7      8  

                      第1 字节        第2 字节        第3 字节        第4 字节  

                            图10  服务器地址SA=12345678 的排列  

    服务器地址SA=123456789的排列见图11  。  

                       LSB          LSB          LSB          LSB           LSB  

               1      2     3      4     5      6     7      8      9     F  

               第1 字节        第2 字节         第3 字节        第4 字节        第5 字节  

                           图11  服务器地址SA=123456789 的排列  

5.1.4.3.2  通配地址  

    当服务器地址的类别标志为通配地址时,SA为可变长度地址,服务器地址字节数由地址标识AF表示, 
排列是高位在前,低位在后,十进制每两位占一字节,用bit0…bit7表示一字节八位位组的最低位到最 
高位,各字节中bit7…bit4对应十进制高位,bit3…bit0对应低位,为压缩BCD码方式,即每字节二进 
制高低各4位分别编码表示两个0到9的十进制数或通配符AH,且分别对应十进制数的高低两位。当排列 
的最后字节中的十进制低位（即bit3…bit0）为FH时,表示为无效,也就是说当服务器地址的十进制位 
数为奇数时,最后字节的bit3…bit0用FH表示。  
    通配符对应十进制按位使用,即：通配地址的某些十进制位为AH,表示该位可为0到9的任意值,同 
时,凡不大于传输帧中通配地址所能表示的最大值的,且符合通配地址要求的服务器地址被选中。举例 
如下：   
    通配地址SA=12345678A ,其排列见图12   ,表示服务器地址不大于999999999 的且符合 
123456780…123456789的服务器都需响应（不满9位的高位按0算）。  

                       LSB          LSB          LSB          LSB           LSB  

               1      2     3      4     5      6     7      8      A     F  

               第1 字节        第2 字节         第3 字节        第4 字节        第5 字节  

                            图12  通配地址SA=12345678A 的排列  

5.1.4.3.3  组地址  

    当服务器地址的类别标志为组地址时,同5.1.4.3.1  。 组地址对系统中凡是属于该群组的服务器 
都有效,但都无需回答。  

5.1.4.3.4  广播地址  

    当服务器地址的类别标志为广播地址时,SA=AAH,服务器地址长度为1个字节。广播地址对系统所 
有服务器都有效,但都无需回答。  

5.1.4.4  客户机地址CA  

    客户机地址CA用1字节无符号整数表示,取值范围0…255,值为0表示不关注客户机地址。  

                                                                                       8  

----------------------- Page 13-----------------------

                                                        DL/T 698.45—201X  

5.1.5  帧头校验HCS  

   帧头校验HCS为2字节,是对帧头部分除起始字符和HCS本身之外的所有字节的校验,校验算法见附  
录  D。  

5.1.6  链路用户数据  

   链路用户数据包含一个完整的应用层协议数据单元（APDU）字节序列或APDU的分帧片段,APDU定义 
见6.3.4  。  

5.1.7  帧校验FCS  

   帧校验FCS为2字节,是对整帧除起始字符、结束字符和FCS本身之外的所有字节的校验,校验算法 
见附  录  D。  

5.2  字节格式  

   帧的基本单元为8位字节。链路层传输顺序为低位在前,高位在后；低字节在前,高字节在后。  

5.3  传输规则  

5.3.1  字节规则  

   传输规则包括：  
   a)  采用串行通信方式实现本地数据传输时,在发送数据时,在有效数据帧前加4 个FEH 作为前导 
      码。  
   b)  线路空闲状态为二进制1。  
   c)  帧的字符之间无线路空闲间隔；两帧之间的线路空闲间隔最少需33 位。  
   d)  如按e）检出了差错,两帧之间的线路空闲间隔最少需33 位。  
   e)  帧头校验HCS 和帧校验FCS。  
   f)  接收方校验：  
      1)  对于每个字符：校验起动位、停止位、偶校验位。  
      2)  对于每帧：  
         ——检验帧头中的起始字符和帧头校验HCS；  
         ——识别长度L；  
         ——每帧接收的字符数为长度域L+2；  
         ——帧校验FCS；  
         ——结束字符；  
         ——校验出一个差错时,校验按c）的线路空闲间隔；  
      若这些校验有一个失败,舍弃此帧；若无差错,则此帧数据有效。  

5.3.2  分帧规则  

5.3.2.1  分帧规则概述  

   当一个完整的应用层协议数据单元长度超过发送帧最大尺寸时,可采用分帧传输。分帧数据接收端 
应对分帧传输进行逐条确认。采用分帧传输时,控制域中分帧标志位置1。  

5.3.2.2  分帧传输格式定义  

                                                                   9  

----------------------- Page 14-----------------------

                                                                DL/T 698.45—201X  

    分帧传输时,链路层的链路用户数据为分帧传输帧,分帧传输帧格式定义见图13  。分帧传输的确 
认帧仅包含分帧格式域,不含APDU片段。  
      

                            分帧格式域         

                                           链路用户数据  
                             APDU 片段  

                             图13  分帧传输帧格式定义  

5.3.2.3  分帧格式域定义  

    分帧格式域为2字节,按位或位的组合使用,具体定义见图14  。  

           bit7   bit6    bit5    bit4    bit3    bit2   bit1    bit0  

          bit15   bit14   bit13   bit12  bit11   bit10   bit9    bit8  

                               图14  分帧格式域定义  

    bit0~bit11：表示分帧传输过程的帧序号,取值范围0~4095,循环使用；  
    bit12~bit13：保留；  
    bit14=0,bit15=0：表示分帧传输数据起始帧；  
    bit14=0,bit15=1：表示分帧传输确认帧 （确认帧不包含APDU片段域）；  
    bit14=1,bit15=0：表示分帧传输最后帧；  
    bit14=1,bit15=1：表示分帧传输中间帧。  

5.3.2.4  分帧传输交换规则  

    分帧数据交换,可用于服务器或客户机任意一侧,可用于主动发起的数据服务或者被动应答的数据 
服务,分帧传输的数据内容,不可自解析,必须收齐所有数据块,组合后,才可得到完整的一个APDU 
应用数据单元。  
    由服务器或客户机启动传输的数据分帧传输时序见图15  。  
      

                                                                            10  

----------------------- Page 15-----------------------

                                                                                       DL/T 698.45—201X  

客户机/服务器           客户机/服务器             客户机/服务器                服务器/客户机           服务器/客户机           服务器/客户机 
  应用进程               应用层               数据链路层                   数据链路层              应用层              应用进程 

                           启动分帧传输                                    block = 0 
                           block = 0                                 分帧类型=00 
          XX.request/                            APDU(Fragment) 
       REPORT.notification 分帧类型=00                                   分帧传输帧 

                           分帧传输确认                                    分帧传输确认 
                           block = 0                 Data            block = 0 

                           分帧类型=01                                   分帧类型=01 

                                                中间传输过程 

                                                                     block = N 
                           block = N 
                                                                     分帧类型=10 
                           分帧类型=10               APDU(Fragment) 
                           分帧传输最后帧                                   分帧传输最后帧            XX.indication 
                                                                                        REPORT.indication 

                                                       

                      图15  服务器/客户机启动传输的数据请求服务的分帧时序  

   服务器响应客户机请求的数据分帧传输时序见图16  。  
     

                                                                                                       11  

----------------------- Page 16-----------------------

                                                                              DL/T 698.45—201X  

   客户机            客户机               客户机                 服务器             服务器              服务器 
  应用进程            应用层             数据链路层                数据链路层            应用层              应用进程 

         XX.request 
                         DATA(APDU)                           DATA(APDU) 

                                                                               XX.indication 

                         block = 0                            block = 0        XX.response 
                         分帧类型=00                              分帧类型=00 
                         分帧传输               APDU(Fragment)    发起分帧传输 

                         block = 0                           block = 0 
                         分帧类型=01                Data         分帧类型=01 

                         分帧传输确认                              分帧传输确认 

                                            中间传输过程 

                         block =  N                          block =  N 
                         分帧类型=10                             分帧类型=10 
                                            APDU(Fragment) 
                         分帧传输最后帧                             分帧传输最后帧 
         XX.confirm 

                                                  

                               图16  响应数据请求的服务分帧时序  

    分帧传输格式域包含分帧序号（block）、分帧类型（type）,分帧的第一帧数据,block = 0,type  
= 0；分帧的最后一帧,block = N （N为实际包序号）,type = 2,分帧传输完毕。  
    分帧传输确认,type = 1,block为最近一次收到正确的帧序号。对端在接收到该确认报文后应准 
备并传输下一个数据块,此数据块包含分帧序号block = 上次正确发送的帧序号+1,这样数据块的交换 
和确认应正常继续下去,直到发送完最后一个数据块,在接收到最后一个数据块后,分帧传输过程完成。  

6  应用层  

6.1  应用层服务规范  

6.1.1  应用层服务概述  

6.1.1.1  应用层服务对象组件  

    应用层服务对象是构成客户机和服务器应用层的主要组件,它使用数据链路层提供的服务,服务规 
范包含客户机和服务器应用进程在各自应用层的逻辑接口,并向应用进程提供服务。客户机和服务器的 
应用服务对象都包括预连接、应用连接和数据交换三个必备组件。  

6.1.1.2  预连接  

                                                                                            12  

----------------------- Page 17-----------------------

                                                   DL/T 698.45—201X  

   预连接服务适用于交换网络传输信道,如以太网、GPRS等,当其完成物理连接,建立透明通道后, 
需要在此通道上建立预连接并进行管理。  
   预连接对应客户机和服务器各自应用层提供的服务见表4  。   

                      表4  应用层提供的预连接服务  

    服务名称             客户机应用层服务                 服务器应用层服务  

     预连接         LINK （.indication,.response）  LINK （.request,.confirm）  

     
   预连接服务（LINK）由服务器发起,客户机响应,LINK服务包括：  
   a)  登录：在完成物理连接,建立透明通道后,服务器应用进程按预连接配置参数向指定客户机发 
      出登录请求,客户机应用进程给予确认,完成预连接。  
   b)  心跳：服务器采用“心跳”的方式来保证预连接通道处于活动状态。  
   c)  退出登录：在建立预连接后,不允许服务器主动断开。若要变更,需重新配置服务器预连接参 
      数,服务器在重启后生效；或接收到客户机执行“复位”方法后,向原客户机发出退出登录指 
      示,然后再按照新配参数执行新的预连接登录。  
   对于本地通信信道,如RS485、红外等,当物理连接建立时,默认预连接的通道即存在,不需要额 
外的建立以及预连接管理。  

6.1.1.3  应用连接  

6.1.1.3.1  应用连接窗口  

   为访问服务器的接口类对象,首先要建立一个应用连接,并创建一个可以相互通信的语境。这个语 
境主要包含：应用语境的信息、使用身份验证机制的信息,以及其他需要的信息,这些信息包含在“应 
用连接”的接口类对象中。  
   服务器可以授予不同的访问权限给应用连接,访问权限涉及一组接口类对象,这组对象可以在给定 
的应用连接内被访问,即可视对象。  
   客户机可以通过读取应用连接对象的“可访问对象列表”属性而获得可视对象列表,即应用连接窗 
口,并利用应用连接对象所提供的方法,在已建立的应用连接内获得当前语境等更多的信息。  
   在预连接通道上,默认具有一个最低权限级别的应用连接窗口,即“预建立的应用连接窗口”,在 
此窗口内,客户机不需要进行应用连接协商以及安全认证等便可访问该应用连接窗口的内容。  

6.1.1.3.2  建立和断开应用连接  

   建立应用连接（CONNECT）,由客户机向服务器发起,用于确认客户机和服务器双方通信的应用语 
境,包含协议一致性、功能一致性以及安全认证等内容。  
   服务器可同时支持若干个应用连接,互不干扰,但对同一个客户机,同时仅支持一个应用连接,当 
同一个客户机再次请求建立应用连接时,服务器如接受了客户机的再次请求,则前一个应用连接自动失 
效。  
   断开应用连接（RELEASE）用于正常断开一个已经建立的应用连接。由于不允许服务器提出正常断 
开应用连接的请求,所以RELEASE.request服务只能由客户机提出,并且通常情况下,服务器不得拒绝 
此请求。  
   每一个应用连接在建立过程中,可以协商应用连接的静态超时时间,当连续无通信时间达到静态超 
时时间后,服务器将使用RELEASE.notification通知客户机,应用连接失效将被断开,此服务不需要客 
户机做任何响应。  

                                                             13  

----------------------- Page 18-----------------------

                                                                         DL/T 698.45—201X  

    应用连接对应客户机和服务器各自应用层提供的服务见表5  。  

                               表5  应用层提供的应用连接服务  

      服务名称                    客户机应用层服务                             服务器应用层服务  

 客户机建立应用连接               CONNECT （.request,.confirm）       CONNECT （.indication,.response）  

 客户机断开应用连接               RELEASE （.request,.confirm）       RELEASE （.indication,.response）  

  超时断开应用连接                                                     RELEASE （.notification）  

      

6.1.1.3.3  预连接时建立的应用连接  

    预连接时建立的应用连接不需要使用CONNECT服务,即认为CONNECT已经完成,因此,预连接时建立 
的应用连接可以看成是在客户机和服务器之间完成预连接时应用连接已经存在,任何时候它都不能被断 
开,仅具有最低权限级别,窗口内容由服务器定义。这种应用连接简化了客户机和服务器之间数据交换, 
省掉了建立和断开应用连接阶段,仅有数据交换阶段。当客户机需要得到较高权限的服务器服务时,客 
户机必须发起建立较高权限的应用连接。  

6.1.1.4  数据交换  

    数据交换服务是用于客户机和服务器之间的数据交换,是通过逻辑名引用来访问接口对象的属性或 
方法。数据通信服务对应客户机和服务器各自应用层提供的服务见表6  。  

                               表6  应用层提供的数据交换服务  

      服务名称                    客户机应用层服务                             服务器应用层服务  

       读取                 GET （.request,.confirm）            GET （.indication,.response）  

       设置                  SET （.request,.confirm）           SET （.indication,.response）  

       操作                ACTION （.request,.confirm）         ACTION （.indication,.response）  

       上报              REPORT （.indication,.response）      REPORT （.notification,.confirm）  

       代理                 PROXY （.request,.confirm）         PROXY （.indication,.response）  

      
    这些服务可分为两种通信类型：请求/响应类型、通知/确认类型。  
    请求/响应类数据交换服务是：读取（GET）、设置（SET）、操作（ACTION）、代理（PROXY）。  
    通知/确认类数据交换服务是：上报（REPORT）。  
    请求/响应类数据交换服务是通过客户机和服务器应用进程之间的数据交换来提供并完成的,即： 
客户机应用进程通过调用应用层的某个服务请求XX.request,服务器应用层接收到客户机请求后向服务 
器应用进程发出服务指示XX.indication,然后应用进程通过调用服务XX.response以响应客户机请求, 
客户机应用层接收到服务器响应后向客户机应用进程返回服务确认XX.confirm。其正常服务顺序见图 
17  。  

            客户机           客户机          客户机           服务器           服务器          服务器 
            应用进程          应用层        数据链路层          数据链路层         应用层          应用进程 

                  XX.request 
                             DATA （APDU）                 DATA （APDU） 
                                                                       XX.indication 

                                                                       XX.response 
                             DATA （APDU）                 DATA （APDU） 
                  XX.confirm 

      时间 
                                                                                        

                                                                                       14  

----------------------- Page 19-----------------------

                                                               DL/T 698.45—201X  

                         图17  请求/响应类型的正常服务顺序  

    对于请求/响应类数据通信服务,在通信语境商定后,客户机和服务器的数据通信服务集是完全对 
等互补的,即：服务集相同,只是XX.request服务换成了XX.indication服务,XX.response服务换成了 
XX.confirm服务。因此,一个XX.request的APDU与一个XX.indication的APDU对等；一个XX.response 
的APDU与一个XX.confirm的APDU对等。  
    通知/确认类数据交换服务也是通过客户机和服务器应用进程之间的数据交换来提供并完成的,即： 
在客户机向服务器定制了主动上报的情况下,服务器应用进程通过调用应用层服务YY. notification, 
客户机应用层接收到服务器上报后向客户机应用进程发出服务指示YY.indication,然后客户机应用进 
程通过调用服务YY.response向服务器予以确认响应,服务器应用层接收到客户机确认响应后向服务器 
应用进程返回服务确认YY.confirm。其正常服务顺序见图18  。  

          客户机        客户机         客户机          服务器         服务器        服务器 
         应用进程        应用层        数据链路层        数据链路层        应用层        应用进程 

                                                             YY.notification 
                         DATA（APDU）              DATA（APDU） 
              YY.indication 

              YY.response 
                         DATA（APDU）              DATA（APDU） 
                                                              YY.confirm 

    时间 
                                                                             

                         图18  通知/确认类型的正常服务顺序  

    对于通知/确认类数据通信服务,在通信语境商定后,客户机和服务器的数据通信服务集也是完全 
对等互补的,即：服务集相同,只是YY. notification服务换成了YY.indication服务,YY.response 
服务换成了YY.confirm服务。因此,一个YY. notification的APDU与一个YY.indication的APDU对等； 
一个YY.response的APDU与一个YY.confirm的APDU对等。  

6.1.1.5  有关传输的时间标签  

    时间标签用于传输的时序和时效性判断,其包括一个开始发送时间和一个允许传输延时时间。  
    允许传输延时时间,是指从开始发送至对方接收到能解析的完整的应用层数据单元之间所允许的传 
输延时时间。  
    对于请求/响应类数据交换服务,时间标签由客户机产生,随请求传送给服务器,服务器据此判决 
收到的请求的时序和时效性,如判别有效,响应收到的请求,并在响应中将接收到的时间标签返回客户 
机。  
    对于通知/确认类数据通信服务,时间标签由服务器产生,随通知传送给客户机,客户机据此判决 
收到的通知的时序和时效性,如判别有效,确认收到的通知,并在确认中将接收到的时间标签返回服务 
器。  
    时效性判断规则：在时间标签中允许传输延时时间大于零的前提下,如果接收方的当前时间与时间 
标签中的开始发送时间之间的时差大于时间标签中的允许传输延时时间,则放弃处理；反之,则处理。  

6.1.1.6  有关服务器信息上报  

6.1.1.6.1  服务器上报服务  

    服务器上报服务（REPORT）是通过“注册-通知-撤销注册”的机制给客户机提供的一种系统级服务。 
客户机可通过GET服务查询出服务器支持的可注册后上报的服务集（如事件或定时数据上报等）,并可 

                                                                           15  

----------------------- Page 20-----------------------

                                                              DL/T 698.45—201X  

根据系统需求通过SET服务以自定义形式注册部分或全部服务。注册成功后,服务器在检测到上报条件 
满足时（如产生了事件或定时上报时间到等）,通过REPORT.notification服务及时通知客户机。  
    该服务默认对远程通道有效,本地通道提供同样服务应由服务器界面提供相关信息指示,并经配置 
后使用。  

6.1.1.6.2  服务器APDU 的跟随上报信息域  

    服务器应用层协议数据单元（APDU）中的可选的跟随上报信息域,是当系统不适合或服务器不支持 
上报服务（REPORT）时,用于作为ACD标志事件上报方式的补充,以实现更及时上报客户机注册的上报 
信息。  
    该域同样默认对远程通道选择性有效,本地通道提供同样服务应由服务器界面提供相关信息指示, 
并经配置后使用。  

6.1.2  预连接  

6.1.2.1  LINK.request 服务  

    本服务由服务器应用进程调用,用于向远方客户机应用进程提出登录、心跳或退出登录三类预连接 
请求。用原语LINK.request表示,见表7  。  

                      表7  LINK.request 服务语义及其参数说明  

        服务原语                                   参数说明  

LINK.request           请求类型——登录、心跳、退出登录。  

(                      心跳周期——两次心跳请求的时间间隔。  

  请求类型,                请求时间——请求时服务器的时钟时间。  

  心跳周期,  

  请求时间  

)  

     

6.1.2.2  LINK.indication 服务  

    本服务由客户机应用层调用,用于向客户机应用进程指示接收到远方服务器提出的预连接请求。用 
原语LINK.indication表示,服务参数同LINK.request,见表7  。  

6.1.2.3  LINK.response 服务  

    本服务由客户机应用进程调用,用于向服务器应用进程响应预连接请求。  
    用原语LINK.response表示,见表8  。  

                      表8  LINK.response 服务语义及其参数说明  

        服务原语                                   参数说明  

LINK.response          请求类型——登录、心跳、退出登录。  

(                      结果——用于表明请求是否成功或失败及其原因。  

  请求类型,                请求时间——即为LINK.request 的“请求时间”。  

  结果,                  收到时间——为接收到LINK.indication 的时间。  

  请求时间,                响应时间——为发出LINK.response 的时间。  

                                                                          16  

----------------------- Page 21-----------------------

                                                                 DL/T 698.45—201X  

  收到时间,                 时间可信度——用于表明客户机时钟的准确性。  

  响应时间,  

  时间可信度  

)  

      

6.1.2.4  LINK.confirm 服务  

    本服务由服务器应用层调用,用于向服务器应用进程指示接收到预连接请求的响应。用原语 
LINK.confirm表示,服务参数同LINK.response,见表8  。  

6.1.3  建立应用连接  

6.1.3.1  CONNECT.request 服务  

    本服务由客户机应用进程调用,用于向远方服务器的应用进程提出建立应用连接请求。  
    用原语CONNECT.request表示,见表9  。  

                      表9  CONNECT.request 服务语义及其参数说明  

        服务原语                                     参数说明  

CONNECT.request         认证机制信息——包括以下内容：  

(                       1)  公共连接——不需要安全机制；  

  期望的应用层协议版本号,          2)  一般密码——使用明文密码；  

  期望的协议一致性块,            3)  对称加密——使用ESAM 对称加密进行安全认证,并建立会话密钥；  

  期望的功能一致性块,            4)  数字签名——使用ESAM 非对称加密进行安全认证,并建立会话密钥  。  

  客户机发送帧最大尺寸,  

  客户机接收帧最大尺寸,  

  客户机接收帧最大窗口尺寸,  

  客户机最大可处理APDU 尺寸,  

  期望的应用连接超时时间,  

  认证机制信息  

)  

      

6.1.3.2  CONNECT.indication 服务  

    本服务由服务器应用层调用,用于向服务器应用进程指示接收到远方客户机提出的建立应用连接的 
请求。用原语CONNECT.indication表示,服务参数同CONNECT.request,见表9  。  

6.1.3.3  CONNECT.response 服务  

    本服务由服务器应用进程调用,用于向客户机应用进程返回请求结果。  
    用原语CONNECT.response表示,见表10  。  

                     表10  CONNECT.response 服务语义及其参数说明  

        服务原语                                     参数说明  

CONNECT.response        商定的应用连接超时时间——单位：秒。  

                                                                              17  

----------------------- Page 22-----------------------

                                                                         DL/T 698.45—201X  

(  

  服务器厂商版本信息,  

  商定的应用层协议版本号,  

  商定的协议一致性块,  

  商定的功能一致性块,  

  服务器发送帧最大尺寸,  

  服务器接收帧最大尺寸,  

  服务器接收帧最大窗口尺寸,  

  服务器最大可处理APDU 尺寸,  

  商定的应用连接超时时间,  

  认证响应  

)  

      

6.1.3.4  CONNECT.confirm 服务  

    本服务由客户机应用层调用,用于向客户机应用进程指示接收到建立应用连接请求的响应。  
    用原语CONNECT.confirm表示,服务参数同CONNECT.response,见表10  。  

6.1.4  断开应用连接  

6.1.4.1  RELEASE.request 服务  

    本服务由客户机应用进程调用,用于向远方服务器的应用进程提出断开应用连接请求。  
    用原语RELEASE.request表示,见表11  。  

                        表11  RELEASE.request 服务语义及其参数说明  

         服务原语                                          参数说明  

RELEASE.request            无参数  

(  

)  

      

6.1.4.2  RELEASE.indication 服务  

    本服务由服务器应用层调用,用于向服务器应用进程指示接收到远方客户机提出的断开应用连接的 
请求。用原语RELEASE.indication表示,服务参数同RELEASE.request,见表11  。  

6.1.4.3  RELEASE.response 服务  

    本服务由服务器应用进程调用,用于向客户机应用进程返回请求结果。  
    用原语RELEASE.response表示,见表12  。  

                        表12  RELEASE.response 服务语义及其参数说明  

         服务原语                                          参数说明  

RELEASE.response           结果——请求的结果,通常情况下,服务器不得拒绝此请求。  

(  

                                                                                      18  

----------------------- Page 23-----------------------

                                                                  DL/T 698.45—201X  

  结果  

)  

      

6.1.4.4  RELEASE.confirm 服务  

    本服务由客户机应用层调用,用于向客户机应用进程指示接收到断开应用连接请求的响应。  
    用原语RELEASE.confirm表示,服务参数同RELEASE.response,见表12  。  

6.1.4.5  RELEASE.notification 服务  

    本服务由服务器应用进程调用,用于通知客户机应用进程连接因超时而失效将被断开,此服务不需 
要客户机做任何响应。用原语RELEASE.notification表示,见表13  。  

                    表13  RELEASE.notification 服务语义及其参数说明  

        服务原语                                      参数说明  

RELEASE.notification     应用连接建立时间——建立应用链接时的终端时间；  

(                        服务器当前时间——发出连接断开的终端时间。  

  应用连接建立时间,  

  服务器当前时间  

)  

      

6.1.5  读取  

6.1.5.1  GET.request 服务  

    本服务由客户机应用进程调用,用于向远方服务器的应用进程请求服务器的若干个接口类对象的所 
有属性值。用原语GET.request表示,见表14  。  

                        表14  GET.request 服务语义及其参数说明  

        服务原语                                      参数说明  

GET.request              请求类型——用于区分不同的读取请求,分为以下几种类型：  

(                        1)  读取一个对象属性；  

  请求类型,                  2)  读取若干个对象属性；  

  对象属性描述符,               3)  读取一个记录型对象属性；  

  {对象属性描述符,}             4)  读取若干个记录型对象属性；  

  数据块序号                  5)  读取分帧响应的下一个数据块,仅在被请求的数据响应不能在一个 

)                           GET.response APDU 中传输时才使用。  

                         对象属性描述符——仅当“请求类型”为 1）至4）时才出现,用于表明要读取的对 

                         象属性,分为一般型、记录型两种。  

                         数据块序号——用于表明正确接收到的最近一次数据块的序号,仅当“请求类型” 

                         为5）时出现。  

      

6.1.5.2  GET.indication 服务  

                                                                               19  

----------------------- Page 24-----------------------

                                                              DL/T 698.45—201X  

    本服务由服务器应用层调用,用于向服务器应用进程指示接收到远方客户机GET.request服务请求。 
用原语GET.indication表示,服务参数同GET.request,见表14  。  

6.1.5.3  GET.response 服务  

    本服务由服务器应用进程调用,用于对应GET.indication向客户机应用进程返回请求结果。用原语 
GET.response表示,见表15  。  

                      表15  GET.response 服务语义及其参数说明  

        服务原语                                   参数说明  

GET. response          响应类型——用于表明响应是否包含对应 GET.request 服务调用的响应,或只包含 

(                      部分响应,对应请求类型,响应类型分为以下几种类型：  

  响应类型,                1)  读取一个对象属性的响应；  

  读取结果,                2)  读取若干个对象属性的响应；  

  {读取结果,}              3)  读取一个记录型对象属性的响应；  

  数据块序号                4)  读取若干个记录型对象属性的响应；  

)                      5)  分帧响应一个数据块,分帧方式按请求对象属性分成能自解释的若干独立响应, 

                           且这一类根据GET.request 请求类型还分为一般型、记录型两种对象属性。  

                       读取结果——用于表明读取请求的响应结果,包括对象属性描述符及其数值,对象 

                       属性为一般型、记录型两种。如“读取结果”的编码形式不适合在一个APDU 中传输, 

                       则它应采用分帧响应,即“响应类型”为5）；  

                       6)  数据块序号——用于表明本APDU 中数据块的序号,仅在“响应类型”为5）时 

                           出现。  

     

6.1.5.4  GET.confirm 服务  

    本服务由客户机应用层调用,用于向客户机应用进程指示接收到服务器GET.response APDU。用原 
语GET.confirm表示,服务参数同GET.response,见表15  。  

6.1.6  设置  

6.1.6.1  SET.request 服务  

    本服务由客户机应用进程调用,用于向远方服务器的应用进程设置服务器的若干个接口类对象的一 
个或所有的属性值。用原语SET.request表示,见表16  。  

                      表16  SET.request 服务语义及其参数说明  

        服务原语                                   参数说明  

SET.request            请求类型——用于区分不同的设置请求,分为以下几种类型：  

(                      1)  设置一个对象属性请求；  

  请求类型,                2)  设置若干个对象属性请求；  

  对象属性描述符及其数值,         3)  设置后读取若干个对象属性请求。  

  {对象属性描述符及其数值,}       对象属性描述符及其数值——用于表明要设置的对象属性及其设置数值。  

  对象属性描述符,             对象属性描述符——仅当“请求类型”为3）时才出现,用于表明在设置后要读取的 

  {对象属性描述符,}           对象属性,对象属性仅为一般型。  

                                                                          20  

----------------------- Page 25-----------------------

                                                                  DL/T 698.45—201X  

)  

      

6.1.6.2  SET.indication 服务  

    本服务由服务器应用层调用,用于向服务器应用进程指示接收到远方客户机SET.request服务请求。 
用原语SET.indication表示,服务参数同SET.request,见表16  。  

6.1.6.3  SET.response 服务  

    本服务由服务器应用进程调用,用于对应SET.indication向客户机应用进程返回请求结果。用原语 
SET.response表示,见表17  。  

                       表17  SET.response 服务语义及其参数说明  

        服务原语                                      参数说明  

SET.response            响应类型——用于表明响应所对应的SET.request 服务的请求类型,对应请求类型, 

(                       响应类型分为以下几种类型：  

  响应类型,                 1)  设置一个对象属性的确认信息；  

  设置结果,                 2)  设置若干个对象属性的确认信息；  

 {设置结果,}                3)  设置若干个对象属性的确认信息以及读取若干个对象属性的响应。  

  读取结果,                 设置结果——用于表明设置的执行结果,包括设置的对象属性描述符及其结果。  

 {读取结果,}                读取结果——仅在“响应类型”为3）时出现,用于表明设置后读取属性的响应结果, 

)                       包括设置后读取的对象属性描述符及其数据,对象属性仅为一般型。  

      

6.1.6.4  SET.confirm 服务  

    本服务由客户机应用层调用,用于向客户机应用进程指示接收到服务器SET.response APDU。用原 
语SET.confirm表示,服务参数同SET.response,见表17  。  

6.1.7  操作  

6.1.7.1  ACTION.request 服务  

    本服务由客户机应用进程调用,用于调用远方服务器应用进程中的若干个接口类对象的若干个方 
法。用原语ACTION.request表示,见表18  。  

                      表18  ACTION.request 服务语义及其参数说明  

        服务原语                                      参数说明  

ACTION.request          请求类型——用于区分不同的操作请求,分为以下几种类型：  

(                       1)  操作一个对象方法请求；  

  请求类型,                 2)  操作若干个对象方法请求；  

  对象方法描述符及参数,           3)  操作若干个对象方法后读取若干个对象属性请求。  

 {对象方法描述符及参数,}          对象方法描述符——用于表明要操作的对象的方法。  

  对象属性描述符,              对象属性描述符——仅当“请求类型”为3）时才出现,用于表明操作执行后要读取 

 {对象属性描述符,}             的对象属性,对象属性仅为一般型。  

)  

                                                                              21  

----------------------- Page 26-----------------------

                                                                  DL/T 698.45—201X  

      

6.1.7.2  ACTION.indication 服务  

    本服务由服务器应用层调用,用于向服务器应用进程指示接收到远方客户机ACTION.request服务请 
求。用原语ACTION.indication表示,服务参数同ACTION.request,见表18  。  

6.1.7.3  ACTION.response 服务  

    本服务由服务器应用进程调用,用于对应ACTION.indication向客户机应用进程返回请求结果。用 
原语ACTION.response表示,见表19  。  

                      表19  ACTION.response 服务语义及其参数说明  

        服务原语                                     参数说明  

ACTION.response        响应类型——用于表明响应所对应的 ACTION.request 服务的请求类型,对应请求类 

(                      型,响应类型分为以下几种类型：  

  响应类型,                1)  操作一个对象方法的响应；  

  操作结果,                2)  操作若干个对象方法的响应；  

 {操作结果,}               3)  操作若干个对象方法后读取若干个对象属性的响应。  

  读取结果,                操作结果——用于表明调用对象方法的执行结果,包括对象方法描述符及其结果。  

 {读取结果,}               读取结果——仅在“响应类型”为 3）时出现,用于表明操作执行后要读取的对象属 

)                      性的响应结果,包括对象属性描述符及其数据,对象属性仅为一般型。  

      

6.1.7.4  ACTION.confirm 服务  

    本服务由客户机应用层调用,用于向客户机应用进程指示接收到服务器ACTION.response APDU。用 
原语ACTION.confirm表示,服务参数同ACTION.response,见表19  。  

6.1.8  上报  

6.1.8.1  REPORT.notification 服务  

    本服务由服务器应用进程调用,用于向远方客户机应用进程上报信息,该信息是由客户机通过注册 
方式预定的。用原语REPORT.notification表示,见表20  。  

                    表20  REPORT.notification 服务语义及其参数说明  

        服务原语                                      参数说明  

REPORT.notification      通知类型——用于区分不同的上报通知,分为以下几种类型：  

(                        1)  上报若干个对象属性；  

  通知类型,                  2)  上报若干个记录型对象属性。  

  对象属性描述符及其数值,           对象属性描述符及其数值——用于表明上报的信息。  

 {对象属性描述符及其数值,}  

)  

      

6.1.8.2  REPORT.indication 服务  

                                                                              22  

----------------------- Page 27-----------------------

                                                              DL/T 698.45—201X  

    本服务由客户机应用层调用,用于向客户机应用进程指示接收到远方服务器REPORT.notification 
服务通知。用原语REPORT.indication表示,服务参数同REPORT.notification,见表20  。  

6.1.8.3  REPORT.response 服务  

    本服务由客户机应用进程调用,用于对应REPORT.indication向服务器应用进程返回确认结果。用 
原语REPORT.response表示,见表21  。  

                     表21  REPORT.response 服务语义及其参数说明  

        服务原语                                   参数说明  

REPORT.response        响应类型——用于表明响应所对应的 REPORT.indication 服务的通知类型,对应通 

(                      知类型,响应类型分为以下几种类型：  

  响应类型,                上报若干个对象属性的响应；  

  确认结果,                上报若干个记录型对象属性的响应。  

 {确认结果,}               确认结果——用于表明上报的确认结果,为被确认的对象属性描述符,对象属性为 

)                      一般型和记录型2 种。  

     

6.1.8.4  REPORT.confirm 服务  

    本服务由服务器应用层调用,用于向服务器应用进程指示接收到客户机REPORT.response APDU。用 
原语REPORT.confirm表示,服务参数同REPORT.response,见表21  。  

6.1.9  代理  

6.1.9.1  PROXY.request 服务  

    本服务由客户机应用进程调用,用于向远方服务器（代理服务器）的应用进程提出代理请求。用原 
语PROXY.request表示,见表22  。  

                      表22  PROXY.request 服务语义及其参数说明  

        服务原语                                   参数说明  

PROXY.request          请求类型——用于区分不同的代理请求,分为以下几种类型：  

(                      1)  代理读取若干个服务器的若干个对象属性；  

  请求类型,                2)  代理读取一个服务器的一个记录型对象属性；  

   目标服务器地址/端口,         3)  代理设置若干个服务器的若干个对象属性；  

  {目标服务器地址,}           4)  代理设置后读取若干个服务器的若干个对象属性；  

  对象属性描述符,             5)  代理操作若干个服务器的若干个对象方法；  

 {对象属性描述符,}            6)  代理操作后读取若干个服务器的若干个对象方法和属性；  

  对象属性描述符及其数值,         7)  代理透明转发命令。  

  {对象属性描述符及其数值,}       目标服务器地址——用于表明代理的目标服务器地址,如 PROXY.request 的目标服 

  对象方法描述符,             务器地址采用了通配地址,响应时要分解为确定的服务器单地址,即PROXY.response 

 {对象方法描述符,}            的目标服务器地址皆为单地址。  

  代理相关参数,              对象属性描述符——用于表明要代理读取的对象属性,当“请求类型”为1）、4）、6） 

 {代理相关参数,}             时,对象属性仅为一般型,当“请求类型”为2）时,对象属性为记录型。  

 {透明命令,}               对象属性描述符及其数值——用于表明要代理设置的对象属性,仅当“请求类型” 

                                                                          23  

----------------------- Page 28-----------------------

                                                             DL/T 698.45—201X  

)                      为3）、4）时才出现,对象属性仅为一般型。  

                       对象方法描述符——用于表明要代理操作的对象方法,仅当“请求类型”为5）、6） 

                       时才出现。  

                       代理相关参数——与代理请求相关的所需参数。  

  

6.1.9.2  PROXY.indication 服务  

   本服务由服务器应用层调用,用于向服务器应用进程指示接收到远方客户机PROXY.request服务请 
求。用原语PROXY.indication表示,服务参数同PROXY.request,见表22  。  

6.1.9.3  PROXY.response 服务  

   本服务由服务器应用进程调用,用于对应PROXY.indication向客户机应用进程返回代理请求的代理 
执行结果。用原语PROXY.response表示,见表23  。  

                     表23  PROXY.response 服务语义及其参数说明  

        服务原语                                  参数说明  

PROXY.response         响应类型——用于表明响应所对应的 PROXY.request 服务的请求类型,对应请求类 

(                      型,响应类型分为以下几种类型：  

  响应类型,                1)  代理读取若干个服务器的若干个对象属性的响应；  

   目标服务器地址/端口,         2)  代理读取一个服务器的一个记录型对象属性的响应；  

  {目标服务器地址,}           3)  代理设置若干个服务器的若干个对象属性的确认；  

  读取结果,                4)  代理设置后读取若干个服务器的若干个对象属性的确认和响应；  

 {读取结果,}               5)  代理操作若干个服务器的若干个对象方法的确认；  

  设置结果,                6)  代理操作后读取若干个服务器的若干个对象方法和属性的确认和响应；  

 {设置结果,}               7)  代理透明转发命令的响应。  

  操作结果,                目标服务器地址——用于表明代理的目标服务器地址。  

 {操作结果,}               读取结果——当“响应类型”为1）、2）、4）、6）时才出现,用于表明代理读取请求 

)                      的响应结果,包括对象属性描述符及其数值,对象属性对应请求类型为一般型或记 

                       录型2 种。  

                       设置结果——仅当“响应类型”为3）、4）时才出现,用于表明代理设置的执行结果, 

                       包括设置的对象属性描述符及其结果,对象属性仅为一般型。  

                       操作结果——仅在“响应类型”为5）、6）时出现,用于表明代理操作对象方法的执 

                       行结果,包括对象方法描述符及其操作结果。  

     

6.1.9.4  PROXY.confirm 服务  

   本服务由客户机应用层调用,用于向客户机应用进程指示接收到服务器PROXY.response APDU。用 
原语PROXY.confirm表示,服务参数同PROXY.response,见表23  。  

6.2  应用层协议规范  

6.2.1  建立/断开应用连接的协议  

                                                                        24  

----------------------- Page 29-----------------------

                                                                     DL/T 698.45—201X  

6.2.1.1  建立应用连接  

    建立应用连接是本部分的关键组件,建立应用连接借助于CONNECT.request /.indication  
/.response /.confirm服务。  
    客户机应用进程应首先调用CONNECT.request请求服务,调用该服务前,本部分所需的预链接已经 
建立。基于预链接的低层连接,客户机应构造一个CONNECT-Request APDU。该CONNECT-Request APDU 
是发送给服务器应用层的第一个报文。  
    服务器应用层从接收到的CONNECT-Request APDU中提取出来的适当参数调用CONNECT.indication 
服务原语向服务器应用进程发出指示。  
    服务器应用进程分析接收到的CONNECT.indication原语,并且决定是否接受提出的应用连接请求, 
通过核实之后, 服务器应用进程应调用CONNECT.response服务原语,表明接受或不接受提出的连接请 
求。如果成功的话,服务器应构造相应的CONNECT-Response APDU,并通过现有的预链接通道发送给远 
方客户机应用层。从这一时刻起,服务器能够在该连接内接收数据通信服务请求,发送相应的响应。至 
此,应用连接建立完毕,服务器进入数据通信阶段。  
    如果服务器不能接受连接请求,服务器应用层应构造CONNECT-Response APDU,其中包含拒绝连接 
的状态以及原因,发送至远方客户机应用层。  
    在客户机侧,提取接收到的CONNECT-Response APDU中的参数,并通过CONNECT.confirm服务原语发 
送给客户机应用进程,如连接请求被接受,从这时刻起,在协商应用的语境中,应用连接建立完成。  

       客户机         客户机           客户机            服务器          服务器          服务器 
      应用进程         应用层         数据链路层           数据链路层         应用层          应用进程 

          CONNECT.request 
                        DATA (APDU)                  DATA (APDU) 

                                                                CONNECT.indication 

          CONNECT.confirm                                        CONNECT.response 
                                                      DATA (APDU) 
                         DATA (APDU) 

                                                                                  

                               图19  建立应用连接时序图  

6.2.1.2  断开应用连接  

6.2.1.2.1  概述  

    现有应用连接能够被正常断开或超时被断开,正常断开由客户机应用进程启动,通知服务器侧,请 
求断开当前应用连接。  
    超时被断开意味着连接被异常终止,当应用层连续无通信时长超过语境约定的超时时间,应用连接 
将被断开,此服务只能由服务器应用进程启动。  

6.2.1.2.2  正常断开应用连接  

    正常断开应用连接总是由客户机应用通过调用RELEASE.request的服务启动。根据协议生成一个 
RELEASE-Request APDU,通过低层支持协议发送到服务器侧。   
    服务器应用层把接收到的RELEASE-Request 解释为应用连接的断开请求,并且通过 
RELEASE.indication服务原语向服务器应用进程指示该请求。  

                                                                                  25  

----------------------- Page 30-----------------------

                                                                          DL/T 698.45—201X  

    服务器应用进程应接受断开请求并调用RELEASE.response服务（通常,服务器不能拒绝客户机的断 
开连接请求）。  

       客户机           客户机           客户机              服务器          服务器            服务器 
       应用进程          应用层          数据链路层            数据链路层         应用层           应用进程 

           RELEASE.request 
                          DATA(APDU)                     DATA(APDU) 

                                                                     RELEASE.indication 

           RELEASE.confirm                                            RELEASE.response 
                                                          DATA(APDU) 
                           DATA(APDU) 

                                                                                         

                               图20  请求断开应用连接的时序图  

6.2.1.2.3  通信超时导致应用连接被断开  

    本部分约定了一种情景,当应用连接建立后（不包括预建立时建立的应用连接）,如果连续无数据 
传输服务时长（不包括预链接管理服务）达到会话语境约定的超时时间后（造成通信超时的原因涵盖包 
括物理层故障在内的任何原因）,服务器应用进程将调用RELEASE.notification服务,通知客户机此连 
接将被断开,客户机不需要做任何响应。  

       客户机           客户机             客户机          服务器            服务器            服务器 
       应用进程          应用层           数据链路层        数据链路层            应用层           应用进程 

          RELEASE.indication                                        RELEASE.notification 
                           DATA(APDU)                   DATA(APDU) 

                                                                                         

                               图21  超时断开应用连接的时序图  

6.2.2  请求/响应数据交换的协议  

6.2.2.1  短帧的数据交换  

    短帧,在此特指完整的一帧APDU长度不超过会话语境约定的发送或接收数据长度；长帧,特指一帧 
APDU长度超过会话语境约定的发送或接收数据长度,需要采取分帧传输。  
    a)  读取(.request/.indication/.response/.confirm)；  
    b)  设置(.request/.indication/.response/.confirm)；  
    c)  操作(.request/.indication/.response/.confirm)；  
    d)  代理(.request/.indication/.response/.confirm)。  
    读取和设置服务用于引用接口对象实例的属性,操作服务用于引用接口对象的一个方法,代理服务 
用于引用远方服务器的对象属性或方法。上述服务,在采用短帧数据交换时,具有相同的时序,在此一 
并描述。  
    服务器的应用进程一旦接收到数据通信服务指示,应检查该服务能否被提供(检查合法性、可行性 
等),如果一切都正确,服务器应用进程应在本地使用相应的具体对象提供所请求的服务。服务器应用 
层应生成一个适当的.response报文,包含.request的执行结果,发送到客户机侧,一个交互流程完成。  

                                                                                        26  

----------------------- Page 31-----------------------

                                                                                              DL/T 698.45—201X  

         客户机              客户机               客户机                   服务器             服务器                服务器 
        应用进程              应用层             数据链路层                 数据链路层             应用层               应用进程 

                XX.request 
                                 DATA(APDU)                            DATA(APDU) 

                                                                                          XX.indication 

                XX.confirm                                                                XX.response 
                                                                         DATA(APDU) 
                                 DATA(APDU) 

                                                                                                               

                                         图22  短帧的数据交换时序图  

6.2.2.2  长帧的数据交换  

6.2.2.2.1  长帧传输的读取服务  

     读取服务的分帧传输规范仅适用于GET.response服务原语中的数据。  
     在GET.response服务中多重属性引用时,其服务参数编码形式的长度不能超过发送帧最大尺寸。如 
果GET.response服务参数编码长度超过最大尺寸时,请使用分帧服务进行传输。  
     服务器一旦接收到一个GET.request,服务器应用进程就应组装所请求的数据,如果这些数据能够 
放在一个APDU中,服务器应用进程应调用对应短帧类型的Get.response服务,其结果参数包含所请求属 
性的值。  
     如果数据长度超过发送帧最大尺寸,则应使用分帧传输,分帧传输有两种可选模式,一种单帧可自 
解析模式,一种为不可自解析模式,不可自解析传输模式必须所有数据片段接收完毕后,才能正确解析 
相应的数据。单帧可自解析的分帧方式,每一帧中必须包含完整的属性数据单元。  
     仅GET.response服务支持单帧可自解析模式,此章节时序图描述的为单帧自解析模式的时序,数据 
块传输模式,见5.3.2  。  

      客户机              客户机                 客户机                     服务器              服务器                 服务器 
     应用进程              应用层               数据链路层                   数据链路层              应用层                应用进程 

            GET.request 
                               DATA (APDU)                               DATA (APDU) 

                                                                                           GET.indication 

            GET.confirm 
             block = 0                                                                      GET.response 
                                                                                              block = 0 
          lastblock = false 
                                                                          DATA (APDU)      lastblock=false 
                                DATA (APDU) 
            GET.request 
               next 
             block = 0 
                               DATA (APDU)                               DATA (APDU)       GET.indication 
                                                                                                next 
                                                                                              block = 0 

                                                    中间帧传输 

            GET.confirm                                                                     GET.response 
             block = N                                                                        block = N 
          lastblock = true                                                DATA (APDU)     lastblock = true 
                               DATA (APDU) 

                                                                                                                   

                                                                                                               27  

----------------------- Page 32-----------------------

                                                      DL/T 698.45—201X  

                     图23  单帧可自解析分帧传输时序图  

   分帧响应GetResponseNext的APDU数据域,有两个关键的数据字段,分帧序号（block）、末帧标记 
 （lastblock）,分帧的第一帧数据,block （long-unsigned）= 0,lastblock （BOOLEAN）= False； 
分帧的最后一帧,block = N （N为实际包序号）,lastblock = True,分帧传输完毕。  
   客户机一旦接收到该GetResponseNext,客户机应用进程知道所请求的响应数据已经超过接收帧最 
大尺寸,并准备处理后续帧传输,它应保存所接收的APDU的数据内容,并调用GetRequestNext服务对所 
接收到的数据块进行确认。  
   服务器在接收到该确认报文后应准备并传输下一个数据块,此数据块包含分帧序号block = 1,这 
样数据块的交换和确认应正常继续下去,直到发送完最后一个数据块,此时response的lastblock  
(BOOLEAN)参数应置为True,并且客户机不对该数据块进行确认,在接收到最后一个数据块后,GET服务 
的分帧传输过程完成。  
   如果分帧传输期间发生以下差错,传输过程将终止。差错情况如下：  
   服务器出于任何原因不能提供下一个数据块。这种情况下,服务器应发送一个GetResponseNext的  
APDU,将lastblock参数置为True,block置为客户机所期望的值（接收到的block+1）,数据域Result 
参数包含一个DAR参数,用来指明差错原因。  
   服务器接收到GetRequestNext类型的GET.indication,block参数的值与服务器上一次发送的block 
参数值不相等。服务器对这种情况的解释为客户机期望终止正在进行的传输,服务器不再发送下一个数 
据块给客户机,而是返送一个GetResponseNext APDU,将lastblock参数置为True,block为接收到的 
block参数值,数据域参数为DAR＝分帧传输已取消。  
   服务器在没有进行分帧传输时接收到GetRequestNext类型的GET.indication。在这种情况下,使用 
GetResponseNext APDU进行响应。将lastblock参数置为True,block为接收到的block参数值,数据域 
参数为DAR＝不处于分帧传输状态。  
   在分帧传输期间,所有APDU中的Invoke-Id和Priority参数的值相同。如果在分帧传输期间,接收 
到其它服务请求,则按照优先级原则进行服务。  

6.2.2.2.2  长帧传输的其它服务  

     本部分仅GET.response服务支持单帧可自解析模式,其他类型服务,数据域长度超过发送帧最 
大尺寸,需要采用分帧传输时,应使用分帧服务进行,分帧服务传输时序参见5.3.2  。  

6.2.3  上报/确认数据交换的协议  

   上报/确认类服务,在本部分用于服务器主动发起,传送事件或者其它定时任务数据到客户机,在 
REPORT.request服务中,其服务参数编码形式的长度不能超过发送帧最大尺寸。如果数据长度超出,请 
使用分帧服务进行传送。  
   客户在收到REPORT.indication 指示时,应使用REPORT.response进行确认,在服务器收到 
REPORT.confirm时,方可认为主动上报发送成功,如果在约定的超时时间内,未收到确认,将再次发起 
REPORT.request,APDU中的Invoke-Id和Priority参数的值保持不变,在达到约定的最多重复次数后, 
如仍未收到确认帧,则放弃该APDU的主动上报。  
   上报/确认类服务,可以在服务器侧任意通信端口发起（包括本地端口以及远程端口,根据配置决  
   定）,确认状态与上报的通信端口相关。只有在端口预链接正确建立的前提下,服务器方可发起主 
动上报。  

                                                               28  

----------------------- Page 33-----------------------

                                                                                             DL/T 698.45—201X  

         客户机              客户机               客户机                  服务器              服务器               服务器 
        应用进程              应用层             数据链路层                 数据链路层             应用层              应用进程 

                                                                                        REPORT.request 
             REPORT.indication     DATA(APDU)                           DATA(APDU) 

              REPORT.response 
                                   DATA(APDU)                           DATA(APDU) 
                                                                                       REPORT.confirm 

                                                                                                              

                                           图24  REPORT 服务时序图  

6.3  应用层数据单元规范  

6.3.1  概述  

     应用协议数据单元（APDU）的标记规则遵循ASN.1的抽象语法,详见GB/T 16262.1-2006。  

6.3.2  通用数据类型  

     接口类及对象实例使用的数据类型见表24  。  

                                表24  接口类及对象实例使用的数据类型定义  

       类型描述                  标记                               定义                                   数值范围  

NULL                           0        空                                                                

                                        SEQUENCE OF Data （见6.3.3.1  ）                                    
array                          1  
                                        数组的元素在对象属性或方法的描述中定义  

                                        SEQUENCE OF Data （见6.3.3.1  ）                                    
structure                      2  
                                        结构的元素在对象属性或方法的描述中定义  

bool                           3        布尔值（BOOLEAN）                                                 1 或0  

bit-string                     4        比特位串（BIT STRING）                                                 

                                                                                                     31  31 
double-long                    5        32 比特位整数（Integer32）                                       -2 …2 -1  

                                                                                                        32 
double-long-unsigned           6        32 比特位正整数（double-long-unsigned）                            0…2 -1  

保留                            7-8                                                                        

octet-string                   9        8 比特位位组（字节）串（OCTET STRING）                                       

visible-string                 10       ASCII 字符串（VisibleString）                                         

保留                             11                                                                        

UTF8-string                    12       UTF-8 编码的字符串                                                     

bcd                            13       二进制编码的十进制                                                        

保留                             14                                                                        

integer                        15       8 比特位整数（integer）                                          -128…127  

long                           16       16 比特位整数（long）                                          -32768…32767  

unsigned                       17       8 比特位正整数（Unsigned8）                                         0…255  

long-unsigned                  18       16 比特位正整数（Unsigned16）                                      0…65535  

保留                             19                                                                        

                                                                                                     63  63 
long64                         20       64 比特位整数（Integer64）                                       -2 …2 -1  

                                                                                                        64   
long64-unsigned                21       64 比特位正整数（Unsigned64）                                      0…2 -1 

enum                           22       枚举的元素在对象属性或方法的描述中定义                                         0…255  

                                                                                                              29  

----------------------- Page 34-----------------------

                                                                                              DL/T 698.45—201X  

float32                        23       octet-string （SIZE （4））                                           

float64                        24       octet-string （SIZE （8））                                           

date_time                      25       octet-string （SIZE （10））                                          

date                           26       octet-string （SIZE （5））                                           

time                           27       octet-string （SIZE （3））                                           

DateTimeBCD                    28       见6.3.3.4                                                          

DateTimeBCD_H                  29       见6.3.3.5                                                          

DateTimeBCD_S                  30       见6.3.3.6                                                          

DateBCD                        31       见6.3.3.7                                                          

TimeBCD                        32       见6.3.3.8                                                          

保留                           33-79                                                                        

OI                             80       见6.3.3.30                                                         

OAD                            81       见6.3.3.11                                                         

ROAD                           82       见6.3.3.12                                                         

OMD                            83       见6.3.3.18                                                         

TI                             84       见6.3.3.28                                                         

TSA                            85       见6.3.3.19                                                         

MAC                            86       见6.3.3.21                                                         

RN                             87       见6.3.3.24                                                         

Region                         88       见6.3.3.29                                                         

Scaler_Unit                    89       见6.3.3.20                                                         

RSD                            90       见6.3.3.13                                                         

CSD                            91       见6.3.3.15                                                         

MS                             92       见6.3.3.16                                                         

SID                            93       见6.3.3.22                                                         

SID_MAC                        94       见6.3.3.23                                                         

COMDCB                         95       见6.3.3.34                                                         

保留                          96-255                                                                        

  

6.3.3  数据类型定义  

6.3.3.1  Data 数据类型  

     标记数据（Data）的数据类型定义见表25  。  

                                           表25  Data 数据类型定义  

                             数据类型定义                                                         说明  

Data∷=CHOICE                                                             见6.3.2  。  

{  

  NULL                    [0]       ,                                      ,
                                    ,                                    ,
  array                   [1]       ,                                      ,
                                    ,                                    ,
  structure               [2]       ,                                      ,
                                    ,                                    ,
  bool                    [3]       ,                                      ,
                                    ,                                    ,
  bit-string              [4]       ,                                      ,
                                    ,                                    ,
  double-long             [5]       ,                                      ,
                                    ,                                    ,
  double-long-unsigned  [6]         ,  

                                                                                                               30  

----------------------- Page 35-----------------------

                                                                                          DL/T 698.45—201X  

  octet-string           [9]       ,  

  visible-string         [10]      ,  

  UTF8-string            [12]      ,  

  bcd                    [13]      ,  

  integer                [15]      ,  

  long                   [16]      ,  

  unsigned               [17]      ,  

  long-unsigned          [18]      ,  

  long64                 [20]      ,  

  long64-unsigned        [21]      ,  

  enum                   [22]      ,  

  float32                [23]      ,  

  float64                [24]      ,  

  date_time              [25]      ,  

  date                   [26]      ,  

  time                   [27]      ,  

  DatetimeBCD            [28]      ,  

  DatetimeBCD_H          [29]      ,  

  DatetimeBCD_S          [30]      ,  

  DateBCD                [31]      ,   

  TimeBCD                [32]      ,   

  OI                     [80]      ,  

  OAD                    [81]      ,  

  ROAD                   [82]      ,  

  OMD                    [83]      ,  

  TI                     [84]      ,  

  TSA                    [85]      ,  

  MAC                    [86]      ,  

  RN                     [87]      ,  

  Region                 [88]      ,  

  Scaler_Unit            [89]      ,  

  RSD                    [90]      ,  

  CSD                    [91]      ,  

  MS                      [92]     ,  

  SID                    [93]     ,  

  SID_MAC               [94]     ,  

  COMDCB                [95]  

}  

       

6.3.3.2  浮点数据类型  

     浮点数据类型包括float32以及float64,格式定义见GB/T17966-2000。  

                                                                                                          31  

----------------------- Page 36-----------------------

                                                                                                                                                                        DL/T 698.45—201X  

6.3.3.3  ComBCD 数据类型  

          压缩BCD码（ComBCD）的数据类型定义见表26  。  

                                                                           表26  ComBCD 数据类型定义  

                            数据类型定义                                                                                                            说明  

ComBCD2∷=octet-string （SIZE （1））                                                    用bit0…bit7 表示每个八位位组的最低位到最高位,其中bit0…bit3、 

                                                                                    bit4…bit7 分别编码表示1…9。  

                                                                                    数值范围：0…99,举例：12 编码结构如下：  

                                                                                                                                                          LSB  

                                                                                                                                          1             2  

                                                                                                                                           第1 字节  

                                                                                               

ComBCD4∷=octet-string （SIZE （2））                                                     同ComBCD2 的说明。  

                                                                                    数值范围：0…9999,举例：1234 编码结构如下：   

                                                                                                                                            LSB                         LSB  

                                                                                                                             1            2             3            4  

                                                                                                                              第1 字节                      第2 字节  

                                                                                               

ComBCD6∷=octet-string （SIZE （3））                                                     同ComBCD2 的说明。  

                                                                                    数值范围：0…999999,举例：123456 编码结构如下：   

                                                                                                                               LSB                        LSB                        LSB  

                                                                                                               1             2            3             4            5             6  

                                                                                                                第1 字节                      第2 字节                      第3 字节  

                                                                                               

ComBCD8∷=octet-string （SIZE （4））                                                     同ComBCD2 的说明。  

                                                                                    数值范围：0…99999999,举例：12345678 编码结构如下：   

                                                                                                                 LSB                        LSB                         LSB                        LSB  

                                                                                                  1            2             3            4             5            6             7            8  

                                                                                                   第1 字节                      第2 字节                      第3 字节                      第4 字节  

                                                                                               

           

6.3.3.4  DateTimeBCD 数据类型  

          压缩BCD码表示的日期时间（DateTimeBCD）的数据类型定义见表27  。  

                                                                      表27  DateTimeBCD 数据类型定义  

                            数据类型定义                                                                                                            说明  

DateTimeBCD ∷=SEQUENCE                                                              DateTimeBCD 的数据格式表示为：YYYYMMDDHHmmss。  

 {                                                                                  年=9999,表示“未规定或无效”。  

  年  ComBCD4,                                                                       月、日、时、分、秒=99,表示“未规定或无效”。  

  月  ComBCD2,  

   日  ComBCD2,  

  时  ComBCD2,  

  分  ComBCD2,  

  秒  ComBCD2  

}  

           

                                                                                                                                                                                                       32  

----------------------- Page 37-----------------------

                                                                              DL/T 698.45—201X  

6.3.3.5  DateTimeBCD_H 数据类型  

    高精度压缩BCD码表示的日期时间（DateTimeBCD_H）的数据类型定义见表28  。  

                               表28  DateTimeBCD_H 数据类型定义  

               数据类型定义                                               说明  

DateTimeBCD_H ∷=SEQUENCE                   DateTimeBCD_H 的数据格式表示为：YYYYMMDDHHmmsszzzz。  

{                                          年=9999,表示“未规定或无效”。  

   日期时间  DateTimeBCD,                      月、日、时、分、秒=99,表示“未规定或无效”。  

  毫秒      long-unsigned                    毫秒=9999,表示“未规定或无效”。  

}  

  

6.3.3.6  DateTimeBCD_S 数据类型  

    压缩BCD码表示的日期时间（DateTimeBCD_S）的数据类型定义见表29  。  

                               表29  DateTimeBCD_S 数据类型定义  

             数据类型定义                                               说明  

DateTimeBCD_S ∷=SEQUENCE               DateTimeBCD_S 的数据格式表示为：YYYYMMDDHHmm。  

{                                      年=9999,表示“未规定或无效”。  

  年  ComBCD4,                          月、日、时、分=99,表示“未规定或无效”。  

  月  ComBCD2,  

   日  ComBCD2,  

  时  ComBCD2,  

  分  ComBCD2  

}  

  

6.3.3.7  DateBCD 数据类型  

    压缩BCD码表示的日期（DateBCD）的数据类型定义见表29  。  

                                  表30  DateBCD 数据类型定义  

             数据类型定义                                               说明  

DateBCD ∷=SEQUENCE                     DateBCD 的数据格式表示为：YYYYMMDD。  

{                                      年=9999,表示“未规定或无效”。  

  年  ComBCD4,                          月、日=99,表示“未规定或无效”。  

  月  ComBCD2,  

   日  ComBCD2  

}  

      

6.3.3.8  TimeBCD 数据类型  

                                                                                            33  

----------------------- Page 38-----------------------

                                                                          DL/T 698.45—201X  

    压缩BCD码表示的时间 （TimeBCD）的数据类型定义见表29  。  

                                 表31  TimeBCD 数据类型定义  

            数据类型定义                                            说明  

TimeBCD∷=SEQUENCE                    TimeBCD 的数据格式表示为：HHmmss。  

{                                    时、分、秒=99,表示“未规定或无效”。  

  时  ComBCD2,  

  分  ComBCD2,  

  秒  ComBCD2  

}  

      

6.3.3.9  PIID 数据类型  

    APDU序号及优先标志PIID （Priority and Invoke ID）的数据类型定义见表32  。  

                                  表32  PIID 数据类型定义  

            数据类型定义                                            说明  

PIID∷=bit-string （SIZE （8））          PIID 是用于客户机APDU （Client-APDU）的各服务数据类型中,基本定 

{                                    义如下,更具体应用约定应根据实际系统要求而定。  

  服务优先级bit7  （0）,                    服务优先级——0：一般的,1：高级的,在.response APDU 中,其值与 

  保留bit6        （1）,                 对应.request APDU 中的相等。  

  服务序号bit5    （2）,                   服务序号bit0…服务序号bit5——二进制编码表示0…63,在.response  

  服务序号bit4    （3）,                   APDU 中,其值与对应.request APDU 中的相等。  

  服务序号bit3    （4）,  

  服务序号bit2    （5）,  

  服务序号bit1    （6）,  

  服务序号bit0    （7）  

}  

      

6.3.3.10  PIID-ACD 数据类型  

    带ACD标志位的APDU序号及优先标志PIID-ACD （Priority and Invoke ID with ACD）数据类型定义 
见表33  。  

                                表33  PIID-ACD 数据类型定义  

            数据类型定义                                            说明  

PIID-ACD ∷=bit-string （SIZE （8））     PIID-ACD 是用于服务器APDU （Server-APDU）的各服务数据类型中,基 

{                                    本定义如下,更具体应用约定应根据实际系统要求而定。  

  服务优先级bit7        （0）,              服务优先级——见表32  说明。  

  请求访问 （ACD）bit6     （1）,            请求访问（ACD）——0：不请求,1：请求。  

  服务序号bit5          （2）,             服务序号bit0…服务序号bit5——见表32  说明。  

  服务序号bit4          （3）,  

                                                                                       34  

----------------------- Page 39-----------------------

                                                                        DL/T 698.45—201X  

  服务序号bit3          （4）,  

  服务序号bit2          （5）,  

  服务序号bit1          （6）,  

  服务序号bit0          （7）  

  }  

      

6.3.3.11  OAD 数据类型  

    对象属性描述符OAD （Object Attribute Descriptor）的数据类型定义见表34  。  

                                  表34  OAD 数据类型定义  

              数据类型定义                                           说明  

OAD∷=SEQUENCE                           OI——见7.4  。  

{                                       对象属性标识及其特征——用bit0…bit7 表示八位位组的最低位 

  对象标识          OI,                     到最高位,其中：  

  属性标识及其特征  bit-string （SIZE （8））,      1)  bit0…bit4 编码表示对象属性编号,取值0…31,其中0 表 

  属性内元素索引    unsigned （1…255）               示整个对象属性,即对象的所有属性；  

}                                       2)  bit5…bit7 编码表示属性特征,属性特征是对象同一个属性 

                                            在不同快照环境下取值模式,取值0…7,特征含义在具体类 

                                            属性中描述。  

                                        属性内元素索引——00H 表示整个属性全部内容。如果属性是一个 

                                        结构或数组,01H 指向对象属性的第一个元素；如果属性是一个记 

                                        录型的存储区,非零值n 表示最近第n 次的记录。  

      

6.3.3.12  ROAD 数据类型  

    记录型对象属性描述符ROAD （Record Object Attribute Descriptor）的数据类型定义见表35  。  

                                 表35  ROAD 数据类型定义  

              数据类型定义                                           说明  

ROAD∷=SEQUENCE                          ROAD 用于描述记录型对象中的一个或若干个关联对象属性。  

{                                       OAD——见6.3.3.11  。  

  对象属性描述符      OAD,  

  关联对象属性描述符  SEQUENCE OF OAD  

}  

      

6.3.3.13  RSD 数据类型  

    记录选择描述符RSD （Record Selection Descriptor）的数据类型定义见表36  。  

                                  表36  RSD 数据类型定义  

              数据类型定义                                           说明  

                                                                                     35  

----------------------- Page 40-----------------------

                                                                                 DL/T 698.45—201X  

RSD∷=CHOICE                                      RSD 用于选择记录型对象属性的各条记录,即二维记录表的行 

{                                            选择,其通过对构成记录的某些对象属性数值进行指定来进行选 

  不选择        [0]  NULL,                      择,范围选择区间：前闭后开,即[起始值,结束值）。  

  选择方法1     [1]  Selector1,                      例如：事件类对象的事件记录表属性、冻结类对象的冻结数据 

  选择方法2     [2]  Selector2,                  记录表属性、采集监控类的采集数据记录表。  

  选择方法3     [3]  Selector3,                      应用提示：  

  选择方法4     [4]  Selector4,                  1)   对于事件记录,通常使用事件发生时间进行选择；  

  选择方法5     [5]  Selector5,                  2)   对于冻结数据记录,通常使用冻结时间进行选择。  

  选择方法6     [6]  Selector6,  

  选择方法7     [7]  Selector7,  

  选择方法8     [8]  Selector8,  

  选择方法9     [9]  Selector9,  

  选择方法10   [10] Selector10  

}  

   Selector1∷=SEQUENCE                       Selector1 为指定对象指定值。  

   {  

     对象属性描述符  OAD,  

     数值            Data  

   }  

   Selector2∷=SEQUENCE                       Selector2 为指定对象区间内连续间隔值。  

   {                                         数据间隔——是和OAD 相关的类型,=NULL 表示无间隔（即：指定 

     对象属性描述符  OAD,                           区间内全部）。  

     起始值          Data,  

     结束值          Data,  

     数据间隔        Data  

   }  

   Selector3∷=SEQUENCE OF Selector2          Selector3 为组合筛选,即若干个指定对象连续值。  

   Selector4∷=SEQUENCE                       Selector4 为指定电能表集合、指定采集启动时间。  

   {                                         MS——见6.3.3.16  。  

     采集启动时间  DateTimeBCD,  

     电能表集合    MS  

   }  

   Selector5∷=SEQUENCE                       Selector5 为指定电能表集合、指定采集存储时间。  

   {                                         MS——见6.3.3.16  。  

     采集存储时间  DateTimeBCD,  

     电能表集合    MS  

   }  

   Selector6∷=SEQUENCE                       Selector6 为指定电能表集合、指定采集启动时间区间内连续间隔 

   {                                         值。  

     采集启动时间起始值  DateTimeBCD,                 MS——见6.3.3.16  。  

     采集启动时间结束值  DateTimeBCD,  

     时间间隔            TI,  

                                                                                                36  

----------------------- Page 41-----------------------

                                                                              DL/T 698.45—201X  

     电能表集合          MS  

   }  

   Selector7∷=SEQUENCE                      Selector7 为指定电能表集合、指定采集存储时间区间内连续间隔 

   {                                        值。  

     采集存储时间起始值  DateTimeBCD,                MS——见6.3.3.16  。  

     采集存储时间结束值  DateTimeBCD,  

     时间间隔            TI,  

     电能表集合          MS  

   }  

   Selector8∷=SEQUENCE                      Selector8 为指定电能表集合、指定采集到时间区间内连续间隔 

   {                                        值。  

     采集成功时间起始值  DateTimeBCD,                MS——见6.3.3.16  。  

     采集成功时间结束值  DateTimeBCD,  

     时间间隔            TI,  

     电能表集合          MS  

   }  

   Selector9∷=SEQUENCE                      Selector9 为指定选取上第n 次记录。  

   {  

     上第n 次记录  unsigned  

   }  

   Selector10∷=SEQUENCE                     Select10 为指定选取最新的n 条记录。  

   {                                        MS——见6.3.3.16  。  

     上n 条记录  unsigned,  

     电能表集合  MS  

   }  

      

6.3.3.14  RCSD 数据类型  

    记录列选择描述符RCSD （Record Column Selection Descriptor）的数据类型定义见表37  。  

                                    表37  RCSD 数据类型定义  

               数据类型定义                                               说明  

RCSD∷=SEQUENCE OF CSD                          RCSD 用于选择记录型对象属性中记录的某列或某几列内容, 

                                            即二维记录表的列选择,例如：事件记录或冻结数据记录中的某关 

                                            联对象属性数据列。  

                                                当无一个OAD 时,RCSD=0,即SEQUENCE OF 的数据项个数为0, 

                                            表示“不选择（即全选）”。  

      

6.3.3.15  CSD 数据类型  

    列选择描述符CSD （Column Selection Descriptor）的数据类型定义见表38  。  

                                     表38  CSD 数据类型定义  

                                                                                             37  

----------------------- Page 42-----------------------

                                                                          DL/T 698.45—201X  

              数据类型定义                                            说明  

CSD∷=CHOICE                              CSD 用于描述记录型对象中记录的列关联对象属性。   

{                                        OAD——见6.3.3.11    

  对象属性描述符        [0] OAD,                ROAD——见6.3.3.12              

  记录型对象属性描述符  [1] ROAD  

}  

      

6.3.3.16  MS 数据类型  

    电能表集合MS （Meter Set）的数据类型定义见表39  。  

                                   表39  MS 数据类型定义  

                 数据类型定义                                            说明  

MS ∷=CHOICE                                   无电能表——相当于无效配置。  

{                                             全部用户地址——全部可采集的电能表。  

  无电能表           [0]  NULL,                   一组用户类型——指定的若干用户类型的那些电能表。  

  全部用户地址         [1]  NULL,                   一组用户地址——指定的若干电能表通信地址的那些电能 

  一组用户类型         [2]  SEQUENCE OF unsigned,   表。  

  一组用户地址         [3]  SEQUENCE OF TSA,        一组配置序号——指定的若干电能表配置序号的那些电能 

  一组配置序号         [4]  SEQUENCE OF long-unsigned,  表。  

  一组用户类型区间  [5] SEQUENCE OF Region,           一组用户类型区间——按数组型式给出用户类型范围。  

  一组用户地址区间  [6] SEQUENCE OF Region,           一组用户地址区间——按数组型式给出电能表通信地址范 

  一组配置序号区间  [7] SEQUENCE OF Region            围。  

}                                             一组配置序号区间——按数组型式给出电能表档案配置序 

                                              号范围。  

      

6.3.3.17  DAR 数据类型  

    数据访问结果DAR （Data Access Result）的数据类型定义见表40  。  

                                   表40  DAR 数据类型定义  

            数据类型定义                                            说明  

DAR∷=ENUMERATED                      DAR 采用枚举方式来描述数据访问的各种可能结果。   

{  

  成功                  （0）,  

  硬件失效              （1）,  

  暂时失效              （2）,  

  拒绝读写              （3）,  

  对象未定义            （4）,  

  对象接口类不符合      （5）,  

  对象不存在            （6）,  

  类型不匹配            （7）,  

                                                                                       38  

----------------------- Page 43-----------------------

                                                                              DL/T 698.45—201X  

  越界                  （8）,  

  数据块不可用          （9）,  

  分帧传输已取消        （10）,  

  不处于分帧传输状态    （11）,  

  块写取消              （12）,  

  不存在块写状态        （13）,  

  数据块序号无效        （14）,  

  密码错/未授权         （15）,  

  通信速率不能更改      （16）,  

  年时区数超            （17）,  

  日时段数超            （18）,  

  费率数超              （19）,  

  安全认证不匹配        （20）,  

  重复充值              （21）,  

  ESAM 验证失败         （22）,  

  安全认证失败          （23）,  

  客户编号不匹配        （24）,  

  充值次数错误          （25）,  

  购电超囤积            （26）,  

  地址异常              （27）,  

  对称解密错误          （28）,  

  非对称解密错误        （29）,  

  签名错误              （30）,  

  电能表挂起            （31）,  

  时间标签无效           (32),  

  其它                  （255）  

}  

      

6.3.3.18  OMD 数据类型  

    对象方法描述符OMD （Object Method Descriptor）的数据类型定义见表41  。  

                                     表41  OMD 数据类型定义  

             数据类型定义                                               说明  

OMD∷=SEQUENCE                          OMD 用于描对象的方法。  

{                                      OI——见7.4  。  

  对象标识  OI,                            方法标识——即对象方法编号。  

  方法标识  unsigned （1…255）,              操作模式——值默认为0。  

  操作模式  unsigned （0）  

}  

      

6.3.3.19  TSA 数据类型  

                                                                                             39  

----------------------- Page 44-----------------------

                                                                         DL/T 698.45—201X  

     目标服务器地址TSA （Target Server Address）的数据类型定义见表42  。  

                                  表42  TSA 数据类型定义  

         数据类型定义                                            说明  

TSA∷=octet-string （SIZE （1…16））    TSA  为 可 变 长 度 地 址 , 取 值 范 围 为 

                               0…99999999999999999999999999999999,排列是高位在前,低位在后,十进制 

                               每两位占一字节,用bit0…bit7 表示一字节八位位组的最低位到最高位,各字 

                               节中bit7…bit4 对应十进制高位,bit3…bit0 对应低位,为压缩BCD 码方式, 

                               即每字节二进制高低各4 位分别编码表示两个0 到9 的十进制数或通配符AH, 

                               且分别对应十进制数的高低两位。当排列的最后字节中的十进制低位（即 

                               bit3…bit0）为FH 时,表示为无效,也就是说当服务器地址的十进制位数为奇 

                               数时,最后字节的bit3…bit0 用FH 表示。  

                                   通配符对应十进制按位使用,即：服务器地址的某十进制位为AH,表示该 

                               位可为0 到9 的任意值,同时,凡不大于TSA 所能表示的最大值的,且符合通 

                               配符要求的服务器地址都被选中。  

                               举例：TSA=12345678A,其排列如下：  

                                           LSB       LSB       LSB       LSB       LSB  

                                      1    2    3    4    5    6    7    8   A    F  

                                      第1 字节     第2 字节     第3 字节     第4 字节    第5 字节  

                                   表示服务器地址不大于999999999 的且符合123456780…123456789的服务 

                               器地址都被选中（不满9 位的高位按0 算）。  

      

6.3.3.20  Scaler_Unit 数据类型  

    换算及单位Scaler_Unit数据类型定义见表43  。  

                              表43  Scaler_Unit 数据类型定义  

             数据类型定义                                            说明  

Scaler_Unit∷=SEQUENCE                  换算——倍数因子的指数,基数为10；如数值不是数字的,则换算 

{                                      应被置0。  

  换算  integer,                         单位——枚举类型定义物理单位,详见附  录  B。  

  单位  ENUMERATED  

}  

      

6.3.3.21  MAC 数据类型  

    数据安全MAC的数据类型定义见表44  。  

                                  表44  MAC 数据类型定义  

             数据类型定义                                            说明  

MAC ∷= octet-string                      

      

                                                                                      40  

----------------------- Page 45-----------------------

                                                                               DL/T 698.45—201X  

6.3.3.22  SID 安全标识类型  

     安全标识SID的数据类型定义见表44  。  

                                     表45  SID 数据类型定义  

               数据类型定义                                               说明  

SID∷=SEQUENCE                              ESAM 所属安全标识。  

{  

   标识       double-long-unsigned  

   附加数据   octet-string  

}  

      

6.3.3.23  SID_MAC 标识类型  

    SID_MAC的数据类型定义见表44  。  

                                   表46  SID_MAC 数据类型定义  

               数据类型定义                                               说明  

SID_MAC ∷=SEQUENCE                         ESAM 所属安全标识以及消息鉴别码。  

{  

   安全标识   SID  

   数据MAC    MAC  

}  

      

6.3.3.24  RN 数据类型  

     随机数RN的数据类型定义见表47  。  

                                      表47  RN 数据类型定义  

               数据类型定义                                               说明  

RN∷=octet-string                           ESAM 生成用于加密的信息串。  

      

6.3.3.25  ConnectMechanismInfo 数据类型  

    应用连接请求认证的机制信息ConnectMechanismInfo的数据类型定义见表48  。  

                            表48  ConnectMechanismInfo 数据类型定义  

               数据类型定义                                               说明  

ConnectMechanismInfo ∷=CHOICE              建立应用连接的机制信息。  

{  

  公共连接     [0] NullSecurity,  

  一般密码     [1] PasswordSecurity,  

  对称加密     [2] SymmetrySecurity,  

                                                                                              41  

----------------------- Page 46-----------------------

                                                                                   DL/T 698.45—201X  

  数字签名     [3] SignatureSecurity  

}  

   NullSecurity∷=NULL                        密文1 为对客户机产生的随机数加密得到的密文。  

   PasswordSecurity∷=visible-string          密文 2 为客户机（主站）对服务器（终端）产生的主站证书等数据 

   SymmetrySecurity∷=SEQUENCE                加密信息。客户机签名2 为客户机对密文2 的签名。  

   {  

     密文1        octet-string,  

     客户机签名1  octet-string  

   }  

   SignatureSecurity∷=SEQUENCE  

   {  

     密文2        octet-string,  

     客户机签名2  octet-string  

   }  

       

6.3.3.26  ConnectResult 数据类型  

     应用连接请求认证的结果ConnectResult的数据类型定义见表49  。  

                                 表49  ConnectResult 数据类型定义  

               数据类型定义                                                   说明  

ConnectResult∷=ENUMERATED                    ConnectResult 采用枚举方式表示应用连接请求认证的结果。  

{  

  允许建立应用连接      （0）,  

  密码错误              （1）,  

  对称解密错误          （2）,  

  非对称解密错误        （3）,  

  签名错误              （4）,  

  协议版本不匹配        （5）,  

  其他错误              （255）  

}  

  

6.3.3.27  ConnectResponseInfo数据类型  

     应用连接请求的认证响应信息ConnectResponseInfo的数据类型定义见表50  。  

                              表50  ConnectResponseInfo数据类型定义  

               数据类型定义                                                   说明  

ConnectResponseInfo∷=SEQUENCE                ConnectResponseInfo 用于表示应用连接请求的认证响应信 

{                                            息。  

  认证结果      ConnectResult,  

  认证附加信息  SecurityData  OPTIONAL  

                                                                                                   42  

----------------------- Page 47-----------------------

                                                                                    DL/T 698.45—201X  

}  

   SecurityData∷=SEQUENCE                      

   {  

     服务器随机数    RN,  

     服务器签名信息  octet-string  

   }  

  

6.3.3.28  TI 数据类型  

     时间间隔TI数据类型定义见表51  。  

                                        表51  TI 数据类型定义  

              数据类型定义                                                   说明  

TI∷=SEQUENCE                              TI 用于表示时间间隔的间隔值及其时间单位；  

{                                         间隔值为0 表示无间隔。  

   单位  ENUMERATED  

    {  

       秒       （0）,  

       分       （1）,  

       时       （2）,  

        日       （3）,  

       月       （4）,  

       年       （5）  

    },  

    间隔值  long-unsigned  

}  

       

6.3.3.29  Region 区间类型  

     区间类型Region定义见表52  。  

                                      表52  Region 数据类型定义  

              数据类型定义                                                   说明  

Region∷=SEQUENCE                          Region 用于描述数据的区间范围,包括以下四种：（起始值,结束值）、 

{                                         [起始值,结束值）、（起始值,结束值]、[起始值,结束值]。  

   单位  ENUMERATED                           

    {                                       

       前闭后开     （0）,  

       前开后闭     （1）,  

       前闭后闭     （2）,  

       前开后开     （3）  

                                                                                                   43  

----------------------- Page 48-----------------------

                                                                                     DL/T 698.45—201X  

    },  

    起始值  Data,  

    结束值  Data  

}  

       

6.3.3.30  OI 数据类型  

     对象标识数据类型OI定义见表53  。  

                                        表53  OI 数据类型定义  

              数据类型定义                                                    说明  

OI∷=long-unsigned                           

       

6.3.3.31  date_time 数据类型  

     日期时间数据类型date_time定义见表54  。  

                                    表54  date_time 数据类型定义  

              数据类型定义                                                    说明  

date_time∷=SEQUENCE                        日期和时间的十六进制格式。  

{  

  year          long-unsigned,  

  month         unsigned,  

  day_of_month  unsigned,  

  day_of_week   unsigned,  

  hour          unsigned,  

  minute        unsigned,  

  second        unsigned,  

  milliseconds  long-unsigned  

}  

       

6.3.3.32  date 数据类型  

     日期数据类型date定义见表55  。  

                                       表55  date 数据类型定义  

              数据类型定义                                                    说明  

date∷=SEQUENCE                             日期的十六进制格式。  

{  

  year          long-unsigned,  

  month         unsigned,  

  day_of_month  unsigned,  

                                                                                                     44  

----------------------- Page 49-----------------------

                                                                                     DL/T 698.45—201X  

  day_of_week   unsigned  

}  

       

6.3.3.33  time 数据类型  

     时间数据类型time定义见表56  。  

                                       表56  time 数据类型定义  

              数据类型定义                                                    说明  

time∷=SEQUENCE                             时间的十六进制格式。  

{  

  hour          unsigned,  

  minute        unsigned,  

  second        unsigned  

}  

       

6.3.3.34  COMDCB 数据类型  

     串口控制块数据类型COMDCB定义见表57  。  

                                      表57  COMDCB 数据类型定义  

                         数据类型定义                                                    说明  

COMDCB∷=SEQUENCE                                                   

{  

  波特率    ENUMERATED  
  {  
      300bps （0）,   600bps （1）,     1200bps （2）,  
      2400bps （3）,  4800bps （4）,    7200bps （5）,  
      9600bps （6）,  19200bps （7）,   38400bps （8）,  
      57600bps （9）, 115200bps （10）,  自适应（255）  
  },  
  校验位  ENUMERATED  {无校验（0）,奇校验（1）,偶校验（2）},  
  数据位  ENUMERATED  {5 （5）,6 （6）,7 （7）,8 （8）},  

  停止位  ENUMERATED  {1 （1）,2 （2）},  

  流控    ENUMERATED  {无(0),硬件(1),软件(2)}  

}  

       

6.3.4  应用层协议数据单元  

6.3.4.1  预连接协议数据单元  

     预连接协议数据单元（LINK-APDU）定义见表58  。  

                                         表58  LINK-APDU 定义  

                                                                                                     45  

----------------------- Page 50-----------------------

                                                                                       DL/T 698.45—201X  

                           数据类型定义                                                     说明  

LINK-APDU ∷=CHOICE                                                    

{  

  预连接请求        [1]           LINK-Request,  

  预连接响应        [129]         LINK-Response  

}  

       

6.3.4.2  客户机应用层协议数据单元  

     客户机应用层协议数据单元（Client-APDU）定义见表59  。  

                                         表59  Client-APDU 定义  

                           数据类型定义                                                     说明  

Client-APDU ∷=SEQUENCE                                                

{  

  应用层服务  CHOICE  

   {  

    建立应用连接请求              [2]     CONNECT-Request,  

    断开应用连接请求              [3]     RELEASE-Request,  

    读取请求                  [5]     GET-Request,  

    设置请求                  [6]     SET-Request,  

    操作请求                  [7]     ACTION-Request,  

    上报应答                  [8]     REPORT-Response,  

    代理请求                  [9]     PROXY-Request  

  },  

  时间标签    TimeTag  OPTIONAL  

}  

       

6.3.4.3  服务器应用层协议数据单元  

     服务器应用层协议数据单元（Server-APDU）定义见表60  。  

                                         表60  Server-APDU 定义  

                           数据类型定义                                                     说明  

Server-APDU ∷=SEQUENCE                                                

{  

  应用层服务  CHOICE  

   {      

    建立应用连接响应             [130]    CONNECT-Response,  

    断开应用连接响应    [131]             RELEASE-Response,  

    断开应用连接通知    [132]             RELEASE-Notification,  

    读取响应            [133]         GET-Response,  

                                                                                                       46  

----------------------- Page 51-----------------------

                                                                                    DL/T 698.45—201X  

    设置响应                [134]    SET-Response,  

    操作响应                [135]    ACTION-Response,  

    上报通知                [136]    REPORT-Notification,  

    代理响应            [137]        PROXY-Response  

  },  

  跟随上报信息域   FollowReport  OPTIONAL,  

  时间标签             TimeTag       OPTIONAL  

}  

       

6.3.4.4  安全传输协议数据单元  

     安全传输协议数据单元（SECURITY-APDU）定义见表61  。  

                                      表61  Security-APDU 定义  

                          数据类型定义                                                   说明  

SECURITY-APDU ∷=CHOICE                                              

{  

    安全请求                [16]     SECURITY-Request,  

    安全响应                [144]    SECURITY-Response  

}  

       

6.3.5  预连接  

6.3.5.1  LINK-Request 数据类型  

     预连接请求的数据类型（LINK-Request）定义见表62  。  

                                  表62  LINK-Request 数据类型定义  

                     数据类型定义                                                   说明  

LINK-Request∷=SEQUENCE                                  PIID-ACD——见6.3.3.10  。  

{                                                       心跳周期——单位：秒。  

  服务序号-优先级-ACD  PIID-ACD                                DateTimeBCD_H——见6.3.3.5  。  

  请求类型  ENUMERATED  

  {  

    建立连接  （0）,  

    心跳      （1）,  

    断开连接  （2）  

  },  

  心跳周期  long-unsigned,  

  请求时间  DateTimeBCD_H  

}  

       

                                                                                                    47  

----------------------- Page 52-----------------------

                                                                            DL/T 698.45—201X  

6.3.5.2  LINK-Response 数据类型  

    预连接响应的数据类型（LINK-Response）定义见表63  。  

                              表63  LINK-Response 数据类型定义  

                   数据类型定义                                             说明  

LINK-Response∷=SEQUENCE                            PIID——见6.3.3.9  。  

{                                                  DateTimeBCD_H——见6.3.3.5  。  

  服务序号-优先级  PIID,  

  结果             Result,  

  请求时间         DataTimeBCD_H,  

  收到时间         DataTimeBCD_H,  

  响应时间         DataTimeBCD_H  

}  

   Result∷=bit-string （SIZE （8））                   时钟可信标志——用于表示响应方的时钟是否可信（准 
  
   {                                               确）,0：不可信,1：可信。  
     时钟可信标志         （0）,                           结果bit0…结果bit2——二进制编码表示：0：成功, 
     保留bit6         （1）,                           1：地址重复,2：非法设备,3：容量不足,其它值： 
     保留bit5         （2）,                           保留。  
     保留bit4         （3）,  
    保留bit3          （4）,  
     结果bit2         （5）,  
    结果bit1          （6）,  
     结果bit0         （7）  
   }  

      

6.3.6  建立应用连接  

6.3.6.1  密钥协商  

    在建立应用连接时进行密钥协商,产生会话密钥,用于计算数据验证码和链路用户数据的加密。  

6.3.6.2  CONNECT-Request 数据类型  

    建立应用连接请求的数据类型（CONNECT-Request）定义见表64  。  

                             表64  CONNECT-Request 数据类型定义  

                   数据类型定义                                             说明  

Connect-Request∷=SEQUENCE                          PIID——见6.3.3.9  。  
{                                                  ComBCD4——见6.3.3.3  。  
  服务序号-优先级           PIID,                         ProtocolConformance——定义见附  录  C。  
  期望的应用层协议版本号    ComBCD4,                          FunctionConformance——定义见附  录  C。  
  期望的协议一致性块        ProtocolConformance,            客户机发送帧最大尺寸——单位：字节。  
  期望的功能一致性块        FunctionConformance,            客户机接收帧最大尺寸——单位：字节。  
  客户机发送帧最大尺寸      long-unsigned,                   客户机接收最大尺寸帧个数——单位：个。  
  客户机接收帧最大尺寸      long-unsigned,                   期望的应用连接超时时间——单位：秒。  
  客户机接收帧最大窗口尺寸  unsigned,  

                                                                                          48  

----------------------- Page 53-----------------------

                                                                                   DL/T 698.45—201X  

  客户机最大可处理APDU 尺寸 long-unsigned,  
  期望的应用连接超时时间    double-long-unsigned,  
  认证请求对象              ConnectMechanismInfo  
}  

       

6.3.6.3  CONNECT-Response 数据类型  

     建立应用连接响应的数据类型（CONNECT-Response）定义见表65  。  

                                表65  CONNECT-Response 数据类型定义  

                      数据类型定义                                                   说明  

CONNECT-Response∷=SEQUENCE                                 PIID-ACD——见6.3.3.10  。  
{                                                          ComBCD4——见6.3.3.3  。  
  服务序号-优先级-ACD       PIID-ACD,                             ProtocolConformance——定义见附  录  C。  
  服务器厂商版本信息        FactoryVersion,                         FunctionConformance——定义见附  录  C。  
  商定的应用层协议版本号    ComBCD4,                                  服务器发送帧最大尺寸——单位：字节。  
  商定的协议一致性块        ProtocolConformance,                    服务器接收帧最大尺寸——单位：字节。  
  商定的功能一致性块        FunctionConformance,                    服务器接收最大尺寸帧个数——单位：个。  
  服务器发送帧最大尺寸      long-unsigned,                             
  服务器接收帧最大尺寸      long-unsigned,  
  服务器接收帧最大窗口尺寸  unsigned,  
  服务器最大可处理APDU 尺寸 long-unsigned,  
  商定的应用连接超时时间    double-long-unsigned,  
  连接响应对象              ConnectResponseInfo  
}  

   FactoryVersion ∷=SEQUENCE                                 
   {  
     厂商代码         visible-string(SIZE (4)),  
     软件版本号      visible-string(SIZE (4)),  
     软件版本日期   visible-string(SIZE (6)),  
     硬件版本号      visible-string(SIZE (4)),  
     硬件版本日期   visible-string(SIZE (6)),  
     厂家扩展信息   visible-string(SIZE (8))  
   }  

       

6.3.7  断开应用连接  

6.3.7.1  RELEASE-Request 数据类型  

     断开应用连接请求的数据类型（RELEASE-Request）定义见表66  。  

                                表66  RELEASE-Request 数据类型定义  

                     数据类型定义                                                  说明  

RELEASE-Request∷=SEQUENCE                               PIID——见6.3.3.9  。  
{  
  服务序号-优先级  PIID  
}  

                                                                                                   49  

----------------------- Page 54-----------------------

                                                                                   DL/T 698.45—201X  

       

6.3.7.2  RELEASE-Response 数据类型  

     断开应用连接响应的数据类型（RELEASE-Response）定义见表67  。  

                                表67  RELEASE-Response 数据类型定义  

                     数据类型定义                                                  说明  

RELEASE-Response∷=SEQUENCE                              PIID-ACD——见6.3.3.10  。  
{  
  服务序号-优先级-ACD  PIID-ACD,  
  结果  ENUMERATED  
  {  
    成功   （0）  
  }  
}  

       

6.3.7.3  RELEASE-Notification 数据类型  

     断开应用连接通知的数据类型（RELEASE-Notification）定义见表68  。  

                             表68  RELEASE-Notification 数据类型定义  

                     数据类型定义                                                  说明  

RELEASE-Notification ∷=SEQUENCE                         PIID-ACD——见6.3.3.10  。  
{                                                       DateTimeBCD——见6.3.3.4  。  
  服务序号-优先级-ACD  PIID-ACD,  
  应用连接建立时间     DateTimeBCD,  
  服务器当前时间       DateTimeBCD  
}  

       

6.3.8  读取  

6.3.8.1  GET-Request 数据类型  

     读取请求的数据类型（GET-Request）定义见表69  。  

                                  表69  GET-Request 数据类型定义  

                              数据类型定义                                                   说明  

GET-Request∷=CHOICE                                                         
{  
  读取一个对象属性请求              [1] GetRequestNormal,  
  读取若干个对象属性请求            [2] GetRequestNormalList,  
  读取一个记录型对象属性请求        [3] GetRequestRecord,  
  读取若干个记录型对象属性请求      [4] GetRequestRecordList,  
  读取分帧响应的下一个数据块请求    [5] GetRequestNext  
}  

       

                                                                                                   50  

----------------------- Page 55-----------------------

                                                                              DL/T 698.45—201X  

6.3.8.1.1  GetRequestNormal 数据类型  

    读取一个对象属性请求的数据类型定义见表70  。  

                              表70  GetRequestNormal 数据类型定义  

                    数据类型定义                                               说明  

GetRequestNormal ∷=SEQUENCE                          PIID——见6.3.3.9  。  
{                                                    OAD——见6.3.3.11  。  
  服务序号-优先级     PIID,  
  一个对象属性描述符  OAD  
}  

      

6.3.8.1.2  GetRequestNormalList 数据类型  

    读取若干个对象属性请求的数据类型定义见表71  。  

                            表71  GetRequestNormalList 数据类型定义  

                    数据类型定义                                               说明  

GetRequestNormalList∷=SEQUENCE                       PIID——见6.3.3.9  。  
{                                                    OAD——见6.3.3.11  。  
  服务序号-优先级       PIID,  
  若干个对象属性描述符  SEQUENCE OF OAD  
}  

      

6.3.8.1.3  GetRequestRecord 数据类型  

    读取一个记录型对象属性请求的数据类型定义见表72  。  

                              表72  GetRequestRecord 数据类型定义  

                    数据类型定义                                               说明  

GetRequestRecord ∷=SEQUENCE                          PIID——见6.3.3.9  。  
{  
  服务序号-优先级         PIID,  
  读取一个记录型对象属性  GetRecord  
}  

   GetRecord∷=SEQUENCE                               OAD——见6.3.3.11  。  
   {                                                 RSD——见6.3.3.13  。  
     对象属性描述符     OAD,                                RCSD——见6.3.3.14  。  
     记录选择描述符     RSD,  
     记录列选择描述符   RCSD  
   }  

      

6.3.8.1.4  GetRequestRecordList 数据类型  

    读取若干个记录型对象属性请求的数据类型定义见表73  。  

                                                                                             51  

----------------------- Page 56-----------------------

                                                                                 DL/T 698.45—201X  

                            表73  GetRequestRecordList 数据类型定义  

                    数据类型定义                                                 说明  

GetRequestRecordList ∷=SEQUENCE                       PIID——见6.3.3.9  。  
{                                                     GetRecord——见表72  。  
  服务序号-优先级           PIID,  
  读取若干个记录型对象属性  SEQUENCE OF GetRecord  
}  

      

6.3.8.1.5  GetRequestNext 数据类型  

     读取分帧响应的下一个数据块请求的数据类型定义见表74  。  

                                表74  GetRequestNext 数据类型定义  

                    数据类型定义                                                 说明  

GetRequestNext∷=SEQUENCE                              PIID——见6.3.3.9  。  
{  
  服务序号-优先级                PIID,  
  正确接收的最近一次数据块序号   long-unsigned  
}  

      

6.3.8.2  GET-Response 数据类型  

     读取响应的数据类型（GET-Response）定义见表75  。  

                                 表75  GET-Response 数据类型定义  

                                数据类型定义                                                 说明  

GET-Response∷=CHOICE                                                            
{  
  读取一个对象属性的响应                       [1]  GetResponseNormal,  
  读取若干个对象属性的响应                      [2]  GetResponseNormalList,  
  读取一个记录型对象属性的响应                    [3]  GetResponseRecord,  
  读取若干个记录型对象属性的响应                   [4]  GetResponseRecordList,  
  分帧响应一个数据块                  [5]  GetResponseNext  
}  

      

6.3.8.2.1  GetResponseNormal 数据类型  

     读取一个对象属性的响应的数据类型定义见表76  。  

                              表76  GetResponseNormal 数据类型定义  

                    数据类型定义                                                 说明  

GetResponseNormal ∷=SEQUENCE                          PIID-ACD——见6.3.3.10  。  
{  
  服务序号-优先级-ACD   PIID-ACD,  
  一个对象属性及其结果  A-ResultNormal  

                                                                                                52  

----------------------- Page 57-----------------------

                                                                                       DL/T 698.45—201X  

}  

   A-ResultNormal∷=SEQUENCE                                OAD——见6.3.3.11  。  
   {                                                      Data——见6.3.3.1  。  
     对象属性描述符  OAD,  
     及其结果        Get-Result  
   }  

      Get-Result∷=CHOICE                                  DAR——见6.3.3.17  。  
      {  
        错误信息   [0]   DAR,  
        数据       [1]   Data  
      }  

       

6.3.8.2.2  GetResponseNormalList 数据类型  

     读取若干个对象属性的响应的数据类型定义见表77  。  

                              表77  GetResponseNormalList 数据类型定义  

                      数据类型定义                                                     说明  

GetResponseNormalList ∷=SEQUENCE                          PIID-ACD——见6.3.3.10  。  
{                                                         A-ResultNormal——见表76  。  
  服务序号-优先级-ACD     PIID-ACD,  
  若干个对象属性及其结果  SEQUENCE OF A-ResultNormal  
}  

       

6.3.8.2.3  GetResponseRecord 数据类型  

     读取一个记录型对象属性的响应的数据类型定义见表78  。  

                                 表78  GetResponseRecord 数据类型定义  

                      数据类型定义                                                     说明  

GetResponseRecord∷=SEQUENCE                               PIID-ACD——见6.3.3.10  。  
{  
  服务序号-优先级-ACD         PIID-ACD,  
  一个记录型对象属性及其结果  A-ResultRecord  
}  

   A-ResultRecord∷=CHOICE                                 OAD——见6.3.3.11  。  
  
   {                                                       一行记录N 列属性描述符——即记录表的表头信息。  
     错误信息        [0] DAR,  
     记录数据        [1] A-RecordData  
   }  
   A-RecordData∷=SEQUENCE  
   {  
     记录型对象属性描述符      OAD,  
     一行记录N 列属性描述符               RCSD,  
     M 条记录                   SEQUENCE OF A-RecordRow  
   }  

      A-RecordRow∷=SEQUENCE                               第1 列…第N 列——其排列顺序与“一行记录N 列属性 
  

                                                                                                        53  

----------------------- Page 58-----------------------

                                                                                   DL/T 698.45—201X  

      {                                                 描述符”的排列顺序一致。  
       第1 列数据   Data,                                   Data——见6.3.3.1  。  
       第2 列数据   Data,  
       …  
       第N 列数据   Data  
     }  

  

6.3.8.2.4  GetResponseRecordList 数据类型  

     读取若干个记录型对象属性的响应的数据类型定义见表79  。  

                             表79  GetResponseRecordList 数据类型定义  

                             数据类型定义                                                  说明  

GetResponseRecordList∷=SEQUENCE                                        PIID-ACD——见6.3.3.10  。  
{                                                                      OAD——见6.3.3.11  。  
  服务序号-优先级-ACD           PIID-ACD,                                     A-ResultRecord——见表78  。  
  若干个记录型对象属性及其结果  SEQUENCE OF A-ResultRecord  
}  

       

6.3.8.2.5  GetResponseNext 数据类型  

     分帧响应一个数据块的数据类型定义见表80  。  

                                表80  GetResponseNext 数据类型定义  

                             数据类型定义                                                  说明  

GetResponseNext∷=SEQUENCE                                              PIID-ACD——见6.3.3.10  。  
{                                                                      DAR——见6.3.3.17  。  
  服务序号-优先级-ACD   PIID-ACD,                                             A-ResultNormal——见表78  。  
  末帧标志             BOOLEAN,                                            A-ResultRecord——见表78  。  
  分帧序号              long-unsigned,                                       
  分帧响应              CHOICE                                               
  {  
    错误信息            [0]   DAR,  
    对象属性            [1]   SEQUENCE OF A-ResultNormal,  
    记录型对象属性      [2]   SEQUENCE OF A-ResultRecord,    
  }  
}  

       

6.3.9  设置  

6.3.9.1  SET-Request 数据类型  

     设置请求的数据类型（SET-Request）定义见表81  。  

                                  表81  SET-Request 数据类型定义  

                             数据类型定义                                                  说明  

                                                                                                   54  

----------------------- Page 59-----------------------

                                                                                 DL/T 698.45—201X  

SET-Request∷=CHOICE                                                    
{  
  设置一个对象属性请求                    [1] SetRequestNormal,  
  设置若干个对象属性请求                   [2] SetRequestNormalList,  
  设置后读取若干个对象属性请求                [3] SetThenGetRequestNormalList  
}  

      

6.3.9.1.1  SetRequestNormal 数据类型  

     设置一个对象属性请求的数据类型定义见表82  。  

                               表82  SetRequestNormal 数据类型定义  

                            数据类型定义                                                 说明  

SetRequestNormal∷=SEQUENCE                                           PIID——见6.3.3.9  。  
{                                                                    OAD——见6.3.3.11  。  
  服务序号-优先级      PIID,                                                Data——见6.3.3.1  。  
  一个对象属性描述符   OAD,  
  数据                 Data  
}  

      

6.3.9.1.2  SetRequestNormalList 数据类型  

     设置若干个对象属性请求的数据类型定义见表83  。  

                            表83  SetRequestNormalList 数据类型定义  

                            数据类型定义                                                 说明  

SetRequestNormalList∷=SEQUENCE                                       PIID——见6.3.3.9  。  
{                                                                    OAD——见6.3.3.11  。  
  服务序号-优先级  PIID,                                                    Data——见6.3.3.1  。  
  若干个对象属性   SEQUENCE OF  
   {  
    一个对象属性描述符  OAD,  
    数据                Data  
  }  
}  

      

6.3.9.1.3  SetThenGetRequestNormalList 数据类型  

     设置后读取若干个对象属性请求的数据类型定义见表84  。  

                         表84  SetThenGetRequestNormalList 数据类型定义  

                            数据类型定义                                                 说明  

SetThenGetRequestNormalList∷=SEQUENCE                                PIID——见6.3.3.9  。  
{                                                                    OAD——见6.3.3.11  。  
  服务序号-优先级  PIID,                                                    Data——见6.3.3.1  。  
  若干个设置后读取对象属性  SEQUENCE OF                                          延时读取时间——单位：秒,0 表示 

                                                                                                55  

----------------------- Page 60-----------------------

                                                                               DL/T 698.45—201X  

   {                                                                采用服务器默认的延时时间。  
    一个设置的对象属性   OAD,  
    数据                 Data,  
    一个读取的对象属性   OAD,  
    延时读取时间         unsigned  
  }  
}  

      

6.3.9.2  SET-Response 数据类型  

     设置响应的数据类型（SET-Response）定义见表85  。  

                                表85  SET-Response 数据类型定义  

                             数据类型定义                                                说明  

SET-Response∷=CHOICE                                                      
{  
  设置一个对象属性的确认信息响应      [1] SetResponseNormal,  
  设置若干个对象属性的确认信息响应    [2] SetResponseNormalList,  
  设置的确认信息以及读取的响应         [3] SetThenGetResponseNormalList  
}  

      

6.3.9.2.1  SetResponseNormal 数据类型  

     设置一个对象属性的确认信息响应的数据类型定义见表86  。  

                              表86  SetResponseNormal 数据类型定义  

                           数据类型定义                                                说明  

SetResponseNormal∷=SEQUENCE                                         PIID-ACD——见6.3.3.10  。  
{                                                                   OAD——见6.3.3.11  。  
  服务序号-优先级-ACD   PIID-ACD,                                          DAR——见6.3.3.17  。  
  一个对象属性描述符    OAD,  
  设置执行结果          DAR  
}  

      

6.3.9.2.2  SetResponseNormalList 数据类型  

     设置若干个对象属性的确认信息响应的数据类型定义见表87  。  

                           表87  SetResponseNormalList 数据类型定义  

                           数据类型定义                                                说明  

SetResponseNormalList∷=SEQUENCE                                     PIID-ACD——见6.3.3.10  。  
{                                                                   OAD——见6.3.3.11  。  
  服务序号-优先级-ACD     PIID-ACD,                                        DAR——见6.3.3.17  。  
  若干个对象属性设置结果  SEQUENCE OF  
   {  
     一个对象属性描述符   OAD,  

                                                                                              56  

----------------------- Page 61-----------------------

                                                                                  DL/T 698.45—201X  

     设置执行结果         DAR  
  }  
}  

       

6.3.9.2.3  SetThenGetResponseNormalList 数据类型  

     设置若干个对象属性的确认信息以及读取若干个对象属性的响应的数据类型定义见表88  。  

                        表88  SetThenGetResponseNormalList 数据类型定义  

                            数据类型定义                                                  说明  

SetThenGetResponseNormalList∷=SEQUENCE                                 PIID-ACD——见6.3.3.10  。  
{                                                                      OAD——见6.3.3.11  。  
  服务序号-优先级-ACD   PIID-ACD,                                             DAR——见6.3.3.17  。  
  若干个对象属性设置后读取结果  SEQUENCE OF                                          Get-Result——见表76  。  
   {  
     一个设置的对象属性描述符   OAD,  
     设置执行结果               DAR,  
     一个读取的对象属性描述符   OAD,  
     读取响应数据               Get-Result  
  }  
}  

       

6.3.10  操作  

6.3.10.1  ACTION-Request 数据类型  

6.3.10.1.1  ACTION-Request 数据类型定义  

     操作请求的数据类型（ACTION-Request）定义见表89  。  

                                表89  ACTION-Request 数据类型定义  

                                  数据类型定义                                                  说明  

ACTION-Request∷=CHOICE                                                              
{  
  操作一个对象方法请求                                   [1] ActionRequest,  
  操作若干个对象方法请求                         [2] ActionRequestList,  
  操作若干个对象方法后读取若干个对象属性请求    [3] ActionThenGetRequestNormalList  
}  

       

6.3.10.1.2  ActionRequest 数据类型  

     操作一个对象方法请求的数据类型定义见表90  。  

                                 表90  ActionRequest 数据类型定义  

                            数据类型定义                                                  说明  

ActionRequest ∷=SEQUENCE                                               PIID——见6.3.3.9  。  

                                                                                                  57  

----------------------- Page 62-----------------------

                                                                               DL/T 698.45—201X  

{                                                                   OMD——见6.3.3.18  。  
  服务序号-优先级      PIID,                                               Data——见6.3.3.1  。  
  一个对象方法描述符   OMD,  
  方法参数             Data  
}  

      

6.3.10.1.3  ActionRequestList 数据类型  

    操作若干个对象方法请求的数据类型定义见表91  。  

                              表91  ActionRequestList 数据类型定义  

                           数据类型定义                                                说明  

ActionRequestList ∷=SEQUENCE                                        PIID——见6.3.3.9  。  
{                                                                   OMD——见6.3.3.18  。  
  服务序号-优先级  PIID,                                                   Data——见6.3.3.1  。  
  若干个对象属性   SEQUENCE OF  
   {  
    一个对象方法描述符  OMD,  
    方法参数            Data  
  }  
}  

      

6.3.10.1.4  ActionThenGetRequestNormalList 数据类型  

    操作若干个对象方法后读取若干个对象属性请求的数据类型定义见表92  。  

                      表92  ActionThenGetRequestNormalList 数据类型定义  

                           数据类型定义                                                说明  

ActionThenGetRequestNormalList ∷=SEQUENCE                           PIID——见6.3.3.9  。  
{                                                                   OAD——见6.3.3.11  。  
  服务序号-优先级  PIID,                                                   OMD——见6.3.3.18  。  
  若干个操作对象方法后读取对象属性  SEQUENCE OF                                     Data——见6.3.3.1  。  
   {                                                                读取延时——单位：秒,0 表示取服 
    一个设置的对象方法描述符   OMD,                                             务器默认的延时时间。  
    方法参数                   Data,  
    一个读取的对象属性描述符   OAD,  
    读取延时                   unsigned  
  }  
}  

      

6.3.10.2  ACTION-Response 数据类型  

6.3.10.2.1  ACTION-Response 数据类型定义  

    操作响应的数据类型（ACTION-Response）定义见表93  。  

                               表93  ACTION-Response 数据类型定义  

                                                                                              58  

----------------------- Page 63-----------------------

                                                                                 DL/T 698.45—201X  

                                   数据类型定义                                                说明  

ACTION-Response∷=CHOICE                                                              
{  
  操作一个对象方法的响应                    [1] ActionResponseNormal,  
  操作若干个对象方法的响应                   [2] ActionResponseNormalList,  
  操作若干个对象方法后读取若干个属性的响应   [3] ActionThenGetResponseNormalList  
}  

      

6.3.10.2.2  ActionResponseNormal 数据类型  

     操作一个对象方法的响应的数据类型定义见表94  。  

                            表94  ActionResponseNorma l数据类型定义  

                            数据类型定义                                                 说明  

ActionResponseNormal ∷=SEQUENCE                                      PIID-ACD——见6.3.3.10  。  
{                                                                    OMD——见6.3.3.18  。  
  服务序号-优先级-ACD   PIID-ACD,                                           DAR——见6.3.3.17  。  
  一个对象方法描述符    OMD,                                                  Data——见6.3.3.1  。  
  操作执行结果          DAR,  
  操作返回数据          Data  OPTIONAL  
}  

      

6.3.10.2.3  ActionResponseNormalList 数据类型  

     操作若干个对象方法的响应的数据类型定义见表95  。  

                          表95  ActionResponseNormalList 数据类型定义  

                            数据类型定义                                                 说明  

ActionResponseNormalList ∷=SEQUENCE                                  PIID-ACD——见6.3.3.10  。  
{                                                                    OMD——见6.3.3.18  。  
  服务序号-优先级-ACD     PIID-ACD,                                         DAR——见6.3.3.17  。  
  若干个对象方法操作结果  SEQUENCE OF                                           Data——见6.3.3.1  。  
   {  
     一个对象方法描述符   OMD,  
     操作执行结果         DAR,  
     操作返回数据         Data  OPTIONAL  
  }  
}  

      

6.3.10.2.4  ActionThenGetResponseNormalList 数据类型  

     操作若干个对象方法后读取若干个属性的响应的数据类型定义见表96  。  

                      表96  ActionThenGetResponseNormalList 数据类型定义  

                            数据类型定义                                                 说明  

ActionThenGetResponseNormalList ∷=SEQUENCE                           PIID-ACD——见6.3.3.10  。  

                                                                                                59  

----------------------- Page 64-----------------------

                                                                                 DL/T 698.45—201X  

{                                                                    OMD——见6.3.3.18  。  
  服务序号-优先级-ACD   PIID-ACD,                                           DAR——见6.3.3.17  。  
  操作若干个对象方法后读取属性的结果  SEQUENCE OF                                     OAD——见6.3.3.11  。  
   {                                                                 Data——见6.3.3.1  。  
     一个设置的对象方法描述符   OMD,                                             Get-Result——见表76  。  
     操作执行结果               DAR,  
     操作返回数据               Data OPTIONAL,  
     一个读取的对象属性描述符   OAD,  
     读取响应数据               Get-Result  
  }  
}  

      

6.3.11  上报  

6.3.11.1  REPORT-Notification 数据类型  

6.3.11.1.1  REPORT-Notification 数据类型定义  

     上报通知的数据类型（REPORT-Notification）定义见表97  。  

                             表97  REPORT-Notification 数据类型定义  

                            数据类型定义                                                 说明  

REPORT-Notification ∷=CHOICE                                           
{  
  上报若干个对象属性          [1] ReportNotificationList,  
  上报若干个记录型对象属性    [2] ReportNotificationRecordList  
}  

      

6.3.11.1.2  ReportNotificationList 数据类型  

     上报若干个对象属性ReportNotificationList的数据类型定义见表98  。  

                           表98  ReportNotificationList 数据类型定义  

                            数据类型定义                                                 说明  

ReportNotificationList∷=SEQUENCE                                     PIID-ACD——见6.3.3.10  。  
{                                                                    A-ResultNormal——见表76  。  
  服务序号-优先级-ACD     PIID-ACD,  
  若干个对象属性及其数据  SEQUENCE OF A-ResultNormal  
}  

      

6.3.11.1.3  ReportNotificationRecordList 数据类型  

     上报若干个记录型对象属性通知的数据类型定义见表99  。  

                        表99  ReportNotificationRecordList 数据类型定义  

                            数据类型定义                                                 说明  

                                                                                                60  

----------------------- Page 65-----------------------

                                                                              DL/T 698.45—201X  

ReportNotificationRecordList∷=SEQUENCE                            PIID-ACD——见6.3.3.10  。  
{                                                                 A-ResultRecord——见表78  。  
  服务序号-优先级-ACD           PIID-ACD,  
  若干个记录型对象属性及其数据  SEQUENCE OF A-ResultRecord  
}  

      

6.3.11.2  REPORT-Response 数据类型  

6.3.11.2.1  REPORT-Response 数据类型定义  

    上报响应的数据类型（REPORT-Response）定义见表100  。  

                             表100  REPORT-Response 数据类型定义  

                           数据类型定义                                              说明  

REPORT-Response∷=CHOICE                                              
{  
  上报若干个对象属性的响应         [1] ReportResponseList,  
  上报若干个记录型对象属性的响应   [2] ReportResponseRecordList  
}  

      

6.3.11.2.2  ReportResponseList 数据类型  

    上报若干个对象属性的响应的数据类型定义见表101  。  

                            表101  ReportResponseList 数据类型定义  

                     数据类型定义                                               说明  

ReportResponseList∷=SEQUENCE                           对应上报的若干个对象属性描述符--为接收到的记 
{                                                      录型对象属性数值的对象属性描述符,用于向服务 
  服务序号-优先级                 PIID,                       器表明接收确认。  
  对应上报的若干个对象属性描述符  SEQUENCE OF OAD                     PIID-ACD——见6.3.3.10  。  
}                                                      OAD——见6.3.3.11  。  

      

6.3.11.2.3  ReportResponseRecordList 数据类型  

    上报若干个记录型对象属性的响应的数据类型定义见表102  。  

                         表102  ReportResponseRecordList 数据类型定义  

                     数据类型定义                                               说明  

ReportResponseRecordList ∷=SEQUENCE                    对应上报的若干个对象属性描述符——为接收到的 
{                                                      记录型对象属性数值的对象属性描述符,用于向服 
  服务序号-优先级                 PIID,                       务器表明接收确认。  
  对应上报的若干个对象属性描述符  SEQUENCE OF OAD                     PIID——见6.3.3.9  。  
}                                                      OAD——见6.3.3.11  。  

      

6.3.12  代理  

                                                                                            61  

----------------------- Page 66-----------------------

                                                                              DL/T 698.45—201X  

6.3.12.1  PROXY-Request 数据类型  

    代理请求的数据类型（PROXY-Request）定义见表103  。  

                               表103  PROXY-Request 数据类型定义  

                                   数据类型定义                                               说明  

PROXY-Request∷=CHOICE  
                                                                                      
{  
  代理读取若干个服务器的若干个对象属性请求              [1] ProxyGetRequestList,  
  代理读取一个服务器的一个记录型对象属性请求            [2] ProxyGetRequestRecord,  
  代理设置若干个服务器的若干个对象属性请求              [3] ProxySetRequestList,  
  代理设置后读取若干个服务器的若干个对象属性请求        [4] ProxySetThenGetRequestList,  
  代理操作若干个服务器的若干个对象方法请求              [5] ProxyActionRequestList,  
  代理操作后读取若干个服务器的若干个对象方法和属性请求  [6] ProxyActionThenGetRequestList,  
  代理透明转发命令请求                                  [7] ProxyTransCommandRequest  
}  

      

6.3.12.1.1  ProxyGetRequestList 数据类型  

    代理读取若干个服务器的若干个对象属性请求的数据类型定义见表104  。  

                           表104  ProxyGetRequestList 数据类型定义  

                   数据类型定义                                               说明  

ProxyGetRequestList ∷=SEQUENCE                      PIID——见6.3.3.9  。  
{                                                   TSA——见6.3.3.19  。  
  服务序号-优先级          PIID,                           OAD——见6.3.3.11  。  
  整个代理请求的超时时间   long-unsigned,                      代理一个服务器的超时时间——单位：秒,0 表示对于 
  代理若干个服务器的对象属性读取  SEQUENCE OF                      某个服务器的代理超时时间由服务器自行控制。  
   {                                                整个代理请求的超时时间——单位：秒,一般不能为0。  
    一个目标服务器地址         TSA,  
    代理一个服务器的超时时间   long-unsigned,  
    若干个对象属性描述符       SEQUENCE OF OAD  
  }  
}  

      

6.3.12.1.2  ProxyGetRequestRecord 数据类型  

    代理读取一个服务器的一个记录型对象属性请求的数据类型定义见表105  。  

                          表105  ProxyGetRequestRecord 数据类型定义  

                   数据类型定义                                               说明  

ProxyGetRequestRecord ∷=SEQUENCE                    PIID——见6.3.3.9  。  
{                                                   TSA——见6.3.3.19  。  
  服务序号-优先级     PIID,                                OAD——见6.3.3.11  。  
  代理请求的超时时间  long-unsigned,                         RSD——见6.3.3.13  。  
   目标服务器地址      TSA,                                RCSD——见6.3.3.14  。  
  对象属性描述符      OAD,                                 整个代理请求的超时时间——单位：秒,一般不能为0。  

                                                                                            62  

----------------------- Page 67-----------------------

                                                                              DL/T 698.45—201X  

  记录选择描述符      RSD,  
  记录列选择描述符    RCSD  
}  

      

6.3.12.1.3  ProxySetRequestList 数据类型  

    代理设置若干个服务器的若干个对象属性请求的数据类型定义见表106  。  

                            表106  ProxySetRequestList 数据类型定义  

                    数据类型定义                                               说明  

ProxySetRequestList∷=SEQUENCE                        PIID——见6.3.3.9  。  
{                                                    TSA——见6.3.3.19  。  
  服务序号-优先级         PIID,                             OAD——见6.3.3.11  。  
  整个代理请求的超时时间  long-unsigned,                        Data——见6.3.3.1  。  
  代理若干个服务器的对象属性设置  SEQUENCE OF                       代理一个服务器的超时时间——单位：秒,0 表示对于 
   {                                                 某个服务器的代理超时时间由服务器自行控制。  
    一个目标服务器地址        TSA,                            整个代理请求的超时时间——单位：秒,一般不能为0。  
    代理一个服务器的超时时间  long-unsigned,  
    若干个对象属性描述符及其数据  SEQUENCE OF  
    {  
      对象属性描述符  OAD,  
      及其数据        Data  
    }  
  }  
}  

      

6.3.12.1.4  ProxySetThenGetRequestList 数据类型  

    代理设置后读取若干个服务器的若干个对象属性请求的数据类型定义见表107  。  

                        表107  ProxySetThenGetRequestList 数据类型定义  

                    数据类型定义                                               说明  

ProxySetThenGetRequestList∷=SEQUENCE                 PIID——见6.3.3.9  。  
{                                                    TSA——见6.3.3.19  。  
  服务序号-优先级          PIID,                            OAD——见6.3.3.11  。  
  整个代理请求的超时时间   long-unsigned,                       Data——见6.3.3.1  。  
  代理若干个服务器的对象属性设置后读取  SEQUENCE OF                    延时读取时间——单位：秒,0 表示采用服务器默认的 
   {                                                 延时时间。  
    一个目标服务器地址          TSA,                          代理一个服务器的超时时间——单位：秒,0 表示对于 
    代理一个服务器的超时时间    long-unsigned,                   某个服务器的代理超时时间由服务器自行控制。  
    若干个对象属性的设置后读取  SEQUENCE OF                       整个代理请求的超时时间——单位：秒,一般不能为0。  
    {  
      设置的对象属性描述符   OAD,  
      及其设置数值           Data,  
      读取的对象属性描述符   OAD,  
      及其延时读取时间       unsigned  
    }  

                                                                                             63  

----------------------- Page 68-----------------------

                                                                              DL/T 698.45—201X  

  }  
}  

      

6.3.12.1.5  ProxyActionRequestList 数据类型  

    代理操作若干个服务器的若干个对象方法请求的数据类型定义见表108  。  

                          表108  ProxyActionRequestList 数据类型定义  

                    数据类型定义                                               说明  

ProxyActionRequestList∷=SEQUENCE                     PIID——见6.3.3.9  。  
{                                                    TSA——见6.3.3.19  。  
  服务序号-优先级         PIID,                             OMD——见6.3.3.18  。  
  整个代理请求的超时时间  long-unsigned,                        Data——见6.3.3.1  。  
  代理若干个服务器的对象方法操作  SEQUENCE OF                       代理一个服务器的超时时间——单位：秒,0 表示对于 
   {                                                 某个服务器的代理超时时间由服务器自行控制。  
    一个目标服务器地址            TSA,                        整个代理请求的超时时间——单位：秒,一般不能为0。  
    代理一个服务器的超时时间      long-unsigned,  
    若干个对象方法描述符及其参数  SEQUENCE OF  
    {  
      对象方法描述符  OMD,  
      及其方法参数    Data  
    }  
  }  
}  

      

6.3.12.1.6  ProxyActionThenGetRequestList 数据类型  

    代理操作后读取若干个服务器的若干个对象方法和属性请求的数据类型定义见表109  。  

                      表109  ProxyActionThenGetRequestList 数据类型定义  

                    数据类型定义                                               说明  

ProxyActionThenGetRequestList ∷=SEQUENCE             PIID——见6.3.3.9  。  
{                                                    TSA——见6.3.3.19  。  
  服务序号-优先级               PIID,                       OMD——见6.3.3.18  。  
  整个代理请求的超时时间        long-unsigned,                  Data——见6.3.3.1  。  
  代理若干个服务器的操作后读取  SEQUENCE OF                        OAD——见6.3.3.11  。  
   {                                                 延时读取时间——单位：秒,0 表示采用服务器默认的 
    一个目标服务器地址          TSA,                          延时时间。  
    代理一个服务器的超时时间    long-unsigned,                   代理一个服务器的超时时间——单位：秒,0 表示对于 
    若干个对象方法及属性的操作后读取  SEQUENCE OF                    某个服务器的代理超时时间由服务器自行控制。  
    {                                                整个代理请求的超时时间——单位：秒,一般不能为0。  
      操作的对象方法描述符   OMD,  
      及其方法参数           Data,  
      读取的对象属性描述符   OAD,  
      及其延时读取时间       unsigned  
    }  
  }  

                                                                                             64  

----------------------- Page 69-----------------------

                                                                                 DL/T 698.45—201X  

}  

      

6.3.12.1.7  ProxyTransCommandRequest 数据类型  

     代理操作透明转发请求命令的数据类型定义见表110  。  

                          表110  ProxyTransCommandRequest 数据类型定义  

                    数据类型定义                                                 说明  

ProxyTransCommandRequest∷=SEQUENCE                    PIID——见6.3.3.9  。  
{                                                     OAD——见6.3.3.11  。  
  服务序号-优先级               PIID,                        COMDCB——见6.3.3.34  。  
  数据转发端口                  OAD,                          
  端口通信控制块                COMDCB,  
  接收等待报文超时时间（秒）   long-unsigned,  
  接收等待字节超时时间（毫秒） long-unsigned,  
  透明转发命令                 octet-string  
}  

      

6.3.12.2  PROXY-Response 数据类型  

     代理响应的数据类型（PROXY-Response）定义见表111  。  

                               表111  PROXY-Response 数据类型定义  

                                      数据类型定义                                                 说明  

PROXY-Response∷=CHOICE  
                                                                                            
{  
  代理读取若干个服务器的若干个对象属性响应              [1] ProxyGetResponseList,  
  代理读取一个服务器的一个记录型对象属性响应            [2] ProxyGetResponseRecord,  
  代理设置若干个服务器的若干个对象属性响应              [3] ProxySetResponseList,  
  代理设置后读取若干个服务器的若干个对象属性响应        [4] ProxySetThenGetResponseList,  
  代理操作若干个服务器的若干个对象方法响应              [5] ProxyActionResponseList,  
  代理操作后读取若干个服务器的若干个对象方法和属性响应  [6] ProxyActionThenGetResponseList,  
  代理透明转发命令响应                                  [7] ProxyTransCommandResponse  
}  

      

6.3.12.2.1  ProxyGetResponseList 数据类型  

     代理读取若干个服务器的若干个对象属性响应的数据类型定义见表112  。  

                            表112  ProxyGetResponseList 数据类型定义  

                    数据类型定义                                                 说明  

ProxyGetResponseList ∷=SEQUENCE                       PIID-ACD——见6.3.3.10  。  
{                                                     TSA——见6.3.3.19  。  
  服务序号-优先级-ACD   PIID-ACD,                            OAD——见6.3.3.11  。  
  代理若干个服务器的读取结果  SEQUENCE OF                          Get-Result——见表76  。  
   {  

                                                                                                65  

----------------------- Page 70-----------------------

                                                                                   DL/T 698.45—201X  

    一个目标服务器地址  TSA,  
    若干个对象属性描述符及其结果  SEQUENCE OF  
    {  
      对象属性描述符  OAD,  
      及其读取结果    Get-Result  
    }  
  }  
}  

       

6.3.12.2.2  ProxyGeResponseRecord 数据类型  

     代理读取一个服务器的一个记录型对象属性响应的数据类型定义见表113  。  

                            表113  ProxyGeResponseRecord 数据类型定义  

                     数据类型定义                                                  说明  

ProxyGeResponseRecord ∷=SEQUENCE                        PIID-ACD——见6.3.3.10  。  
{                                                       TSA——见6.3.3.19  。  
  服务序号-优先级-ACD          PIID-ACD,                       A-ResultRecord——见表78  。  
   目标服务器地址               TSA,  
  一个记录型对象属性及其结果   A-ResultRecord  
}  

       

6.3.12.2.3  ProxySetResponseList 数据类型  

     代理设置若干个服务器的若干个对象属性响应的数据类型定义见表114  。  

                             表114  ProxySetResponseList 数据类型定义  

                     数据类型定义                                                  说明  

ProxySetResponseList ∷=SEQUENCE                         PIID-ACD——见6.3.3.10  。  
{                                                       TSA——见6.3.3.19  。  
  服务序号-优先级-ACD   PIID-ACD,                              OAD——见6.3.3.11  。  
  代理若干个服务器的读取结果  SEQUENCE OF                            DAR——见6.3.3.17  。  
   {  
    一个目标服务器地址  TSA,  
    若干个对象属性描述符及其结果  SEQUENCE OF  
    {  
      对象属性描述符  OAD,  
      及其设置结果    DAR  
    }  
  }  
}  

       

6.3.12.2.4  ProxySetThenGetResponseList 数据类型  

     代理设置后读取若干个服务器的若干个对象属性响应的数据类型定义见表115  。  

                         表115  ProxySetThenGetResponseList 数据类型定义  

                                                                                                   66  

----------------------- Page 71-----------------------

                                                                                 DL/T 698.45—201X  

                    数据类型定义                                                 说明  

ProxySetThenGetResponseList∷=SEQUENCE                 PIID-ACD——见6.3.3.10  。  
{                                                     TSA——见6.3.3.19  。  
  服务序号-优先级-ACD   PIID-ACD,                            OAD——见6.3.3.11  。  
  代理若干个服务器的设置后读取结果  SEQUENCE OF                       DAR——见6.3.3.17  。  
   {                                                  Get-Result——见表76  。  
    一个目标服务器地址  TSA,  
    若干个对象属性设置后读取结果  SEQUENCE OF  
    {  
      设置的对象属性描述符  OAD,  
      及其设置结果          DAR,  
      读取的对象属性描述符  OAD,  
      及其读取结果          Get-Result  
    }  
  }  
}  

      

6.3.12.2.5  ProxyActionResponseList 数据类型  

     代理操作若干个服务器的若干个对象方法响应的数据类型定义见表116  。  

                          表116  ProxyActionResponseList 数据类型定义  

                    数据类型定义                                                 说明  

ProxyActionResponseList ∷=SEQUENCE                    PIID-ACD——见6.3.3.10  。  
{                                                     TSA——见6.3.3.19  。  
  服务序号-优先级-ACD   PIID-ACD,                            OMD——见6.3.3.18  。  
  代理若干个服务器的操作结果  SEQUENCE OF                          DAR——见6.3.3.17  。  
   {                                                  Data——见6.3.3.1  。  
    一个目标服务器地址  TSA,  
    若干个对象方法描述符及其结果  SEQUENCE OF  
    {  
      对象方法描述符   OMD,  
      及其操作结果     DAR,  
      操作返回数据     Data OPTIONAL  
    }  
  }  
}  

      

6.3.12.2.6  ProxyActionThenGetResponseList 数据类型  

     代理操作后读取若干个服务器的若干个对象方法和属性响应的数据类型定义见表117  。  

                      表117  ProxyActionThenGetResponseList 数据类型定义  

                    数据类型定义                                                 说明  

ProxyActionThenGetResponseList ∷=SEQUENCE             PIID-ACD——见6.3.3.10  。  
{                                                     TSA——见6.3.3.19  。  
  服务序号-优先级-ACD   PIID-ACD,                            OMD——见6.3.3.18  。  

                                                                                                67  

----------------------- Page 72-----------------------

                                                                                   DL/T 698.45—201X  

  代理若干个服务器的操作后读取结果  SEQUENCE OF                         DAR——见6.3.3.17  。  
   {                                                    OAD——见6.3.3.11  。  
    一个目标服务器地址  TSA,                                     Data——见6.3.3.1  。  
    若干个对象方法和属性操作后读取结果  SEQUENCE OF                      Get-Result——见表76  。  
    {  
      操作的对象方法描述符  OMD,  
      及其操作结果          DAR,  
      操作返回数据          Data OPTIONAL,  
      读取的对象属性描述符  OAD,  
      及其读取结果          Get-Result  
    }  
  }  
}  

       

6.3.12.2.7  ProxyTransCommandResponse 数据类型  

     代理操作透明转发命令响应的数据类型定义见表118  。  

                          表118  ProxyTransCommandResponse 数据类型定义  

                     数据类型定义                                                  说明  

ProxyTransCommandResponse∷=SEQUENCE                     PIID-ACD——见6.3.3.10  。  
{                                                       OAD——见6.3.3.11  。  
  服务序号-优先级-ACD      PIID-ACD,    
  数据转发端口             OAD,  
  透明转发命令返回结果     TransResult  
}  

   TransResult∷=CHOICE                                  DAR——见6.3.3.17  。  
    {  
     错误信息       [0] DAR,  
     返回数据       [1] octet-string  
   }  

       

6.3.13  安全传输  

6.3.13.1  SECURITY-Request 数据类型  

     安全请求的数据类型（SECURITY-Request）定义见表119  。  

                               表119  SECURITY-Request 数据类型定义  

                      数据类型定义                                                   说明  

SECURITY-Request∷=SEQUENCE                                 SID——见6.3.3.22  。  
{                                                          RN——见6.3.3.24  。  
  应用数据单元  CHOICE                                           SID_MAC——见6.3.3.23  。  

  {  

      明文应用数据单元    [0]  octet-string,  

      密文应用数据单元    [1]  octet-string  

                                                                                                   68  

----------------------- Page 73-----------------------

                                                                                        DL/T 698.45—201X  

  },  

  数据验证信息  CHOICE  

  {  

      数据验证码       [0]  SID_MAC,  

      随机数           [1]  RN,  

      随机数+数据MAC  [2]  RN_MAC,  

      安全标识         [3]  SID  

  }  

}  

   RN_MAC∷=SEQUENCE                                           MAC——见6.3.3.21  。  

   {  

      随机数        RN,  

      数据MAC    MAC  

   }  

       

6.3.13.2  SECURITY-Response 数据类型  

     安全响应的数据类型（SECURITY-Response）定义见表120  。  

                                表120  SECURITY-Response 数据类型定义  

                        数据类型定义                                                      说明  

SECURITY-Response∷=SEQUENCE                                   DAR——见6.3.3.17  。  
{                                                             MAC——见6.3.3.21  。  

  应用数据单元  CHOICE  
                                                                
  {  

       明文应用数据单元    [0]  octet-string,  

      密文应用数据单元    [1]  octet-string  

      异常错误            [2]  DAR  

  }  

  数据验证信息  CHOICE   OPTIONAL  

  {  

      数据MAC          [0]  MAC  

  }  

}  

       

6.3.14  跟随上报信息域  

     跟随上报信息域（FollowReport）的数据类型定义见表121  。  

                                   表121  FollowReport 数据类型定义  

                            数据类型定义                                                      说明  

FollowReport ∷=CHOICE                                                 A-ResultNormal——见表76  。  
{                                                                     A-ResultRecord——见表78  。  

                                                                                                        69  

----------------------- Page 74-----------------------

                                                                  DL/T 698.45—201X  

  若干个对象属性及其数据         [1]  SEQUENCE OF A-ResultNormal  
  若干个记录型对象属性及其数据   [2]  SEQUENCE OF A-ResultRecord  
}  

      

6.3.15  时间标签域  

    时间标签的数据类型TimeTag的定义见表122  。  

                             表122  TimeTag数据类型定义  

               数据类型定义                                       说明  

TimeTag∷=SEQUENCE                        DateTimeBCD——见6.3.3.4  。  
{                                        TI——见6.3.3.28  。  
  发送时标              DateTimeBCD,  
  允许传输延时时间        TI  
}  

      

6.4  应用层编码规范  

    本部分应用层协议数据单元（APDU）遵循A-XDR编码规则,详见DL/T 790.6-2010。  

7  接口类与对象标识  

7.1  对象模型  

    本部分采用对象建模技术,对象是属性和方法的集合。对象的信息包含在对象的属性中,属性的值 
表示对象的特征,并能影响对象的行为特征。所有对象的第一个属性都是“逻辑名”,逻辑名是对象标 
识的一部分。每个对象都提供了一些检查或修改属性值的方法。  
    具有共享公共特征的对象归纳为接口类（IC）,接口类是同一类对象共同特征及行为的表达模板, 
接口类由类标识码（class_id）进行标识。对于某个接口类,公共特征（包括属性和方法）是为所有对 
象描述的。接口类的实例称为接口类对象,简称对象。  
    一个对象只能属于一个接口类,对象具有所属接口类的全部属性和方法。一个对象对应于一个唯一 
的标识,即对象标识（OI）,用于对对象进行引用。  
    遵循本部分的终端、支撑工具和其它系统元件能够采用互操作的方式相互通信。  

7.2  接口类的表示方法  

    用于定义本部分接口类的表述方法是以表格形式给出类的概貌,表格中包括类名、属性和方法。类 
说明模板见表123  。  

                               表123  接口类说明模板  

                      类名                                      实例数  

                      属性                                      数据类型  

1．逻辑名（OI）                             （static）              octet-string  

2．……                                  （……）                     ……  

3．……                                  （……）                     ……  

                                                                              70  

----------------------- Page 75-----------------------

                                                                  DL/T 698.45—201X  

                      方法                                     必选/可选  

1．……                                                            ……  

2．……                                                            ……  

      
    其中：  
    a)  类名：类的说明,如：电能量类、最大需量类、功率类、冻结类等。  
    b)  实例数：规定逻辑设备内类的范例号的范围。  
    c)  类标识码：数值范围0…255。  
    d)  属性：规定类的属性,静态（static）表示终端自身不能更改的属性,例如：配置参数；动态 
        （dyn.）表示载有过程的属性,此属性是由终端自己刷新的。  
    e)  数据类型：定义属性的数据类型。  
    f)  方法：规定类的方法：Method Name(),这些方法应在“方法说明”中说明。  
    g)  必选/可选：定义方法是必选的还是可选的。  
    每个属性和方法都应有详细说明。属性说明是说明属性的数据类型（如果是复杂数据类型）。方法 
说明是说明对象的每个方法和执行的行为特征。  

7.3  接口类  

7.3.1  电能量接口类（class_id=1）  

    本接口类对象提供存储电能量类信息,定义见表124  。  

                              表124  电能量接口类定义  

                   电能量接口类                                      0…n  

                      属性                                      数据类型  

1．逻辑名                                  （static）             octet-string  

2．总及费率电能量数组                            （dyn.）                  array  

3．换算及单位                                （static）              Scaler_Unit  

4．高精度总及费率电能量数组                         （dyn.）                  array  

5．高精度换算及单位                             （static）              Scaler_Unit  

                      方法                                     必选/可选  

1．复位                                                           可选  

2．执行                                                           可选  

      
    电能量接口类属性说明见表125  。  

                            表125  电能量接口类属性说明  

编号                 属性                                    说明  

  1   逻辑名                            标记接口类对象实例,使用OI,见7.4  。  

  2   总及费率电能量数组∷=array 电能量           包含总及n 个费率的电能量,规定其第一个数组元素是总电能量, 

      电能量：                           后面依次排列费率1…n 电能量。  

      CHOICE  

      {  

         double-long-unsigned    [6],  

         double-long             [5]  

                                                                              71  

----------------------- Page 76-----------------------

                                                                           DL/T 698.45—201X  

       }  

  3    换算及单位∷=Scaler_Unit                 见6.3.3.20  。  

  4    高精度总及费率电能量数组∷=array 高              包含总及n 个费率的电能量,规定其第一个数组元素是总电能量, 

       精度电能量                              后面依次排列费率1…n 电能量。  

       高精度电能量：  

       CHOICE  

       {  

          long64-unsigned         [21],  

          long64                 [20]  

       }  

  5    高精度换算及单位∷=Scaler_Unit              见6.3.3.20  。  

  
    电能量接口类方法说明见表126  。  

                                表126  电能量接口类方法说明  

编号                   方法                                          说明  

  1    复位（参数）                             通用方法,instance-specific。  

       参数∷=integer （0）  

  2    执行（参数）                             通用方法,instance-specific。  
       参数∷=Data  

      

7.3.2  最大需量接口类（class_id=2）  

    本接口类对象提供存储最大需量类信息,定义见表127  。  

                                 表127  最大需量接口类定义  

                    最大需量接口类                                             0…n  

                         属性                                           数据类型  

1．逻辑名                                       （static）                octet-string  

2．总及费率最大需量数组                                （dyn.）                      array  

3．换算及单位                                     （static）                 Scaler_Unit  

                         方法                                           必选/可选  

1．复位                                                                    可选  

2．执行                                                                    可选  

      
    最大需量接口类属性说明见表128  。  

                               表128  最大需量接口类属性说明  

编号                   属性                                          说明  

  1    逻辑名                                标记接口类对象实例,使用OI,见7.4  。  

  2    总及费率最大需量数组∷=array 最大需 包含总及n 个费率的最大需量,规定其第一个数组元素是总最大需 

       量及发生时间                             量,后面依次排列费率1…n 最大需量。  

       最大需量及发生时间∷=structure                

                                                                                        72  

----------------------- Page 77-----------------------

                                                                              DL/T 698.45—201X  

       {  

         最大需量值 CHOICE,  

         发生时间   DatetimeBCD_S  

       }  

       最大需量值 ：  

       CHOICE  

       {  

           double-long             [5],  

           double-long-unsigned    [6]  

       }  

  3    换算及单位∷=Scaler_Unit                  见6.3.3.20  。  

                                           最大需量发生时间无换算单位。  

  
    最大需量接口类方法说明见表129  。  

                                表129  最大需量接口类方法说明  

编号                    方法                                            说明  

  1    复位（参数）                              通用方法,instance-specific。  

       参数∷=integer （0）  

  2    执行（参数）                              通用方法,instance-specific。  
       参数∷=Data  

      

7.3.3  分相变量接口类（class_id=3）  

    本接口类对象提供存储电压、电流、相角等分相变量类信息,定义见表130  。  

                                   表130  分相变量接口类定义  

                     分相变量接口类                                               0…n  

                          属性                                             数据类型  

1．逻辑名                                         （static）                 octet-string  

2．分相数值组                                       （dyn.）                       array  

3．换算及单位                                       （static）                  Scaler_Unit  

                          方法                                             必选/可选  

1．复位                                                                       可选  

2．执行                                                                       可选  

      
    分相变量接口类属性说明见表131  。  

                                表131  分相变量接口类属性说明  

编号                    属性                                            说明  

  1    逻辑名                                 标记接口类对象实例,使用OI,见7.4  。  

  2    分相数值组∷=array 分相数值                   数值组按A 相、B 相、C 相、N 线顺序排列,其中：仅电流有N 线, 

       分相数值∷=instance-specific             另外,当接线方式为单相时,A、B、C 三相改为A 相（某一相）。  

                                                                                            73  

----------------------- Page 78-----------------------

                                                                         DL/T 698.45—201X  

  3   换算及单位∷=Scaler_Unit                 见6.3.3.20  。  

  
    分相变量接口类方法说明见表132  。  

                              表132  分相变量接口类方法说明  

编号                   方法                                        说明  

  1    复位（参数）                            通用方法,instance-specific。  

      参数∷=integer （0）  

  2   执行（参数）                             通用方法,instance-specific。  
      参数∷=Data  

      

7.3.4  功率接口类（class_id=4）  

    本接口类对象提供存储功率、功率因数等信息,定义见表133  。  

                                  表133  功率接口类定义  

                      功率接口类                                           0…n  

                        属性                                          数据类型  

1．逻辑名                                      （static）                octet-string  

2．总及分相数值组                                  （dyn.）                     array  

3．换算及单位                                    （static）                Scaler_Unit  

                        方法                                          必选/可选  

1．复位                                                                  可选  

2．执行                                                                  可选  

      
    功率接口类属性说明见表134  。  

                                表134  功率接口类属性说明  

编号                   属性                                        说明  

  1   逻辑名                                标记接口类对象实例,使用OI,见7.4  。  

       总及分相数值组∷=array 总或分相数值             数值组按总、A 相、B 相、C 相顺序排列,当接线方式为单相时, 
  2  
       总或分相数值∷=instance-specific         为总、A 相（某一相）。  

  3   换算及单位∷=Scaler_Unit                 见6.3.3.20  。  

      
    功率接口类方法说明见表135  。  

                                表135  功率接口类方法说明  

编号                   方法                                        说明  

  1    复位（参数）                            通用方法,instance-specific。  

      参数∷=integer （0）  

  2   执行（参数）                             通用方法,instance-specific。  
      参数∷=Data  

      

                                                                                      74  

----------------------- Page 79-----------------------

                                                                          DL/T 698.45—201X  

7.3.5  谐波变量接口类（class_id=5）  

    本接口类对象提供存储谐波变量类信息,定义见表136  。  

                                 表136  谐波变量接口类定义  

                    谐波变量接口类                                             0…n  

                         属性                                           数据类型  

1．逻辑名                                       （static）                octet-string  

2．A 相n 次数值组                                 （dyn.）                     array  

3．B 相n 次数值组                                 （dyn.）                     array  

4．C 相n 次数值组                                 （dyn.）                     array  

5．谐波次数n                                     （static）                  unsigned  

6．换算及单位                                     （static）                 Scaler_Unit  

                         方法                                          必选/可选  

1．复位                                                                    可选  

2．执行                                                                    可选  

      
    谐波变量接口类属性说明见表137  。  

                               表137  谐波变量接口类属性说明  

编号                   属性                                          说明  

  1    逻辑名                               标记接口类对象实例,使用OI,见7.4  。  

       A 相n 次数值组∷=array A 相各次数值          包含A 相谐波相关数值。  
  2  
       A 相各次数值∷=instance-specific  

       B 相n 次数值组∷=array B 相各次数值          包含B 相谐波相关数值。  
  3  
       B 相各次数值∷=instance-specific  

       C 相n 次数值组∷=array C 相各次数值          包含C 相谐波相关数值。  
  4  
       C 相各次数值∷=instance-specific  

  5    谐波次数n                             表示谐波相关数值组中的最高谐波次数。  

  6    换算及单位∷=Scaler_Unit                见6.3.3.20  。  

  
    谐波变量接口类方法说明见表138  。  

                               表138  谐波变量接口类方法说明  

编号                   方法                                          说明  

  1    复位（参数）                            通用方法,instance-specific。  

       参数∷=integer （0）  

  2    执行（参数）                            通用方法,instance-specific。  
       参数∷=Data  

      

7.3.6  数据变量接口类（class_id=6）  

    本接口类对象提供存储过程值或与过程值单元相关的状态值信息,定义见表139  。  

                                                                                        75  

----------------------- Page 80-----------------------

                                                                        DL/T 698.45—201X  

                                表139  数据变量接口类定义  

                    数据变量接口类                                           0…n  

                        属性                                          数据类型  

1．逻辑名                                     （static）                octet-string  

2．数值                                      （dyn.）                instance-specific  

3．换算及单位                                   （static）                 Scaler_Unit  

                        方法                                         必选/可选  

1．复位                                                                  可选  

2．执行                                                                  可选  

      
    数据变量接口类属性说明见表140  。  

                              表140  数据变量接口类属性说明  

编号                   属性                                        说明  

  1   逻辑名                               标记接口类对象实例,使用OI,见7.4  。  

  2   数值                                包含过程值或与过程值单元相关的状态值,数据类型依据“逻辑名” 

                                        决定的对象实例而定义。  

  3   换算及单位∷=Scaler_Unit                见6.3.3.20  。  

  
    数据变量接口类方法说明见表141  。  

                              表141  数据变量接口类方法说明  

编号                   方法                                        说明  

  1    复位（参数）                           通用方法,instance-specific。  

      参数∷=integer （0）  

  2   执行（参数）                            通用方法,instance-specific。  
      参数∷=Data  

      

7.3.7  事件对象接口类（class_id=7）  

    本接口类对象提供配置、存储事件记录类信息,定义见表142  。  

                                表142  事件对象接口类定义  

                    事件对象接口类                                           0…n  

                        属性                                          数据类型  

1．逻辑名                                     （static）                octet-string  

2．事件记录表                                   （dyn.）                     array  

3．关联对象属性表                                 （static）                   array  

4．当前记录数                                   （dyn.）                  long-unsigned  

5．最大记录数                                   （static）                long-unsigned  

6．配置参数                                    （static）                 structure  

7．当前值记录表                                  （dyn.）                     array  

8．上报标识                                    （static）                    bool  

9．有效标识                                    （static）                    bool  

                                                                                      76  

----------------------- Page 81-----------------------

                                                               DL/T 698.45—201X  

                     方法                                    必选/可选  

1．复位                                                         可选  

2．执行                                                         可选  

3．触发一次记录                                                     可选  

4．添加一个事件关联对象属性                                               可选  

5．删除一个事件关联对象属性                                               可选  

     
    事件对象接口类属性说明见表143  。  

                          表143  事件对象接口类属性说明  

编号                 属性                                   说明  

  1   逻辑名                           标记接口类对象实例,使用OI,见7.4  。  

  2   事件记录表∷=array 一条事件记录           用于存储事件记录,记录根据“触发事件配置参数”自动产生或 
      一条事件记录∷=structure             执行“触发一次记录”而来。  
      {                             记录的顺序按照事件发生的次序排序,最近发生的事件记录在 
        事件记录序号  double-long-unsigned,  前,即固定按照事件序号的倒序进行排序。缺省值：复位后事件 
        事件发生时间  DatetimeBCD,        记录表为空。  
        事件结束时间  DatetimeBCD,        事件记录序号——单调递增。  
        事件记录状态  bit-string （SIZE(8)）,  事件发生源——具体内容由对象实例定义。  
        事件发生源    instance-specific,  事件记录状态——按bit 位对应每一个上行通道,为0 表示未读 
        事件特殊数据1 instance-specific,   取或未上报；为1 表示已确认读取或上报。  
        …                            关联对象属性的数据——其排列次序和个数n,由本对象的属性 
        事件特殊数据N instance-specific,   3 决定。  
        第1 个关联对象属性的数据  Data,        事件特殊数据可由具体对象定义。  
        …  
        第n 个关联对象属性的数据  Data  
      }  

  3   关联对象属性表∷=array 一个关联的对象 规定生成事件记录时所要关联的n 个对象属性,这些对象属性的 
      属性                            数值将被复制到事件类对象的事件记录中。  
      一个关联的对象属性∷=OAD                事件关联特征分为四种：事件发生前、事件发生后、事件结束前、 
                                    事件结束后,由OAD 的“属性标识”的“属性特征”的值来区分 
                                     并表示。  

                                    属性特征：  

                                     1：事件发生前  

                                     2：事件发生后  

                                     3：事件结束前  

                                    4：事件结束后  

  4   当前记录数                         表示保存在事件记录表中的记录数。调用方法“复位”后,记录 
                                    表中不包含任何记录,此时当前记录数为零。在每次事件发生执 
                                     行记录操作后,当前记录数加1,直到记录数等于最大记录数。  

  5   最大记录数                         规定事件记录表所允许存放的最多的记录个数,此值大小受物理 
                                     空间限制。  

  6   配置参数∷=structure               用于配置触发事件记录的判定参数,参数的数据类型依据“逻辑 
      {                              名”决定的对象实例而定义。见A.4  。  
        参数1  instance-specific,  
        …  
        参数n  instance-specific  

                                                                           77  

----------------------- Page 82-----------------------

                                                                         DL/T 698.45—201X  

       }  

  7    当前值记录表∷=array 当前值                  事件发生源,在具体的事件中定义；  
       当前值∷=structure                     包含事件发生的次数以及累计时间；  
       {                                  事件发生次数——单位：次；  
        事件发生源  instance-specific,         事件累计时间——单位：秒。  
        累计时间及发生次数  structure                
        {  
          事件发生次数 double-long-unsigned,  
          事件累计时间 double-long-unsigned  
        }  
       }  

  8    上报标识∷=bool                         True,  发生事件立即上报；  
                                          False,不上报。  

  9    有效标识∷=bool                           

  
    事件对象接口类方法说明见表144  。  

                              表144  事件对象接口类方法说明  

编号                    方法                                        说明  

  1    复位（参数）                             通用方法,instance-specific。  
       参数∷=integer （0）  

  2    执行（参数）                             通用方法,instance-specific。  
       参数∷=Data  

  3    触发一次记录（事件发生源,参数）                   根据延时时间（参数）触发执行一次事件记录操作。  
       事件发生源∷=instance-specific           参数——延时执行的时间,单位：秒,0 表示立即执行（无延时）。  
       参数∷=long-unsigned 延时执行的时间  

  4    添加一个事件关联对象属性（参数）                   在属性“关联对象属性表”中,增加一个关联对象属性。  
       参数∷=OAD 对象属性描述符                    参数——对象属性描述符。  

  5   删除一个事件关联对象属性（参数）                    在属性“关联对象属性表”中,删除一个关联对象属性。  
       参数∷=OAD 对象属性描述符                    参数——对象属性描述符。  

      

7.3.8  参数变量接口类（class_id=8）  

    本接口类对象提供存储终端的各种参数类信息,定义见表145  。  

                                表145  参数变量接口类定义  

                    参数变量接口类                                           0…n  

                        属性                                           数据类型  

1．逻辑名                                      （static）                octet-string  

2．参数                                       （static）              instance-specific  

                        方法                                          必选/可选  

1．复位                                                                  可选  

2．执行                                                                  可选  

      
    参数变量接口类属性说明见表146  。  

                              表146  参数变量接口类属性说明  

                                                                                       78  

----------------------- Page 83-----------------------

                                                                   DL/T 698.45—201X  

编号          属性                                     说明  

  1   逻辑名             标记接口类对象实例,使用OI,见7.4  。  

  2   参数              包含终端的各种参数类信息,参数的数据类型依据“逻辑名”决定的对象实例而定义。  

      
    参数变量接口类方法说明见表147  。  

                            表147  参数变量接口类方法说明  

编号                 方法                                      说明  

  1   复位（参数）                          通用方法,instance-specific。  

      参数∷=integer （0）  

  2   执行（参数）                          通用方法,instance-specific。  
      参数∷=Data  

      

7.3.9  冻结数据接口类（class_id=9）  

    本接口类对象提供配置、存储冻结数据及其相关信息,定义见表148  。  

                              表148  冻结数据接口类定义  

                  冻结数据接口类                                        0…n  

                      属性                                       数据类型  

1．逻辑名                                  （static）               octet-string  

2．冻结数据表                                （dyn.）                    array  

3．关联对象属性表                              （static）                  array  

4．当前记录数                                （dyn.）                long-unsigned  

5．最大记录数                                （static）              long-unsigned  

6．配置参数                                 （static）                structure  

                      方法                                       必选/可选  

1．复位                                                             可选  

2．执行                                                             可选  

3．触发一次冻结                                                         可选  

4．添加一个冻结对象属性                                                     可选  

5．删除一个冻结对象属性                                                     可选  

      
    冻结数据接口类属性说明见表149  。  

                            表149  冻结数据接口类属性说明  

编号                 属性                                      说明  

  1   逻辑名                             标记接口类对象实例,使用OI,见7.4  。  

  2   冻结数据表∷=array 一条冻结记录             用于存储冻结数据（记录）,记录根据“冻结周期”和“延时时间” 

      一条冻结记录∷=structure               自动冻结或执行“触发一次冻结”而来。  

      {                               记录的顺序按照冻结发生的次序排序,最近发生的事件记录在前, 

        冻结记录序号 double-long-unsigned,   即固定按照事件序号的倒序进行排序。缺省值：复位后冻结数据表 

        冻结时间 DatetimeBCD,             为空。  

        第1 个关联对象属性的数据 Data,           冻结记录序号——单调递增。  

                                                                                79  

----------------------- Page 84-----------------------

                                                                   DL/T 698.45—201X  

        …                            关联对象属性的数据——其排列次序和个数n,由本对象的属性3 

        第n 个关联对象属性的数据 Data           决定。  

      }  

 3    关联对象属性表∷=array 一个关联的对 用于规定冻结记录所要冻结的n 个对象属性,这些对象属性的数据 

      象属性                            将被复制到冻结数据类对象的冻结记录中。  

      一个关联的对象属性∷=structure           冻结周期——规定冻结操作的间隔时间,其数值单位根据“逻辑名” 

      {                              决定的实例而定：秒冻结为“秒”；分钟冻结为“分钟”；小时冻结 

        冻结周期  long-unsigned,         为“小时”；日冻结为“日”；月冻结为“月”；年冻结为“年”；结 

        关联对象属性描述符  OAD               算日冻结为“结算日”。当其大于零时：表示为按“冻结周期”和 

      }                               “延时时间”自动冻结；当其为零时,表示为非自动冻结,而是由 

                                     外部条件或异步发生的冻结事件触发（由执行“触发一次冻结”） 

                                     而来。  

                                     冻结基准时间为2000 年1 月1 日0 时0 分,对于秒冻结,如果冻 

                                     结周期设置为2,则每2 秒冻结一次；对于分钟冻结,在0 秒冻结； 

                                     对于小时冻结,在0 分冻结；对于日冻结,在0 时0 分冻结；对于 

                                     月冻结,在1 日0 时0 分冻结；结算日冻结在每次发生月结算动作 

                                     时冻结；对于年冻结,在1 月1 日0 时0 分冻结；对于阶梯结算冻 

                                     结,在阶梯结算时冻结；切换冻结在发生切换动作时冻结。  

 4    当前记录数                          表示保存在冻结数据表中的记录数。调用方法“复位”后,记录表 

                                     中不包含任何记录,此时当前记录数为零。在每次执行冻结操作后, 

                                     当前记录数加1,直到记录数等于最大记录数。  

 5    最大记录数                          用于规定冻结数据表所允许存放的最多的记录个数,此值大小受物 

                                     理空间限制。  

 6    配置参数∷=instance-specific        用于配置触发冻结记录的判定参数,参数的数据类型依据“逻辑名” 

                                     决定的对象实例而定义。见A.6  。  

  
   冻结数据接口类方法说明见表150  。  

                               表150  接口类方法说明  

编号                 方法                                      说明  

 1    复位（参数）                         通用方法,instance-specific。  

      参数∷=integer （0）  

 2    执行（参数）                         通用方法,instance-specific。  
      参数∷=Data  

 3    触发一次冻结（参数）                     根据延时时间（参数）触发执行一次事件记录操作。  

      参数∷=long-unsigned 延时执行的时间      参数——延时执行的时间,单位：秒,0 表示立即执行（无延时）。  

 4    添加一个冻结对象属性（参数）                 在属性“关联对象属性表”中,增加一个冻结对象属性。  

      参数∷=structure  

      {  

        冻结周期            long-unsigned,  

        关联对象属性描述符  OAD  

      }  

                                                                                80  

----------------------- Page 85-----------------------

                                                                  DL/T 698.45—201X  

  5   删除一个冻结对象属性（参数）                 在属性“关联对象属性表”中,删除一个冻结对象属性。  

      参数∷=OAD 对象属性描述符                参数——对象属性描述符。  

      

7.3.10  采集监控接口类（class_id=10）  

    本接口类对象提供一种通用的与采集有关的参数或数据记录表,用于配置和存储与采集监控相关的 
参数、数据和记录,应依据“逻辑名”所定义的实例而确定无歧义的解释。本接口类定义见表151  。  

                             表151  采集监控接口类定义  

                  采集监控接口类                                      0…n  

                      属性                                      数据类型  

1．逻辑名                                 （static）              octet-string  

2．配置表                                 （static）                 array  

3．记录表                                 （dyn.）                   array  

4．实时监控记录表                             （dyn.）                   array  

                      方法                                     必选/可选  

1．复位                                                           可选  

2．执行                                                           可选  

3．清空记录表                                                        可选  

      
    采集监控接口类属性说明见表152  。  

                           表152  采集监控接口类属性说明  

编号                 属性                                    说明  

  1   逻辑名                            标记接口类对象实例,使用OI,见7.4  。  

  2   配置表∷=array 配置单元                是“配置单元”的数组。  

      配置参数∷=instance-specific        配置单元——用于配置采集所需的档案参数、或采集所需的以触发 

                                     采集数据记录的任务参数,其内容及其数据类型依据“逻辑名”决 

                                     定的对象实例而定义。见A.7  。  

  3   记录表∷=array 记录单元                是“记录单元”的数组。  

      记录单元∷=instance-specific        记录单元——用于根据“配置单元”记录与采集相关的数据,其内 

                                     容及其数据类型依据“逻辑名”决定的对象实例而定义。见A.7  。  

  4   实时监控记录表∷=array 实时监控记录 实时监控特征分为两种：变化前、变化后,由OAD 的“属性标识” 
      单元                             的“属性特征”的值来区分并表示。  

                                     属性特征：  
      实时监控记录单元∷=instance-specific  
                                     1：变化前  

                                     2：变化后 。  

  
    采集监控接口类方法说明见表153  。  

                           表153  采集监控接口类方法说明  

编号                 方法                                    说明  

  1   复位（参数）                         通用方法,instance-specific。  

                                                                              81  

----------------------- Page 86-----------------------

                                                                      DL/T 698.45—201X  

      参数∷=integer （0）  

  2   执行（参数）                           通用方法,instance-specific。  
      参数∷=Data  

  3   清空记录表                              

      

7.3.11  集合接口类（class_id=11）  

    本接口类对象提供配置、存储终端采集数据及其相关信息,定义见表154    

                                 表154  集合接口类定义  

                     集合接口类                                         0…n  

                       属性                                        数据类型  

1．逻辑名                                    （static）               octet-string  

2．集合                                     （dyn.）                    array  

3．当前元素个数                                 （dyn.）                long-unsigned  

4．最大元素个数                                 （static）              long-unsigned  

                       方法                                        必选/可选  

1．复位                                                               可选  

2．执行                                                               可选  

      
    集合接口类属性说明见表155  。  

                               表155  集合接口类属性说明  

编号                  属性                                       说明  

  1   逻辑名                              标记接口类对象实例,使用OI,见7.4  。  

  2   集合∷=array 集合元素                   是“集合元素”的数组。  

      集合元素∷=instance-specific          集合元素——其内容及其数据类型依据“逻辑名”决定的对象实例 

                                       而定义。  

  3   当前元素个数                           表示保存在记录表中的记录数。调用方法“复位”后,记录表中不 

                                       包含任何记录,此时当前记录数为零。在每次执行记录操作后,当 

                                       前记录数加1,直到记录数等于最大记录数。  

  4   最大元素个数                           用于规定记录表所允许存放的最多的记录个数,此值大小受物理空 

                                       间限制。  

  
    集合接口类方法说明见表156  。  

                               表156  集合接口类方法说明  

编号                  方法                                       说明  

  1   复位（参数）                           通用方法,instance-specific。  

      参数∷=integer （0）  

  2   执行（参数）                           通用方法,instance-specific。  
      参数∷=Data  

      

                                                                                  82  

----------------------- Page 87-----------------------

                                                                              DL/T 698.45—201X  

7.3.12  脉冲计量接口类（class_id=12）  

    脉冲计量接口类定义见表157  。  

                                   表157  脉冲计量接口类定义  

                      脉冲计量接口类                                               0…n  

                           属性                                             数据类型  

1．逻辑名                                           （static）                octet-string  

2．通信地址                                          （static）                    TSA  

3．互感器倍率                                         （static）                 structure  

4．脉冲配置                                          （static）                   array  

5．有功功率                                          （dyn.）                  double-long  

6．无功功率                                          （dyn.）                  double-long  

7．当日正向有功电量                                      （dyn.）                     array  

8．当月正向有功电量                                      （dyn.）                     array  

9．当日反向有功电量                                      （dyn.）                     array  

10．当月反向有功电量                                     （dyn.）                     array  

11．当日正向无功电量                                     （dyn.）                     array  

12．当月正向无功电量                                     （dyn.）                     array  

13．当日反向无功电量                                     （dyn.）                     array  

14．当月反向无功电量                                     （dyn.）                     array  

15．正向有功电能示值                                     （dyn.）                     array  

16．正向无功电能示值                                     （dyn.）                     array  

17．反向有功电能示值                                     （dyn.）                     array  

18．反向无功电能示值                                     （dyn.）                     array  

19．换算及单位                                        （static）                 structure  

                     方法                                                  必选/可选  
1．复位                                                                        可选  

2．执行                                                                        可选  

3．添加脉冲输入单元                                                                  必选  

4．删除脉冲输入单元                                                                  必选  

  

    脉冲计量接口类的属性描述见表158  。  

                                表158  脉冲计量接口类属性描述  

编号                       属性                                            说明  

  1    逻辑名                                       标记接口类对象实例  

  2    通信地址∷=TSA                                   

  3    互感器倍率∷=structure                            

       {  

         PT  long-unsigned,  

         CT  long-unsigned  

       }  

                                                                                            83  

----------------------- Page 88-----------------------

                                                                              DL/T 698.45—201X  

4     脉冲配置∷=array 脉冲单元                             

      脉冲单元∷=structure  

      {  

       脉冲输入端口号   OAD,  

       脉冲属性            enum  

        {  

           正向有功 （0）,  

           正向无功 （1）,  

           反向有功 （2）,  

           反向无功 （3）  

       },  

       脉冲常数k     long-unsigned  

      }  

5     有功功率∷=double-long                            

6     无功功率∷=double-long                            

7     当日正向有功电量∷=array 电能量                        包含总及 n 个费率的电能量,规定其第一个数组元素是总 

      电能量∷= double-long-unsigned                 电能量,后面依次排列费率1…n 电能量。  

8     当月正向有功电量∷=array 电能量                        同上。  

      电能量∷= double-long-unsigned  

9     当日反向有功电量∷=array 电能量                        同上。  

      电能量∷= double-long-unsigned  

10    当月反向有功电量∷=array 电能量                        同上。  

      电能量∷= double-long-unsigned  

11    当日正向无功电量∷=array 电能量                        同上。  

      电能量∷= double-long-unsigned  

12    当月正向无功电量∷=array 电能量                        同上。  

      电能量∷= double-long-unsigned  

13    当日反向无功电量∷=array 电能量                        同上。  

      电能量∷= double-long-unsigned  

14    当月反向无功电量∷=array 电能量                        同上。  

      电能量∷= double-long-unsigned  

15    正向有功电能示值∷=array 电能示值                       同上。  

      电能示值∷= double-long-unsigned  

16    反向有功电能示值∷=array 电能示值                       同上。  

      电能示值∷= double-long-unsigned  

17    正向无功电能示值∷=array 电能示值                       同上。  

      电能示值∷= double-long-unsigned  

18    反向无功电能示值∷=array 电能示值                       同上。  

      电能示值∷= double-long-unsigned  

19    单位及换算∷=structure                           Scaler_Unit 见6.3.3.20  。  

      {                                            

       属性5 单位及换算   Scaler_Unit,                  属性5 单位换算::=单位：W,换算：-1  

                                                                                             84  

----------------------- Page 89-----------------------

                                                                      DL/T 698.45—201X  

        属性6 单位及换算   Scaler_Unit,            属性6 单位换算::=单位：var,换算：-1  

        属性7 单位及换算   Scaler_Unit,            属性7 单位换算::=单位：kWh,换算：-4  

        属性8 单位及换算  Scaler_Unit,             属性8 单位换算::=单位：kWh,换算：-4  

        属性9 单位及换算  Scaler_Unit,             属性9 单位换算::=单位：kWh,换算：-4  

        属性10 单位及换算  Scaler_Unit,            属性10 单位换算::=单位：kWh,换算：-4  

        属性11 单位及换算  Scaler_Unit,            属性11 单位换算::=单位：kvarh,换算：-4  

        属性12 单位及换算  Scaler_Unit,            属性12 单位换算::=单位：kvarh,换算：-4  

        属性13 单位及换算  Scaler_Unit,            属性13 单位换算::=单位：kvarh,换算：-4  

        属性14 单位及换算  Scaler_Unit,            属性14 单位换算::=单位：kvarh,换算：-4  

        属性15 单位及换算  Scaler_Unit,            属性15 单位换算::=单位：kWh,换算：-4  

        属性16 单位及换算  Scaler_Unit,            属性16 单位换算::=单位：kWh,换算：-4  

        属性17 单位及换算  Scaler_Unit,            属性17 单位换算::=单位：kvarh,换算：-4  

        属性18 单位及换算  Scaler_Unit             属性18 单位换算::=单位：kvarh,换算：-4  

      }  

  

    脉冲计量接口类的方法描述见表159  。  

                             表159  脉冲计量接口类方法描述  

编号                  方法                                       说明  

  1   复位（参数）                           通用方法,instance-specific。  

      参数∷=bit-string  

  2   执行（参数）                           通用方法,instance-specific。  
      参数∷=Data  

  3   添加脉冲输入单元（脉冲单元）                     

  4   删除脉冲输入单元（脉冲输入端口号）                  

      

7.3.13  负荷控制对象接口类（class_id=13）  

    本接口类对象提供负荷管理有关的控制功能,定义见表160  。  

                             表160  负荷控制对象接口类定义  

                   负荷控制对象接口类                                         0…n  

                         属性                                         数据类型  

1．逻辑名                              （static）                       octet-string  

2．控制方案集                            （static）                          array  

3．控制投入状态                           （dyn.）                            array  

4．控制输出状态                           （dyn.）                            array  

5．越限告警状态                           （dyn.）                            array  

                         方法                                        必选/可选  

1．复位                                                                 可选  

2．执行                                                                 可选  

3．添加控制单元                                                             必选  

4．删除控制单元                                                             必选  

                                                                                   85  

----------------------- Page 90-----------------------

                                                                              DL/T 698.45—201X  

5. 更新控制单元                                                                   必选  

6．控制投入                                                                      必选  

7．控制解除                                                                      必选  

      
    负荷控制对象接口类属性说明见表161  。  

                              表161  负荷控制对象接口类属性说明  

编号                    属性                                            说明  

  1    逻辑名                                 标记接口类对象实例,使用OI,见7.4  。  

  2    控制方案集∷=array 控制单元                   是“控制单元”的数组。  

       控制单元∷=instance-specific             控制单元——其内容及其数据类型依据“逻辑名”决定的对象实例 

                                           而定义。  

  3    控制投入状态∷=array 一个总加组控制   

       投入状态  

       一个总加组控制投入状态∷=structure  

       {  

         总加组对象  OI,  

         投入状态  enum{未投入（0）,投入（1）}  

       }  

  4    控制输出状态∷=array  一个总加组控制 用于表示n 个总加组的控制输出状态。  

       输出状态                                控制输出状态：  

       一个总加组控制输出状态∷=structure              bit0~bit7 对应1~8 个开关的输出状态（0：未输出,1：输出）。  

       {  

         总加组对象    OI,  

         控制输出状态  bit-string(SIZE(8))  

       }  

  5    越限告警状态∷=array 一个总加组告警   

       输出状态  

       一个总加组告警输出状态∷=structure  

       {  

         总加组对象    OI,  

         告警输出状态  enum  

         {  

           未告警 （0）,告警 （1）  

         }  

       }  

  
    负荷控制对象接口类方法说明见表162  。  

                              表162  负荷控制对象接口类方法说明  

编号                    方法                                            说明  

  1    复位（参数）                              通用方法,instance-specific。  

                                                                                            86  

----------------------- Page 91-----------------------

                                                                     DL/T 698.45—201X  

      参数∷=integer （0）  

  2   执行（参数）                          通用方法,instance-specific。  

      参数∷=Data  

  3   添加控制单元（总加组对象, 控制单元）    

      总加组对象∷=OI  

      控制单元∷=instance-specific  

  4   删除控制单元（总加组对象）                     

      总加组对象∷=OI  

  5   更新控制单元（控制单元）                      

      控制单元∷=instance-specific  

  6   控制投入（总加组对象）                       

      总加组对象∷=OI  

  7   控制解除（总加组对象）                       

      总加组对象∷=OI  

      

7.3.14  区间统计接口类（class_id=14）  

    本接口类对象提供依据配置参数判定、统计与越限相关的信息,定义见表163  。  

                               表163  区间统计接口类定义  

                   超限统计接口类                                        0…n  

                       属性                                        数据类型  

1．逻辑名                                   （static）               octet-string  

2．统计结果表                                 （dyn.）                    array  

3．关联对象属性表                               （static）                  array  

                       方法                                       必选/可选  

1．复位                                                              可选  

2．执行                                                              可选  

3．添加一个统计对象属性                                                      可选  

4．删除一个统计对象属性                                                      可选  

      
    区间统计接口类属性说明见表164  。  

                             表164  区间统计接口类属性说明  

编号                  属性                                      说明  

  1   逻辑名                             标记接口类对象实例,使用OI,见7.4  。  

  2   统计结果表∷=array 一个统计结果             对应“关联的判断”所规定的n 个对象属性的n 组统计结果值。  

      一个统计结果∷= structure  

      {  

        对象属性描述符  OAD,  

        区间统计值 array 一个统计区间  

      }  

      一个统计区间∷=structure  

                                                                                 87  

----------------------- Page 92-----------------------

                                                                              DL/T 698.45—201X  

       {  

         累计时间  instance-specific,  

         累计次数  instance-specific  

       }  

  3    关联对象属性表∷=array 一个关联对象 用于规定统计结果表所要统计的n 个对象属性,这些对象属性的数 

       属性                                  值发生越限将计入“统计结果表”中。  

       一个关联对象属性∷=structure                   

       {                                   统计频率：采样点取值周期。  

         关联对象属性描述符  OAD,  

         越限判断参数  array Data,  

         统计周期  unsigned,  

         统计频率  TI  

       }  

  
    区间统计接口类方法说明见表165  。  

                                表165  区间统计接口类方法说明  

编号                    方法                                            说明  

  1    复位（参数）                              通用方法,instance-specific。  

       参数∷=integer （0）  

  2    执行（参数）                              通用方法,instance-specific。  

       参数∷=Data  

  3    添加一个统计对象属性 （参数）                     在属性“关联对象属性表”中,增加一个统计对象属性。  

       参数∷=structure  

       {  

         关联对象属性描述符  OAD,  

         越限判断参数        array Data,  

         统计周期            unsigned,  

         统计频率            TI  

       }  

  4    删除一个统计对象属性 （参数）                     在属性“关联对象属性表”中,删除一个统计对象属性。  

       参数∷=OAD  关联对象属性描述符                  参数——关联对象属性描述符。  

      

7.3.15  累加平均接口类（class_id=15）  

    本接口类对象提供对相同物理属性的数值进行累加、平均的运算功能,定义见表166  。  

                                   表166  累加平均接口类定义  

                     累加平均接口类                                               0…n  

                          属性                                             数据类型  

1．逻辑名                                        （static）                  octet-string  

2．运算结果                                       （dyn.）                      structure  

3．关联对象属性表                                    （static）                     array  

                                                                                            88  

----------------------- Page 93-----------------------

                                                                          DL/T 698.45—201X  

                         方法                                          必选/可选  

1．复位                                                                    可选  

2．执行                                                                    可选  

3．添加一个关联对象属性                                                            可选  

4．删除一个关联对象属性                                                            可选  

      
    累加平均接口类属性说明见表167  。  

                               表167  累加平均接口类属性说明  

编号                   属性                                          说明  

  1    逻辑名                               标记接口类对象实例,使用OI,见7.4  。  

  2    运算结果∷=array structure             用于存储对“关联对象属性表”所规定的n 个对象属性的累加、平 

       {                                 均运算后的数据结果。  

         对象属性描述符  OAD,                   累加和、平均值——其数据类型依据“逻辑名”决定的对象实例而 

         累加和  instance-specific,         定义。  

         平均值  instance-specific  

       }  

  3    关联对象属性表∷=array 一个关联的对 规定要参与计算的 n 个对象属性,这些对象属性的数值将参与累 

       象属性                               加、平均运算,结果存入“运算结果”中。  

       一个关联对象∷=structure  

       {  

         关联对象属性描述符  OAD,  

         统计周期  unsigned,  

         统计频率  TI  

       }  

  
    累加平均接口类方法说明见表168  。  

                               表168  累加平均接口类方法说明  

编号                   方法                                          说明  

  1    复位（参数）                            通用方法,instance-specific。  

       参数∷=integer （0）  

  2    执行（参数）                            通用方法,instance-specific。  
       参数∷=Data  

  3    添加一个关联对象属性 （参数）                   在属性“关联对象属性表”中,增加一个关联对象属性。  

       参数∷=structure  

       {  

         关联对象属性描述符  OAD,  

         统计周期  unsigned,  

         统计频率  TI  

       }  

  4    删除一个关联对象属性 （参数）                   在属性“关联对象属性表”中,删除一个关联对象属性。  

       参数∷=OAD  关联对象属性描述符                参数——关联对象属性描述符。  

                                                                                        89  

----------------------- Page 94-----------------------

                                                                         DL/T 698.45—201X  

      

7.3.16  极值工具接口类（class_id=16）  

    本接口类对象提供采集或生成最大、最小值及其发生时间,定义见表169  。  

                                表169  极值工具接口类定义  

                    极值工具接口类                                           0…n  

                        属性                                          数据类型  

1．逻辑名                                      （static）                octet-string  

2．极值结果表                                    （dyn.）                     array  

3．关联对象属性表                                  （static）                   array  

                        方法                                          必选/可选  

1．复位                                                                  可选  

2．执行                                                                  可选  

3．添加一个关联对象属性                                                          可选  

4．删除一个关联对象属性                                                          可选  

      
    极值工具接口类属性说明见表170  。  

                              表170  极值工具接口类属性说明  

编号                   属性                                        说明  

  1   逻辑名                                标记接口类对象实例,使用OI,见7.4  。  

  2    极值结果表∷=array 一个极值结果               用于存储对应“关联对象属性表”所规定的n 个对象属性的极值结 

       一个极值结果∷=structure                 果（记录）。  

       {                                 极值及其发生时间——其数据类型依据“逻辑名”决定的对象实例 

        对象属性描述符  OAD,                    而定义。  

        最大值  instance-specific,  

        及其发生时间  DateTimeBCD,  

        最小值  instance-specific,  

        及其发生时间  DateTimeBCD  

       }  

  3    关联对象属性表∷=array 一个关联的对 用于规定要被采集或生成极值的n 个对象属性,这些对象属性的数 

       象属性                               值的最大和最小值及其发生时间将被保存在“极值结果表”中。  

       一个关联对象∷=structure                  

       {  

        关联对象属性描述符  OAD,  

        统计周期  unsigned,  

        统计频率  TI  

       }  

  
    极值工具接口类方法说明见表171  。  

                              表171  极值工具接口类方法说明  

                                                                                      90  

----------------------- Page 95-----------------------

                                                                      DL/T 698.45—201X  

编号                  方法                                       说明  

  1   复位（参数）                           通用方法,instance-specific。  

      参数∷=integer （0）  

  2   执行（参数）                           通用方法,instance-specific。  
      参数∷=Data  

  3   添加一个关联对象属性 （参数）                  在属性“关联对象属性表”中,增加一个关联对象属性。  

      参数∷=structure  

       {  

        关联对象属性描述符  OAD,  

        统计周期  unsigned,  

        统计频率  TI  

      }  

  4   删除一个关联对象属性 （参数）                  在属性“关联对象属性表”中,删除一个关联对象属性。  

      参数∷=OAD  关联对象属性描述符               参数——关联对象属性描述符。  

      

7.3.17  显示接口类（class_id=17）  

    本接口类对象提供与终端显示或对外打印相关的信息,定义见表172  。  

                                 表172  显示接口类定义  

                     显示接口类                                          0…n  

                       属性                                         数据类型  

1．逻辑名                                    （static）               octet-string  

2．显示对象列表                                 （static）                  array  

3．显示时间                                   （static）            double-long-unsigned  

4．显示参数                                   （static）                 structure  

                       方法                                         必选/可选  

1．复位                                                                可选  

2．执行                                                                可选  

3．下翻                                                                可选  

4．上翻                                                                可选  

5．显示查看                                                              可选  

6．全显                                                                可选  

      
    显示接口类属性说明见表173  。  

                               表173  显示接口类属性说明  

编号                     属性                                        说明  

  1   逻辑名                                     标记接口类对象实例,使用OI,见7.4  。  

  2   显示对象列表∷=array 显示对象描述符                   用于表明显示的对象属性,这些对象属性的数据依次被循 

      显示对象描述符∷=structure                      环显示屏序号：0表示不需要分屏；其它为分屏显示,其 

       ｛                                      中1表示分屏第一屏,2表示分屏第二屏,以此类推。  

         显示对象   CSD,                            

         屏序号     unsigned  

                                                                                   91  

----------------------- Page 96-----------------------

                                                                          DL/T 698.45—201X  

       ｝  

  3    每个对象显示时间: long-unsigned                  每个对象显示时间的单位为秒, 0 表示由外部触发。  

  4    显示参数∷=structure                          用于表明显示的相关参数  

       {                                         当前总对象数：指示当前显示的总对象数  

         当前总对象数    unsigned,                    允许最大对象数： 可设置的最大显示数  

         允许最大对象数  unsigned                        

       }  

  
    显示接口类方法说明见表174  。  

                                 表174  显示接口类方法说明  

编号                       方法                                         说明  

  1    复位（参数）                                   通用方法,instance-specific。  

       参数∷=integer （0）  

  2    执行（参数）                                   通用方法,instance-specific。  
       参数∷=Data  

  3    下翻（参数）                                   显示下一个对象信息。  

       参数∷=NULL  

  4    上翻（参数）                                   显示上一个对象信息。  

       参数∷=NULL  

  5    显示查看（参数）                                 显示查看的参数可以为所有可显示的对象。  

       参数∷=structure                            显示持续时间:单位：秒。  

       {  

           显示列信息    CSD,  

           显示持续时间  long-unsigned  

       }  

  6    全显（参数）                                   参数为全显持续时间,单位：秒。  

       参数::=long-unsigned  

      

7.3.18  文件传输接口类（class_id=18）  

    本接口类对象提供终端实现上传和下载文件的功能,定义见表175  。  

                                 表175  文件传输接口类定义  

                    文件传输接口类                                             0…n  

                         属性                                           数据类型  

1．逻辑名                                       （static）                octet-string  

2．文件信息                                      （dyn.）                    structure  

3. 命令结果                                     （dyn.）                      enum  

                         方法                                          必选/可选  

1．复位                                                                    可选  

2．执行                                                                    可选  

3．删除                                                                    可选  

                                                                                        92  

----------------------- Page 97-----------------------

                                                                          DL/T 698.45—201X  

4．校验                                                                   可选  

5．代发                                                                   可选  

6. 代收                                                                  可选  

7. 上传                                                                  可选  

8. 下载                                                                  可选  

      
    文件传输接口类属性说明见表176  。  

                               表176  文件传输接口类属性说明  

编号                           属性                                         说明  

  1    逻辑名                                               标记接口类对象实例,使用OI,详见7.4  。  

  2    文件信息∷=structure                                   源文件：文件路径及名称；  

       {                                                 目标文件：文件路径及名称；  

          源文件    visible-string,                         文件路径及名称格式：“[/路径/]文件名” , 

          目标文件  visible-string,                          如果设备不支持文件管理,可设置为空串。  

          文件大小  double-long-unsigned,                    文件大小：单位字节。  

          文件属性  bit-string(SIZE(3)),                     文件属性：  

          文件版本  visible-string                           bit0:读（1:可读,0:不可读）  

       }                                                 bit1:写（1:可写,0:不可写）  

                                                         bit2:执行（1:可执行,0:不可执行）  

                                                         文件版本：文件的版本信息。  

                                                           

  3    命令结果∷=enum                                        最近一次传输或执行结果的状态信息。  

       {  

         文件传输进度 0~99%                   （0~99）,  

         传输或执行操作成功                      （100）,  

         正在建立连接（扩展传输）                   （101）,  

         正在远程登录（扩展传输）                   （102）,  

         正在执行文件                         （103）,  

         文件或目录不存在                       （104）,  

         操作不允许（创建/删除/读写/执行）             （105）,  

         文件传输中断                         （106）,  

         文件校验失败                         （107）,  

         文件转发失败                         （108）,  

         文件代收失败                         （109）,  

         建立连接失败（扩展传输）                   （110）,  

         远程登录失败（扩展传输）                   （111）,  

         存储空间不足                         （112）,  

         复位后默认值                         （255）  

       }  

  
文件传输接口类方法说明见表177  。  

                                                                                        93  

----------------------- Page 98-----------------------

                                                                     DL/T 698.45—201X  

                             表177  文件传输接口类方法说明  

编号                         方法                                       说明  

  1   复位（参数）                                         强迫对象复位,将属性“数值”置为缺省值, 

      参数∷=integer （0）                                缺省值是实例的常数。  

  2   执行（参数）                                         通用方法,instance-specific。  
      参数∷=Data                                       默认方法执行下载文件,如果文件有执行权限 
                                                     则执行,否则拒绝。  

  3   删除 （参数）                                        删除本地文件,如果文件存在则删除,并复位 
      参数∷=null                                       传输状态字和当前文件指针,否则拒绝。  

  4   校验 （参数）                                        下载或上传文件校验,主站侧生成文件校验值 

      参数∷=structure                                  并下发校验文件操作,设备对下载或上传的文 

      {                                              件进行校验,并反馈在“命令结果”。  

        校验类型  enum                                   CRC 校验算法见附录D.  

        {  

          CRC 校验 （默认）     （0）,  

         md5 校验           （1）,  

          SHA1 校验         （2）,  

          其他              （255）  

        },  

        校验值  octet-string  

      }  

  5   代发（参数）                                         文件下载到本地端后,再根据目标地址进行文 

      参数∷=TSA                                        件代发。  

  6   代收（参数）                                         根据目标地址进行文件代收后,再上传文件到 

      参数∷=TSA                                        远程端。  

  7   上传（参数）                                         通用方法,instance-specific。  

      参数∷=Data                                       上传：客户机向服务器上传文件,目标文件不 

                                                     存在则创建。  

  8   下载 （参数）                                        通用方法,instance-specific。  

      参数∷=Data                                       下载：客户机从服务器下载文件,源文件不存 

                                                     在则返回错误,目标文件不存在则创建。  

      

7.3.19  设备管理接口类（class_id=19）  

    设备管理接口类定义见表178  。  

                               表178  设备管理接口类定义  

                   设备管理接口类                                         0…n  

                       属性                                        数据类型  

1．逻辑名                                    （static）               octet-string  

2．版本信息                                   （static）                structure  

3. 生产日期                                  （static）               DateTimeBCD  

4. 子设备列表                                 （static）                 array  

                                                                                  94  

----------------------- Page 99-----------------------

                                                                          DL/T 698.45—201X  

5. 支持规约列表                                  （static）                    array  

6. 允许跟随上报                                  （static）                    bool  

7. 允许主动上报                                  （static）                    bool  

8. 允许与主站通话                                 （static）                    bool  

                        方法                                           必选/可选  

1．复位                                                                   必选  

2．执行                                                                   可选  

3. 数据初始化                                                               必选  

4. 恢复出厂参数                                                              必选  

5. 事件初始化                                                               必选  

6. 需量初始化                                                               可选  

      
    设备管理接口类属性说明见表179  。  

                               表179  设备管理接口类属性说明  

编号                   属性                                         说明  

 1     逻辑名                               标记接口类对象实例,使用OI,见7.4  。  

 2     版本信息                              版本信息∷=structure  

                                         {  

                                           厂商代码       visible-string(SIZE  (4)),  

                                           软件版本号     visible-string(SIZE  (4)),  

                                           软件版本日期   visible-string(SIZE  (6)),  

                                           硬件版本号     visible-string(SIZE  (4)),  

                                           硬件版本日期   visible-string(SIZE  (6)),  

                                           厂家扩展信息   visible-string(SIZE  (8))  

                                         }  

 3     生产日期                              设备的出厂日期,数据格式DateTimeBCD  

 4     子设备列表                             array OI,包含设备自身的子模块信息  

 5     支持规约列表                            设备支持的规约列表,数据格式 array visible-string  

 6     允许跟随上报                            True：允许跟随上报,False：禁止跟随上报。  

 7     允许主动上报                            True：允许主动上报,False：禁止主动上报。  

 8     允许与主站通话                           True：允许通话,False：禁止通话。  

  
    设备管理接口类方法说明见表180  。  

                               表180  设备管理接口类方法说明  

编号                            方法                                         说明  

 1     复位（参数）  
                                                           设备复位重启,参数NULL。  
       参数∷=NULL  

 2     执行（参数）  
                                                           通用方法,instance-specific。  
       参数∷=Data  

 3     数据初始化                                               清空设备数据区。  

 4     恢复出厂参数                                              将设备的配置恢复到出厂设置,参数NULL。  

                                                                                       95  

----------------------- Page 100-----------------------

                                                                          DL/T 698.45—201X  

  5    事件初始化                                               清空所有事件存储区  

  6    需量初始化                                               当前需量对象清零  

      

7.3.20  应用连接接口类（class_id=20）  

    应用连接接口类参见表181  。  

                                 表181  应用连接接口类定义  

                      应用连接接口类                                            0…n  

                          属性                                           数据类型  

1．逻辑名                                        （static）                octet-string  

2．对象列表                                       （static）                   array  

3．应用语境信息                                     （static）                  structure  

4．当前连接的客户机地址                                 （dyn.）                    unsigned  

5．身份验证机制                                     （static）                    enum  

                          方法                                           必选/可选  

1．复位                                                                     可选  

2．执行                                                                     可选  

      

    应用连接接口类属性说明见表182  。  

                               表182  应用连接接口类属性说明  

编号                        属性                                         说明  

  1    逻辑名                                         标记接口类对象实例,使用OI,见7.4  。  

  2    对象列表∷=array 一个可访问对象                         包含对象所有可访问对象以及该对象属性和方法的访 

       一个可访问对象∷=structure                          问权限。  

       {                                             

          对象标识  OI,                                对象标识OI；  

          访问权限  structure                          该对象属性以及方法的访问权限；  

       }                                             

       访问权限∷=structure                               

       {                                             

          属性访问权限  array 一个属性访问权限,                  该对象所有属性的访问权限；  

          方法访问权限  array 一个方法访问权限                   该对象所有方法的访问权限；  

       }                                             

       一个属性访问权限∷=structure                           

       {                                             

          属性ID           unsigned,                 属性序号；  

          属性访问权限类别  enum                           属性的访问权限；  

          {                                          

            不可访问 （0）,                              不可读也不可写  

            只读 （1）,                                可读不可写  

            只写 （2）,                                不可读只能写  

                                                                                       96  

----------------------- Page 101-----------------------

                                                                                   DL/T 698.45—201X  

             可读写 （3）                                     可读可写  

           }                                               

       }                                                   

       一个方法访问权限∷=structure                                 

        {                                                  

           方法ID        unsigned,                         方法序号；  

           方法访问权限   bool                                 方法访问权限,True：可访问,False：不可访问；  

       }  

  3    应用语境信息∷=structure                                 包含当前应用连接的语境信息：  

        {                                                  

           协议版本信息        ComBCD4,                          

           最大接收APDU 尺寸   long-unsigned,  

           最大发送APDU 尺寸   long-unsigned,  

           最大可处理APDU 尺寸 long-unsigned,  

           协议一致性块        bit-string(64),  

           功能一致性块        bit-string(128),  

           静态超时时间       double-long-unsigned  

       }  

  4     当前连接的客户机地址∷=unsigned                             当前连接的客户机地址。  

  5    连接认证机制∷=enum                                      见CONNECT.request 相关描述。  

        {  

         公共连接    (0),  

         普通密码    (1),  

         对称加密    (2),  

         数字签名    (3)  

       }  

  
     应用连接接口类方法说明见表183  。  

                                   表183  应用连接接口类方法说明  

 编号                     方法                                               说明  

  1    复位（参数）                                 通用方法,instance-specific。  

       参数∷=integer （0）  

  2    执行（参数）                                 通用方法,instance-specific。  
       参数∷=Data  

       

7.3.21  ESAM 接口类（class_id=21）  

     ESAM接口类定义参见表184  。  

                                       表184  ESAM 接口类定义  

                           ESAM 接口类                                                0…n  

                              属性                                                 数据类型  

                                                                                                   97  

----------------------- Page 102-----------------------

                                                                              DL/T 698.45—201X  

1．逻辑名                                            （static）                octet-string  

2．ESAM 序列号                                       （static）                octet-string  

3．ESAM 版本号                                       （static）                octet-string  

4．对称密钥版本                                         （static）                octet-string  

5．会话时效门限                                         （static）             double-long-unsigned  

6．会话时效剩余时间                                       （dyn.）               double-long-unsigned  

7．当前计数器                                          （static）                  structure  

8．证书版本                                           （static）                  structure  

9．终端证书序列号                                        （static）                octet-string  

10．终端证书                                          （static）                octet-string  

11．主站证书序列号                                       （static）                octet-string  

12. 主站证书                                         （static）                octet-string  

13. ESAM 安全存储对象列表                                （static）                    array  

                            方法                                             必选/可选  

1．复位                                                                         可选  

2．执行                                                                         可选  

3．ESAM 操作                                                                    可选  

4. 数据更新                                                                      可选  

5. 协商失效                                                                      可选  

6. 钱包操作 （开户、充值、退费）                                                           可选  

7. 密钥更新                                                                      可选  

8．证书更新                                                                       可选  

9．设置协商时效                                                                     可选  

10. 钱包初始化                                                                    可选  

11. 钱包状态查询                                                                   可选  

      
    ESAM接口类属性说明见表185  。  

                                  表185  ESAM 接口类属性说明  

 编号                   属性                                            说明  

  1    逻辑名                                 标记接口类对象实例,使用OI,见7.4  。  

  2    ESAM 序列号                            ESAM 唯一的标识,是一串数字。  

  3    ESAM 版本号                            ESAM 的版本号。  

  4    对称密钥版本                              ESAM 中对称密钥的版本号。  

  5    会话时效门限                              double-long-unsigned,单位：分钟  

  6    会话时效剩余时间                            double-long-unsigned,单位：分钟  

  7    当前计数器                               structure  

                                           {  

                                             单地址应用协商计数器 double-long-unsigned,  

                                             主动上报计数器       double-long-unsigned,  

                                             应用广播通信序列号   double-long-unsigned  

                                           }  

  8    证书版本                                structure  

                                           {  

                                                                                            98  

----------------------- Page 103-----------------------

                                                                                DL/T 698.45—201X  

                                              终端证书版本  octet-string,  

                                              主站证书版本  octet-string  

                                            }  

 9     终端证书序列号                              octet-string  

 10    终端证书                                 octet-string  

 11    主站证书序列号                              octet-string  

 12    主站证书                                 主站带MAC 下发,同主站证书一起下发（后4 个字节为 mac）  

 13    ESAM 安全存储对象列表                        需要存储到ESAM 中的对象  

                                            ESAM 安全存储对象列表∷=array OI  

      
    ESAM接口类方法说明见表186  。  

                                   表186  ESAM 接口类方法说明  

编号                    方法                                              说明  

  1    复位（参数）                               通用方法,instance-specific。  

       参数∷=integer （0）  

 2     执行（参数）                               通用方法,instance-specific。  
       参数∷=Data  

 3     ESAM 操作（参数）                          对ESAM 数据的操作,电能表透传给ESAM。  
       参数∷=structure                        ESAM 操作的数据标识：  
       {                                    ESAM 操作数据标识共8 字节、4 部分组成,数据排列如下表所示, 

         ESAM 操作数据标识  long64-unsigned,  Ld 表示ESAM 操作数据的长度。  

         ESAM 操作数据      structure             第7-6 字节      第5-4 字节       第3-2 字节      第1-0 字节  

        ｛                                     目录标识         文件标识          读写数据的 要读写的数 

           类别            enum                                            相对起始地 据长度Ld  

           {                                                             址  
               数据明文      (0),                 

               数据密文      (1)  

           },  

           数据内容        octet-string,  

           数据验证码      SID_MAC OPTIONAL  

        }  

       ｝  

         

       应答∷=structure  

       {  

         数据类别         enum  

         {  

           数据明文        (0),  

           数据密文        (1)  

         },  

         数据内容        octet-string,  

         数据验证码      SID_MAC OPTIONAL  

                                                                                               99  

----------------------- Page 104-----------------------

                                                                                   DL/T 698.45—201X  

      }  

4     数据更新（参数）                               数据、数据MAC 先发给ESAM 验证,验证成功后,再设置到终端、 
      参数∷=structure                           电能表中。  

      {  

        对象标识   OAD,  

        数据       octet-string,  

        数据验证码 SID_MAC  
      }  

5     协商失效 （参数）                                
      参数∷=NULL  
      应答∷=当前日期时间   DateTimeBCD  

6     钱包操作（参数）                               操作类型:0—开户 1—充值 2-退费  
      参数∷=structure                          MAC1 是根据购电金额和购电次数计算的的MAC；MAC2 是根据客户 
      {                                      编号和表号计算的MAC。  
        操作类型   integer,                      开户时,不需要验证客户编号和表号,直接将客户编号和表号写到 
                                             ESAM 的对应文件中；再进行充值操作。  
        购电金额   double-long-unsigned,  

        购电次数   double-long-unsigned,  

        数据验证码 SID_MAC  
      }  

7     密钥更新（参数）                                 
      参数∷=structure  

      {  

        密钥密文   octet-string,  

        数据验证码 SID_MAC  

      }  

8     证书更新（参数）                                 
      参数∷= structure  
      {  
        证书内容  octet-string,  
        安全标识  SID  
      }  

9     设置协商时效 （参数）                              
      参数∷= structure   
      {  
          参数内容  octet-string,  
          安全标识  SID  
      }   

10    钱包初始化（参数）                                
      参数∷=structure  

      {  

        预置金额   double-long-unsigned,  

        数据验证码 SID_MAC  

      }  

11    钱包状态查询（参数）                               
      参数∷=NULL  

      应答∷=structure  

      {  

                                                                                                  100  

----------------------- Page 105-----------------------

                                                                      DL/T 698.45—201X  

        剩余金额   double-long-unsigned,  

        购电次数   double-long-unsigned,  

        客户编号   octet-string,  

        表号       octet-string,  

        数据验证码 SID_MAC  

      }  

      

7.3.22  输入输出设备接口类（class_id=22）  

    输入输出设备接口类定义见表187  。  

                             表187  输入输出设备接口类定义  

                   输入输出设备接口类                                         0…n  

                        属性                                         数据类型  

1．逻辑名                                       （static）             octet-string  

2. 设备对象列表                                   （static）                array  

3. 设备对象数量                                   （static）               unsigned  

4. 配置参数                                     （static）           instance-specific  

                        方法                                         必选/可选  

1．复位                                                                 可选  

2. 执行                                                                可选  

      
    输入输出设备接口类的属性描述见表188  。  

                           表188  输入输出设备接口类属性描述  

编号                  属性                                       说明  

  1   逻辑名                              标记接口类对象实例  

  2   设备对象列表                           输入输出设备对象列表,具体内容由对象实例决定  

  3   设备对象数量                           当前设备对象数量  

  4   配置参数                             具体内容由对象实例决定  

      
    输入输出设备接口类的方法描述见表189  。  

                           表189  输入输出设备接口类方法描述  

编号                  方法                                       说明  

  1   复位（参数）                           通用方法,instance-specific。  

      参数∷=bit-string  

  2   执行（参数）                           通用方法,instance-specific。  
      参数∷=Data  

  

7.3.23  总加组接口类（class_id=23）  

    总加组接口类定义见表190  。  

                                                                                   101  

----------------------- Page 106-----------------------

                                                                         DL/T 698.45—201X  

                                 表190  总加组接口类定义  

                        总加组接口类                                           0…n  

                           属性                                          数据类型  

1．逻辑名                                              （static）           octet-string  

2．总加配置表                                            （static）              array  

3．总加有功功率                                           （dyn.）               long64  

4．总加无功功率                                           （dyn.）               long64  

5．总加滑差时间内平均有功功率                                    （dyn.）               long64  

6．总加滑差时间内平均无功功率                                    （dyn.）               long64  

7．总加日有功电量                                          （dyn.）                array  

8．总加日无功电量                                          （dyn.）                array  

9．总加月有功电量                                          （dyn.）                array  

10．总加月无功电量                                         （dyn.）                array  

11．总加剩余电量 （费）                                      （dyn.）               long64  

12．当前功率下浮控控后总加有功功率冻结值                              （dyn.）               long64  

13．总加组滑差时间周期                                       （static）            unsigned  

14．总加组功控轮次配置                                       （dyn.）             bit-string  

15．总加组电控轮次配置                                       （dyn.）             bit-string  

16．总加组控制设置状态                                       （dyn.）              structure  

17．总加组当前控制状态                                       （dyn.）              structure  

18. 换算及单位                                          （static）            structure  

                           方法                                          必选/可选  

1．清空总加配置单元                                                               必选  

2．执行                                                                     可选  

3. 添加一个总加配置单元                                                            可选  

4. 批量添加总加配置单元                                                            可选  

5. 删除一个总加配置单元                                                            可选  

      

    总加组接口类的属性描述见表191  。  

                               表191  总加组接口类属性说明  

编号                   属性                                        说明  

  1   逻辑名                               标记接口类对象实例,使用OI,见7.4    

  2   总加配置表                             总加配置表::=array 总加组配置单元  

                                        总加配置单元∷=structure  

                                         {  

                                          参与总加的分路通信地址  TSA,  

                                          总加标志                   enum{正向 （0）,反向 （1）},  

                                          运算符标志              enum{加 （0）,减 （1）}  

                                         }  

  3   总加有功功率∷= long64                     

  4   总加无功功率∷= long64                     

  5   总加滑差时间内平均有功功率∷= long64              

                                                                                     102  

----------------------- Page 107-----------------------

                                                                      DL/T 698.45—201X  

6    总加滑差时间内平均无功功率∷= long64             

7    总加日有功电量∷=array 电能量                包含总及n 个费率的电能量,规定其第一个数组元素是总电能量, 

     电能量∷= long64                      后面依次排列费率1…n 电能量。  

8    总加日无功电量∷=array 电能量                包含总及n 个费率的电能量,规定其第一个数组元素是总电能量, 

     电能量∷= long64                      后面依次排列费率1…n 电能量。  

9    总加月有功电量∷=array 电能量                包含总及n 个费率的电能量,规定其第一个数组元素是总电能量, 

     电能量∷= long64                      后面依次排列费率1…n 电能量。  

10   总加月无功电量∷=array 电能量                包含总及n 个费率的电能量,规定其第一个数组元素是总电能量, 

     电能量∷= long64                      后面依次排列费率1…n 电能量。  

11   总加剩余电量(费)  ∷= long64               

12   当前功率下浮控控后总加有功功率冻结值   

     ∷= long64  

13   总加组滑差时间周期                         unsigned （单位：分）  

14   总加组功控轮次配置                         功控轮次标识位∷=bit-string （SIZE(8)）  

                                       功控轮次标识位：bit0～bit7 按顺序对位表示第1～第8 轮次开关 

                                       的受控设置,置“1”表示该轮次开关受控,置“0”表示不受控  

15   总加组电控轮次配置                         功控轮次标识位∷=bit-string （SIZE(8)）  

                                       功控轮次标识位：bit0～bit7 按顺序对位表示第1～第8 轮次开关 

                                       的受控设置,置“1”表示该轮次开关受控,置“0”表示不受控  

16   总加组控制设置状态                         总加组控制设置状态∷=structure  

                                       {  

                                        时段控定值方案号    unsigned,  

                                        功控时段有效标志位  bit-string(SIZE(8)),  

                                        功控状态            PCState,  

                                        电控状态            ECState,  

                                        功控轮次状态        TrunState,  

                                        电控轮次状态        TrunState  

                                       }  

                                       时段控定值方案号：表示所投入的功控定值方案号。  

                                       功控时段有效标志位：bit0～bit7 按顺序对位表示1～8 时段控投 

                                       入的有效时段,置“1”：有效,置“0”：无效  

                                       PCState::=bit-string(SIZE(8))  

                                       bit0～bit7 按顺序对位表示；置“1”：投入,置“0”：解除；  

                                       bit0：时段控  

                                       bit1：厂休控  

                                       bit2：营业报停控  

                                       bit3：当前功率下浮控  

                                       bit4～bit7：备用。  

                                       ECState::=bit-string(SIZE(8))  

                                       bit0～bit7 按顺序对位表示；置“1”：投入,置“0”：解除；  

                                       bit0：月电控  

                                       bit1：购电控  

                                                                                   103  

----------------------- Page 108-----------------------

                                                                           DL/T 698.45—201X  

                                         bit2～bit7：备用  

                                         TrunState∷=bit-string(SIZE(8))  

                                         bit0～bit7 按顺序对位表示1～8 轮次开关的受控状态；置“1”： 

                                         受控,置“0”：不受控。  

17   总加组当前控制状态                           当前控制状态∷=structure  

                                         {  

                                             当前功控定值             long64 （单位：W 换算：-1）,       

                                             当前功率下浮控浮动系数   integer （单位：%）,  

                                             功控跳闸输出状态         OutputState,  

                                             月电控跳闸输出状态       OutputState,  

                                             购电控跳闸输出状态       OutputState,  

                                             功控越限告警状态         PCAlarmState,  

                                             电控越限告警状态         ECAlarmState  

                                         }  

                                         OutputState∷=bit-string(SIZE(8))  

                                         bit0～bit7 分别表示终端1～8 轮次跳闸输出状态,置“1”：处于 

                                         跳闸状态,置“0”：未处于跳闸状态。  

                                         PCAlarmState ∷=bit-string(SIZE(8))  

                                         按顺序对位表示；置“1”：处于某种功控越限告警状态；置“0”： 

                                         未处于相应状态；  

                                         bit0：时段控  

                                         bit1：厂休控  

                                         bit2：营业报停控  

                                         bit3：当前功率下浮控  

                                         bit4～bit7：备用。  

                                         ECAlarmState ∷=bit-string (SIZE(8))  

                                         置“1”：处于某种电控越限告警状态；置“0”：未处于相应状态；  

                                         bit0：月电控  

                                         bit1：购电控  

                                         bit2～bit7：备用。  

18   换算及单位::=structure                   Scaler_Unit 见6.3.3.20  。  

      {                                    

       属性3 单位换算   Scaler_Unit,           属性3 单位换算::=单位：W,换算：-1  

       属性4 单位换算   Scaler_Unit,           属性4 单位换算::=单位：var,换算：-1  

       属性5 单位换算   Scaler_Unit,           属性5 单位换算::=单位：W,换算：-1  

       属性6 单位换算   Scaler_Unit,           属性6 单位换算::=单位：var,换算：-1  

       属性7 单位换算   Scaler_Unit,           属性7 单位换算::=单位：kWh,换算：-4  

       属性8 单位换算   Scaler_Unit,           属性8 单位换算::=单位：kvarh,换算：-4  

       属性9 单位换算   Scaler_Unit,           属性9 单位换算::=单位：kWh,换算：-4  

       属性10 单位换算  Scaler_Unit,           属性10 单位换算::=单位：kvarh,换算：-4  

       属性11 单位换算  Scaler_Unit,           属性11 单位换算::=单位：kWh/元,换算：-4  

       属性12 单位换算  Scaler_Unit            属性12 单位换算::=单位：W,换算：-1  

                                                                                        104  

----------------------- Page 109-----------------------

                                                                      DL/T 698.45—201X  

      }  

      
    总加组接口类的方法描述见表192  。  

                              表192  总加组接口类方法说明  

编号                  方法                                       说明  

  1   清空总加配置表(参数)                      清空总加配置表。  

      参数∷=NULL  

  2   执行（参数）                           通用方法,instance-specific。  
      参数∷=Data  

  3   添加一个总加配置单元 （参数）                  在总加配置表中添加一个总加配置单元。  
      参数∷=总加配置单元  

  4   批量添加总加配置单元 （参数）                  在总加配置表中添加若干个总加配置单元。  
      参数∷=array 总加配置单元  

  5   删除一个总加配置单元 （参数）                  删除总加配置表中的一个总加配置单元。  
      参数∷=参与总加的分路通信地址TSA  

  

7.3.24  分项事件对象接口类（class_id=24）  

    本接口类对象提供配置、存储分项事件记录类信息,定义见表193  。  

                             表193  分项事件对象接口类定义  

                  分项事件对象接口类                                         0…n  

                       属性                                         数据类型  

1．逻辑名                                    （static）               octet-string  

2．关联对象属性表                                （static）                  array  

3．当前记录数                                  （dyn.）                   structure  

4．最大记录数                                  （static）               long-unsigned  

5．配置参数                                   （static）                 structure  

6．事件记录表1                                 （dyn.）                    array  

7．事件记录表2                                 （dyn.）                    array  

8．事件记录表3                                 （dyn.）                    array  

9．事件记录表4                                 （dyn.）                    array  

10．当前值记录表                                （dyn.）                    array  

11．上报标识                                  （static）                   bool  

12．有效标识                                  （static）                   bool  

                       方法                                         必选/可选  

1．复位                                                                可选  

2．执行                                                                可选  

3．触发一次记录                                                            可选  

4．添加一个事件关联对象属性                                                      可选  

5．删除一个事件关联对象属性                                                      可选  

      
    分项事件对象接口类属性说明见表194  。  

                           表194  分项事件对象接口类属性说明  

                                                                                   105  

----------------------- Page 110-----------------------

                                                                   DL/T 698.45—201X  

编号                  属性                                     说明  

 1    逻辑名                              标记接口类对象实例,使用OI,见7.4  。  

 2    关联对象属性表∷=array 一个关联的对象 规定生成事件记录时所要关联的n 个对象属性,这些对象属性的 
      属性                               数值将被复制到事件类对象的事件记录中。  
      一个关联的对象属性∷=OAD                   事件关联特征分为四种：事件发生前、事件发生后、事件结束前、 
                                       事件结束后,由OAD 的“属性标识”的“属性特征”的值来区分 
                                       并表示。  

                                       属性特征：  

                                       1：事件发生前  

                                       2：事件发生后  

                                       3：事件结束前  

                                       4：事件结束后  

 3    当前记录数∷=structure                 表示保存在事件记录表中的记录数。调用方法“复位”后,记录 
      {                                表中不包含任何记录,此时当前记录数为零。在每次事件发生执 
        记录表1 当前记录数 long-unsigned,      行记录操作后,当前记录数加1,直到记录数等于最大记录数。  
        记录表2 当前记录数 long-unsigned,  
        记录表3 当前记录数 long-unsigned,  
        记录表4 当前记录数 long-unsigned,  
      }  

 4    最大记录数                            规定事件记录表所允许存放的最多的记录个数,此值大小受物理 
                                       空间限制。  

 5    配置参数∷=structure                  用于配置触发事件记录的判定参数,参数的数据类型依据“逻辑 
      {                                名”决定的对象实例而定义。见A.4  。  
        参数1  instance-specific,  
        …  
        参数n  instance-specific  
      }  

 6    事件记录表1∷=array 分项事件记录单元           用于存储事件记录,记录根据“触发事件配置参数”自动产生或 
      分项事件记录单元∷=structure              执行“触发一次记录”而来。  
      {                                记录的顺序按照事件发生的次序排序,最近发生的事件记录在 
        事件记录序号  double-long-unsigned,  前,即固定按照事件序号的倒序进行排序。缺省值：复位后事件 
        事件发生时间  DatetimeBCD,           记录表为空。  
        事件结束时间  DatetimeBCD,           事件记录序号——单调递增。  
        事件记录状态  bit-string （SIZE(8)）,  事件记录状态——按bit 位对应每一个上行通道,为0 表示未读 
        第1 个关联对象属性的数据  Data,           取或未上报；为1 表示已确认读取或上报。  
        …                              关联对象属性的数据——其排列次序和个数n,由本对象的属性 
        第n 个关联对象属性的数据  Data            2 决定。  
      }                                对应总或第一象限相关事件记录表。  

 7    事件记录表2∷=array 分项事件记录单元           对应A 相或第二象限相关事件记录表。  

 8    事件记录表3∷=array 分项事件记录单元           对应B 相或第三象限相关事件记录表。  

 9    事件记录表4∷=array 分项事件记录单元           对应C 相或第四象限相关事件记录表。  

 10   当前值记录表∷=array 当前值                包含事件发生的次数以及累计时间。  
      当前值∷=structure                   事件发生次数——单位：次  
      {                                事件累计时间——单位：秒  
       累计时间及发生次数  structure             
       {  
         事件发生次数 double-long-unsigned,  
         事件累计时间 double-long-unsigned  

                                                                               106  

----------------------- Page 111-----------------------

                                                                           DL/T 698.45—201X  

        }  
       }  

  11   上报标识∷=bool                          True,  发生事件立即上报；  
                                           False,不上报。  

  12   有效标识∷=bool                            

  
    分项事件对象接口类方法说明见表195  。  

                             表195  分项事件对象接口类方法说明  

编号                    方法                                          说明  

  1    复位（参数）                              通用方法,instance-specific。  
       参数∷=integer （0）  

  2    执行（参数）                              通用方法,instance-specific。  
       参数∷=Data  

  3    触发一次记录（事件发生源,参数）                    根据延时时间（参数）触发执行一次事件记录操作。  
       事件发生源∷=instance-specific            参数——延时执行的时间,单位：秒,0 表示立即执行（无延时）。  
       参数∷=long-unsigned 延时执行的时间  

  4    添加一个事件关联对象属性（参数）                    在属性“关联对象属性表”中,增加一个关联对象属性。  
       参数∷=OAD 对象属性描述符                     参数——对象属性描述符。  

  5    删除一个事件关联对象属性（参数）                    在属性“关联对象属性表”中,删除一个关联对象属性。  
       参数∷=OAD 对象属性描述符                     参数——对象属性描述符。  

      

7.3.25  无线公网通信接口类（class_id=25）  

    无线公网通信接口类定义见表196  。  

                               表196  无线公网通信接口类定义  

                   无线公网通信接口类                                            0…n  

                         属性                                           数据类型  

1.逻辑名                                       （static）                octet-string  

2.通信配置                                      （static）                  structure  

3.主站通信参数表                                   （static）                   array  

4.短信通信参数                                    （static）                  structure  

5．版本信息                                      （static）                  structure  

6.支持规约列表                                    （static）                   array  

7. SIM 卡的ICCID                              （static）           visible-string(SIZE(20))  

8. IMSI                                     （static）           visible-string(SIZE(15))  

9. 信号强度                                     （dyn）                  long,单位：dBm  

10. SIM 卡号码                                 （dyn.）             visible-string(SIZE(16))  

11. 拨号IP                                    （dyn）                   octet-string  

                         方法                                           必选/可选  

1．复位                                                                    可选  

      
    无线公网通信接口类属性说明见表197  。  

                             表197  无线公网通信接口类属性说明  

                                                                                        107  

----------------------- Page 112-----------------------

                                                                                      DL/T 698.45—201X  

编号                       属性                                                说明  

  1    逻辑名                                       标记接口类对象实例,使用OI,见7.4  。  

  2    通信配置                                      通信配置∷=structure  

                                                 {  

                                                   工作模式  enum{混合模式 （0）,客户机模式 （1）,服务器模 

                                                 式 （2）},  

                                                   在线方式  enum{永久在线 （0）,被动激活 （1）},  

                                                   连接方式  enum{TCP （0）,UDP （1）},  

                                                   连接应用方式enum{主备模式 （0）,多连接模式 （1）}  

                                                   APN       visible-string,  

                                                   用户名    visible-string,  

                                                   密码      visible-string,  

                                                   代理服务器地址  octet-string,  

                                                   代理端口  long-unsigned,  

                                                   超时时间及重发次数  bit-string(SIZE(8))  

                                                    （  

                                                      bit7~bit2：超时时间 （秒）,  

                                                      bit1~bit0：重发次数  

                                                   ）,  

                                                   心跳周期(秒)  long-unsigned  

                                                 }  

  3    主站通信参数表                                   主站通信参数表∷=array 主站通信参数  

                                                 主站通信参数：：=structure  

                                                 {  

                                                   IP 地址   octet-string,  

                                                   端口     long-unsigned,  

                                                 }  

  4    短信通信参数                                    短信通信参数：：=structure  

                                                 {  

                                                   短信中心号码     visible-string(SIZE(16)),  

                                                   主站号码         array visible-string(SIZE(16)),  

                                                   短信通知目的号码 array visible-string(SIZE(16))  

                                                 }  

  5    版本信息                                      版本信息∷=structure  

                                                 {  

                                                   厂商代码       visible-string(SIZE  (4)),  

                                                   软件版本号     visible-string(SIZE  (4)),  

                                                   软件版本日期   visible-string(SIZE  (6)),  

                                                   硬件版本号     visible-string(SIZE  (4)),  

                                                   硬件版本日期   visible-string(SIZE  (6)),  

                                                   厂家扩展信息   visible-string(SIZE  (8))  

                                                 }  

  6    支持规约列表                                    设备支持的规约列表,数据格式 arrayvisible-string  

                                                                                                     108  

----------------------- Page 113-----------------------

                                                                           DL/T 698.45—201X  

  7    SIM 卡的ICCID                         visible-string(SIZE(20))  

  8    IMSI                                visible-string(SIZE(15))  

  9    信号强度                                long,单位：dBm  

  10   SIM 卡号码                             visible-string(SIZE(16))  

  11   拨号IP                                octet-string  

  
    无线公网通信接口类方法说明见表198  。  

                             表198  无线公网通信接口类方法说明  

编号                    方法                                          说明  

  1    复位（参数）                              设备复位重启,参数NULL。  
       参数∷=NULL  

      

7.3.26  以太网通信接口类（class_id=26）  

    以太网通信接口类定义见表199  。  

                                表199  以太网通信接口类定义  

                    以太网通信接口类                                             0…n  

                         属性                                            数据类型  

1.逻辑名                                       （static）                 octet-string  

2.通信配置                                      （static）                  structure  

3.主站通信参数表                                   （static）                    array  

4.终端IP                                      （static）                  structure  

5.MAC 地址                                    （static）                 octet-string  

                         方法                                           必选/可选  

1．复位                                                                     可选  

      
    以太网通信接口类属性说明见表200  。  

                              表200  以太网通信接口类属性说明  

编号                             属性                                          说明  

  1    逻辑名                                                    标记接口类对象实例,使用OI,见7.4  。  

  2    通信配置∷=structure                                        连接应用方式：  

       {                                                      主备模式： 按主站通信参数表次序依次 

         工作模式  enum{混合模式（0）,客户机模式（1）,服务器模式（2）},  连接主站,只连接一个主站；  

         连接方式  enum{TCP （0）,UDP （1）},                         多连接模式：按照主站通信参数同时连接 
         连接应用方式enum{主备模式 （0）,多连接模式 （1）}                       多个主站。  

         侦听端口列表array long-unsigned,  

         代理服务器地址  octet-string,  

         代理端口  long-unsigned,  

         超时时间及重发次数  bit-string(SIZE(8))  

         （  

                                                                                        109  

----------------------- Page 114-----------------------

                                                                                DL/T 698.45—201X  

            bit7~bit2：超时时间 （秒）,  

            bit1~bit0：重发次数  

         ）,  

         心跳周期(秒)  long-unsigned  

       }  

  3    主站通信参数表∷=array 主站通信参数                                       

       主站通信参数：：=structure  

       {  

         IP 地址  octet-string,  

         端口     long-unsigned  

       }  

  4    网络配置∷=structure                                            IP 配置方式选择DHCP 时,终端IP 无需 
                                                                 设置；动态获取的IP 地址可以读取；  
       {  

         IP 配置方式enum{DHCP （0）,静态 （1）,PPPoE （2）},  

         IP 地址       octet-string,  

         子网掩码     octet-string,  

         网关地址     octet-string,  

         PPPoE 用户名  octet-string,  

         PPPoE 密码    octet-string  

       }  

  5    MAC 地址::=octet-string                                       

  
     以太网通信接口类方法说明见表201  。  

                                表201  以太网通信接口类方法说明  

编号                      方法                                            说明  

  1    复位（参数）                                 设备复位重启,参数NULL。  
       参数∷=NULL  

      

7.4  对象标识  

7.4.1  对象标识格式定义  

    对象标识（OI）由两字节组成,采用分类编码的方式为系统的各个对象提供标识码,其格式定义见 
图25  。对象标识的编码用十六进制数表示。凡未定义的对象标识编码皆作为保留。  
                                   OIA                      OIB  

                             OIA1        OIA2         OIB1        OIB2  

                                 第1 字节                    第2 字节  

                                  图25  对象标识（OI）格式定义  

7.4.2  电能量类对象标识  

     电能量类对象的标识定义见表202  。  

                                  表202  电能量类对象标识定义  

                                                                                              110  

----------------------- Page 115-----------------------

                                                                     DL/T 698.45—201X  

                                     对象标识（OI）  

        OIA1                  OIA2                  OIB1                  OIB2  

0H：电能量                0H：总                  0H：组合有功               0H：合相  

                      1H：基波                 1H：正向有功               1H：A 相  

                      2H：谐波                 2H：反向有功               2H：B 相  

                                            3H：组合无功1              3H：C 相  

                                            4H：组合无功2                

                                            5H：第一象限  

                                            6H：第二象限  

                                            7H：第三象限  

                                            8H：第四象限  

                                            9H：正向视在  

                                            AH：反向视在  

                      3H：铜损                 0H：总有功  

                      4H：铁损                   

                      5H：关联  

  

7.4.3  最大需量类对象标识  

    最大需量类对象的标识定义见表203  。  

                             表203  最大需量类对象标识定义  

                                     对象标识（OI）  

        OIA1                  OIA2                  OIB1                  OIB2  

1H：需量                 0H：当前                 0H：组合有功               0H：合相  

                      1H：冻结周期内              1H：正向有功               1H：A 相   

                                            2H：反向有功               2H：B 相  

                                            3H：组合无功1              3H：C 相   

                                            4H：组合无功2                

                                            5H：第一象限  

                                            6H：第二象限  

                                            7H：第三象限  

                                            8H：第四象限  

                                            9H：正向视在  

                                            AH：反向视在  

      

7.4.4  变量类对象标识  

    变量类对象的标识定义见表204  。  

                               表204  变量类对象标识定义  

                                     对象标识（OI）  

                                                                                  111  

----------------------- Page 116-----------------------

                                                                    DL/T 698.45—201X  

        OIA1                  OIA2                 OIB1                 OIB2  

2H：变量                0H：计量                 00H：电压  

                                           01H：电流  

                                           02H：电压相角  

                                           03H：电压电流相角  

                                           04H：有功功率  

                                           05H：无功功率  

                                           06H：视在功率  

                                           07H：一分钟平均有功功率  

                                           08H：一分钟平均无功功率  

                                           09H：一分钟平均视在功率  

                                           0AH：功率因数  

                                           0BH：电压波形失真度  

                                           0CH：电流波形失真度  

                                           0DH：电压谐波含有量（总及2…n 次）  

                                           0EH：电流谐波含有量（总及2…n 次）  

                                           0FH：电网频率  

                                           10H：表内温度  

                                           11H：时钟电池电压  

                                           12H：停电抄表电池电压  

                                           13H：时钟电池工作时间  

                                           14H：电能表运行状态字  

                                           15H: 对称密钥状态字   

                                           16H: 终端证书状态字  

                                           17H: 当前有功需量   

                                           18H: 当前无功需量   

                                           19H: 当前视在需量   

                                           1AH: 当前电价  

                                           1BH: 当前费率电价  

                                           1CH: 当前阶梯电价  

                                           1DH: 安全认证剩余时长  

                                           1EH: 事件发生时间   

                                           20H: 事件结束时间  

                                           21H: 数据冻结时间  

                                           22H: 事件记录序号  

                                           23H: 冻结记录序号  

                                           24H: 事件发生源  

                                           25H: 事件当前值  

                                           26H: 电压不平衡率   

                                           27H: 电流不平衡率   

                                           28H: 负载率  

                                           29H: 安时值   

                                                                                112  

----------------------- Page 117-----------------------

                                             DL/T 698.45—201X  

                     2CH:  （当前）钱包文件  

                     2DH:  （当前）透支金额  

                     2EH：累计购电金额  

                     2FH：电能表主动上报  

                     31H: 月度用电量  

                     32H: 阶梯结算用电量  

                     40H：控制命令执行状态字  

                     41H：控制命令错误状态字  

1H：统计                00H：分钟区间统计  

                     01H：小时区间统计  

                     02H：日区间统计  

                     03H：月区间统计  

                     04H：年区间统计  

                     10H：分钟平均  

                     11H：小时平均  

                     12H：日平均  

                     13H：月平均  

                     14H：年平均  

                     20H：分钟极值  

                     21H：小时极值  

                     22H：日极值  

                     23H：月极值  

                     24H：年极值  

                     30H：总电压合格率  

                     31H：A 相电压合格率  

                     32H：B 相电压合格率  

                     33H：C 相电压合格率  

                     40H：日最大有功功率及发生时间  

                     41H：月最大有功功率及发生时间  

2H：采集                00H：通信流量  

                     03H: 供电时间  

                     04H: 复位次数  

3H：总加组               01H：总加组1  

                     02H：总加组2  

                     03H：总加组3  

                     04H：总加组4  

                     05H：总加组5  

                     06H：总加组6  

                     07H：总加组7  

                     08H：总加组8  

4H：脉冲计量              01H：脉冲计量点1  

                     02H：脉冲计量点2  

                                                         113  

----------------------- Page 118-----------------------

                                                                     DL/T 698.45—201X  

                                            03H：脉冲计量点3  

                                            04H：脉冲计量点4  

                                            05H：脉冲计量点5  

                                            06H：脉冲计量点6  

                                            07H：脉冲计量点7  

                                            08H：脉冲计量点8  

                      5H:水气热                00H: 累计水（热）流量  

                                            01H: 累计气流量   

                                            02H: 累计热量   

                                            03H: 热功率   

                                            04H: 累计工作时间   

                                            05H: 水温   

                                            06H:  （仪表）状态ST  

      

7.4.5  事件类对象标识  

    事件类对象的标识定义见表205  。  

                               表205  事件类对象标识定义  

                                     对象标识（OI）  

        OIA1                  OIA2                  OIB1                  OIB2  

3H：事件                 0H：电能表                00H：失压   

                                            01H：欠压  

                                            02H：过压  

                                            03H：断相  

                                            04H：失流   

                                            05H：过流  

                                            06H：断流  

                                            07H：潮流反向  

                                            08H：过载  

                                            09H：正向有功需量超限  

                                            0AH：反向有功需量超限  

                                            0BH：无功需量超限  

                                            0CH：功率因数超下限  

                                            0DH：全失压  

                                            0EH：辅助电源掉电  

                                            0FH：电压逆相序  

                                            10H：电流逆相序  

                                            11H：掉电   

                                            12H：编程   

                                            13H：清零  

                                            14H：需量清零  

                                                                                  114  

----------------------- Page 119-----------------------

                                             DL/T 698.45—201X  

                     15H：事件清零  

                     16H：校时  

                     17H：时段表编程  

                     18H：时区表编程  

                     19H：周休日编程  

                     1AH：结算日编程  

                     1BH：开盖  

                     1CH：开端钮盒  

                     1DH：电压不平衡  

                     1EH：电流不平衡  

                     1FH：跳闸  

                     20H：合闸  

                     21H：节假日编程  

                     22H：有功组合方式编程  

                     23H：无功组合方式编程  

                     24H：费率参数表编程  

                     25H：阶梯表编程  

                     26H：密钥更新  

                     27H：异常插卡  

                     28H：购电记录  

                     29H：退费记录  

                     2AH：恒定磁场干扰记录  

                     2BH：负荷开关误动作  

                     2CH：电源异常  

                     2DH：电流严重不平衡  

                     2EH：时钟故障  

                     2FH：计量芯片故障  

1H：采集                00H：终端初始化  

                     01H：终端版本变更  

                     04H：状态量变位  

                     05H：电能表时钟超差  

                     06H：终端停/上电  

                     07H：直流模拟量越上限  

                     08H：直流模拟量越下限  

                     09H：消息认证错误  

                     0AH：终端故障记录  

                     0BH：电能表示度下降  

                     0CH：电能量超差  

                     0DH：电能表飞走  

                     0EH：电能表停走  

                     0FH：抄表失败  

                     10H：月通信流量超限  

                                                        115  

----------------------- Page 120-----------------------

                                                                DL/T 698.45—201X  

                                        11H：发现未知电能表  

                                        12H：跨台区电能表事件  

                                        14H：终端对时事件  

                                        15H：遥控跳闸记录  

                                        16H：有功总电能量差动越限事件记录  

                                        17H：输出回路开关接入状态变位记录  

                                        18H：终端编程记录  

                                        19H：终端电流回路异常事件  

                                        1AH：电能表在网状态切换事件  

3H：事件               2H：总加组              00H：功控跳闸记录  

                                        01H：电控跳闸记录  

                                        02H：购电参数设置记录  

                                        03H：电控告警事件记录  

                    3H：通用               00H：事件记录状态  

                                        01H：标准事件记录单元  

                                        02H：编程记录事件单元  

                                        03H：发现未知电能表事件单元  

                                        04H：跨台区电能表事件单元  

                                        05H：功控跳闸记录单元  

                                        06H：电控跳闸记录单元  

                                        07H：电控告警事件单元  

                                        08H：电能表需量超限事件单元  

                                        09H：停上电事件单元  

                                        0AH：遥控事件记录单元  

                                        0BH：有功总电能量差动越限事件记录单元  

                                        0BH：事件清零事件记录单元  

     

7.4.6  参变量类对象标识  

    参变量类对象的标识定义见表206  。  

                            表206  参变量类对象标识定义  

                                  对象标识（OI）  

        OIA1                OIA2                OIB1                OIB2  

4H：参变量              0H：通用               00H：日期时间  

                                        01H：通信地址  

                                        02H：表号  

                                        03H：客户编号  

                                        04H：设备地理位置  

                                        05H：组地址  

                                        O6H：时钟源  

                                        07H: LCD 参数  

                                                                           116  

----------------------- Page 121-----------------------

                                          DL/T 698.45—201X  

                   08H: 两套时区表切换时间  

                   09H：两套日时段表切换时间  

                   0AH：两套分时费率切换时间  

                   0BH：两套阶梯电价切换时间  

                   0CH：时区时段数  

                   0DH：阶梯数  

                   0EH：谐波分析次数  

                   0FH：密钥总条数  

                    10H：计量原件数  

                    11H：公共假日  

                    12H：周休日特征字  

                    13H：周休日采用的日时段表号  

                    14H：当前套时区表  

                    15H：备用套时区表  

                    16H：当前套日时段表  

                    17H：备用套日时段表  

                    18H：当前套费率电价  

                    19H：备用套费率电价  

                    1AH：当前套阶梯电价  

                    1BH：备用套阶梯电价  

                    1CH：电流互感器变比  

                    1DH：电压互感器变比  

                    1EH：报警金额限值  

                    1FH：其它金额限值  

                   20H：报警电量限值  

                   21H：其它电量限值  

                   22H：插卡状态字  

                   23H：认证有效时长  

                    30H：电压合格率参数  

1：计量               00H：最大需量周期  

                   01H：滑差时间  

                   02H：校表脉冲宽度  

                   03H：资产管理编码  

                   04H：额定电压  

                   05H：额定电流/基本电流  

                   06H：最大电流  

                   07H：有功准确度等级  

                   08H：无功准确度等级  

                   09H：电能表有功常数  

                   0AH：电能表无功常数  

                   0BH：电能表型号  

                   0CH：ABC 各相电导系数  

                                                     117  

----------------------- Page 122-----------------------

                                                                 DL/T 698.45—201X  

                                         0DH：ABC 各相电抗系数  

                                         0EH：ABC 各相电阻系数  

                                         0FH：ABC 各相电纳系数  

                                         10H：电能表运行特征字1  

                                         11H：软件备案号  

                                         12H：有功组合方式特征字  

                                         13H：无功组合方式1 特征字  

                                         14H：无功组合方式2 特征字  

                                         15H：IC 卡  

                                         16H：结算日   

                                         17H：期间需量冻结周期  

                     2H：采集               00H：路由表  

                                         01H：路由信息单元  

                                         02H：级联通信数据  

                                         04H：终端广播校时时间  

                     3H：设备               00H：集中器  

                                         01H：路由模块  

                                         02H：远程通信模块  

                                         03H：专变终端  

                                         04H：控制模块  

                                         05H：采集器  

                                         06H：电能表  

                                         07H：水表  

                                         08H：气表  

                                         09H：热表  

                     4H：应用连接             00H：应用连接  

                                         01H：安全认证密码  

4H：参变量               5H：远程通信模块           00H：公网远程通信模块1  

                                         01H：公网远程通信模块2  

                                         10H：以太网通信模块1  

                                         11H：以太网通信模块2  

                                         12H：以太网通信模块3  

                                         13H：以太网通信模块4  

                                         14H：以太网通信模块5  

                                         15H：以太网通信模块6  

                                         16H：以太网通信模块7  

                                         17H：以太网通信模块8  

      

7.4.7  冻结类对象标识  

    冻结类对象的标识定义见表207  。  

                             表207  冻结类对象标识定义  

                                                                             118  

----------------------- Page 123-----------------------

                                                                 DL/T 698.45—201X  

                                   对象标识（OI）  

        OIA1                 OIA2                OIB1                 OIB2  

5H：冻结                0H：通用               00H：瞬时冻结  

                                         01H：秒冻结  

                                         02H：分钟冻结  

                                         03H：小时冻结  

                                         04H：日冻结  

                                         05H：结算日冻结  

                                         06H：月冻结  

                                         07H：年冻结  

                                         08H：时区表切换冻结  

                                         09H：日时段表切换冻结  

                                         0AH：费率电价切换冻结  

                                         0BH：阶梯切换冻结  

                                         10H：电压合格率月冻结  

                                         11H：阶梯结算冻结  

      

7.4.8  采集监控类对象标识  

    采集监控类对象的标识定义见表208  。  

                           表208  采集监控类对象标识定义  

                                   对象标识（OI）  

        OIA1                 OIA2                OIB1                 OIB2  

6H：采集监控              0H：终端               00H：采集档案配置表  

                                         01H：采集档案配置单元  

                                         02H：搜表  

                                         03H：一个搜表结果  

                                         04H：一个跨台区结果  

                                         12H：任务配置表  

                                         13H：任务配置单元  

                                         14H：普通采集方案集合  

                                         15H：普通采集方案  

                                         16H：事件采集方案集合  

                                         17H：事件采集方案  

                                         18H：透明方案集合  

                                         19H：透明方案  

                                         1AH：透明方案结果集  

                                         1BH：一个透明方案结果  

                                         1CH：上报方案集合  

                                         1DH：上报方案  

                                         1EH：采集规则库  

                                                                             119  

----------------------- Page 124-----------------------

                                                                 DL/T 698.45—201X  

                                         1FH：采集规则  

                                         32H：采集状态集  

                                         33H：一个采集状态  

                                         34H：采集任务监控集  

                                         35H：采集任务监控单元  

                                         40H：采集启动时标  

                                         41H：采集成功时标  

                                         42H：采集存储时标  

                                         51H：实时监控采集方案集  

                                         52H：实时监控采集方案  

      

7.4.9  集合类对象标识  

    集合类对象的标识定义见表209  。  

                             表209  集合类对象标识定义  

                                   对象标识（OI）  

        OIA1                 OIA2                OIB1                 OIB2  

7H：集合                0H：通用               00H：文件集合  

                                         01H：文件  

                                         10H：脚本集合  

                                         11H：脚本  

                                         12H：脚本执行结果集  

                                         13H：一个脚本执行结果  

                     1H：用户扩展             00：变量类集合  

                                         01：参变量集合  

      

7.4.10  控制类对象标识  

    控制类对象的标识定义见表210  。  

                        表210  控制类对象标识及对应接口类定义  

                                   对象标识（OI）  

        OIA1                 OIA2              OIB1                 OIB2  

8H：控制                0H：通用               00H：遥控   

                                         01H：保电   

                                         02H：催费告警  

                                         03H：一般中文信息  

                                         04H：重要中文信息  

                     1H：终端               00H：终端保安定值  

                                         01H：终端功控时段  

                                         02H：功控轮次告警时间  

                                                                             120  

----------------------- Page 125-----------------------

                                                                  DL/T 698.45—201X  

                                          03H：时段功控  

                                          04H：厂休控  

                                          05H：营业报停控  

                                          06H：当前功率下浮控  

                                          07H：购电控  

                                          08H：月电控  

                                          09H：时段功控配置单元  

                                          0AH：厂休控配置单元  

                                          0BH：营业报停控配置单元  

                                          0CH：购电控配置单元  

                                          0DH：月电控配置单元   

                                          0EH：控制对象  

                                          0FH：跳闸轮次  

                                          10H：电控定值  

      

7.4.11  文件传输类对象标识  

    文件传输类对象的标识定义见表211  。  

                            表211  文件传输类对象标识定义  

                                   对象标识（OI）  

        OIA1                 OIA2                 OIB1                 OIB2  

FH：其他                0H：文件传输              00H：分帧传输管理  

                                          01H：分块传输管理  

                                          02H：扩展传输管理  

      

7.4.12  ESAM 接口类对象标识  

    ESAM接口类对象的标识定义见表212  。  

                           表212  ESAM 接口类对象标识定义  

                                   对象标识（OI）  

        OIA1                 OIA2                 OIB1                 OIB2  

FH：其他                1H：安全                00H：ESAM  

                                          01H: 安全模式参数  

      

7.4.13  输入输出设备接口类对象标识  

    输入输出设备接口类对象的标识定义见表213  。  

                        表213  输入输出设备接口类对象标识定义  

                                   对象标识（OI）  

                                                                              121  

----------------------- Page 126-----------------------

                                                                    DL/T 698.45—201X  

        OIA1                  OIA2                 OIB1                 OIB2  

FH：其他                2H：输入输出设备             00H：RS232  

                                           01H：RS485  

                                           02H：红外  

                                           03H：开关量输入  

                                           04H：直流模拟量  

                                           05H：继电器输出  

                                           06H：告警输出  

                                           07H：多功能端子  

                                           09H：载波/微功率无线接口  

                                           0AH：脉冲输入设备  

                                           0BH：蓝牙  

      

7.4.14  显示类对象标识  

    显示类对象的标识定义见表214  。  

                              表214  显示类对象标识定义  

                                    对象标识（OI）  

        OIA1                  OIA2                 OIB1                 OIB2  

FH：其他                 3H：显示                00H：自动轮显  

                                           01H: 按键轮显  

7.4.15  厂家自定义对象  

    显示类对象的标识定义见表215  。  

                              表215  显示类对象标识定义  

                                    对象标识（OI）  

        OIA1                  OIA2                 OIB1                 OIB2  

FH：其他                FH：厂家自定义                

      

7.5  接口类管理  

7.5.1  接口类标识划分  

    接口类标识码取值范围为1—255,其中：  

    a)  1—200 由电力行业电测量标准化技术委员会定义；  
    b)  201—220 留作制造商专属接口类；  
    c)  221—255 留作用户集团专属接口类。  

7.5.2  接口类维护  

                                                                                122  

----------------------- Page 127-----------------------

                                                               DL/T 698.45—201X  

   接口类不接受修订以及版本的替代,对现有接口类作任何修改之后,都必须创建一个新的接口类, 
旧的接口类将不再使用但并不撤销,仅保持对旧版本的兼容。  

7.5.3  创建接口类  

    每创建一个新接口类,都应进行存档。  

7.5.4  撤销接口类  

    除应用连接对象外,任何其它接口类的对象并非都是必需的。因此,即使是未使用的接口类也不应 
从标准中撤消,应保留它们以确保与已有的可能实现相兼容。  
     
     

                                                                          123  

----------------------- Page 128-----------------------

                                                                          DL/T 698.45—201X  
                                         A     A   

                                         附  录  A  
                                       （规范性附录）  
                                       对象标识定义  

A.1  电能量类对象  

    有关电能量类的对象标识定义见表A.1  。  

                                表A.1  电能量类对象标识定义  

对象标识   接口类               对象名称                           实例的对象属性及方法定义  

   OI      IC  

 0000      1     组合有功电能                    电能量∷=double-long；单位：kWh,换算：-2  

 0010      1     正向有功电能                    电能量∷=double-long-unsigned；单位：kWh,换算：-2  

 0011      1     A 相正向有功电能                 电能量∷=double-long-unsigned；单位：kWh,换算：-2  

 0012      1     B 相正向有功电能                 电能量∷=double-long-unsigned；单位：kWh,换算：-2  

 0013      1     C 相正向有功电能                 电能量∷=double-long-unsigned；单位：kWh,换算：-2  

 0020      1     反向有功电能                    电能量∷=double-long-unsigned；单位：kWh,换算：-2  

 0021      1     A 相反向有功电能                 电能量∷=double-long-unsigned；单位：kWh,换算：-2  

 0022      1     B 相反向有功电能                 电能量∷=double-long-unsigned；单位：kWh,换算：-2  

 0023      1     C 相反向有功电能                 电能量∷=double-long-unsigned；单位：kWh,换算：-2  

 0030      1     组合无功1 电能                  电能量∷=double-long；单位：kvarh,换算：-2  

 0031      1     A 相组合无功1 电能               电能量∷=double-long；单位：kvarh,换算：-2  

 0032      1     B 相组合无功1 电能               电能量∷=double-long；单位：kvarh,换算：-2  

 0033      1     C 相组合无功1 电能               电能量∷=double-long；单位：kvarh,换算：-2  

 0040      1     组合无功2 电能                  电能量∷=double-long；单位：kvarh,换算：-2  

 0041      1     A 相组合无功2 电能               电能量∷=double-long；单位：kvarh,换算：-2  

 0042      1     B 相组合无功2 电能               电能量∷=double-long；单位：kvarh,换算：-2  

 0043      1     C 相组合无功2 电能               电能量∷=double-long；单位：kvarh,换算：-2  

 0050      1     第一象限无功电能                  电能量∷=double-long-unsigned；单位：kvarh,换算：-2  

 0051      1     A 相第一象限无功电能               电能量∷=double-long-unsigned；单位：kvarh,换算：-2  

 0052      1     B 相第一象限无功电能               电能量∷=double-long-unsigned；单位：kvarh,换算：-2  

 0053      1     C 相第一象限无功电能               电能量∷=double-long-unsigned；单位：kvarh,换算：-2  

 0060      1     第二象限无功电能                  电能量∷=double-long-unsigned；单位：kvarh,换算：-2  

 0061      1     A 相第二象限无功电能               电能量∷=double-long-unsigned；单位：kvarh,换算：-2  

 0062      1     B 相第二象限无功电能               电能量∷=double-long-unsigned；单位：kvarh,换算：-2  

 0063      1     C 相第二象限无功电能               电能量∷=double-long-unsigned；单位：kvarh,换算：-2  

 0070      1     第三象限无功电能                  电能量∷=double-long-unsigned；单位：kvarh,换算：-2  

 0071      1     A 相第三象限无功电能               电能量∷=double-long-unsigned；单位：kvarh,换算：-2  

 0072      1     B 相第三象限无功电能               电能量∷=double-long-unsigned；单位：kvarh,换算：-2  

                                                                                      124  

----------------------- Page 129-----------------------

                                                                         DL/T 698.45—201X  

0073      1    C 相第三象限无功电能                电能量∷=double-long-unsigned；单位：kvarh,换算：-2  

0080      1    第四象限无功电能                   电能量∷=double-long-unsigned；单位：kvarh,换算：-2  

0081      1    A 相第四象限无功电能                电能量∷=double-long-unsigned；单位：kvarh,换算：-2  

0082      1    B 相第四象限无功电能                电能量∷=double-long-unsigned；单位：kvarh,换算：-2  

0083      1    C 相第四象限无功电能                电能量∷=double-long-unsigned；单位：kvarh,换算：-2  

0090      1    正向视在电能                     电能量∷=double-long-unsigned；单位：kVAh,换算：-2  

0091      1    A 相正向视在电能                  电能量∷=double-long-unsigned；单位：kVAh,换算：-2  

0092      1    B 相正向视在电能                  电能量∷=double-long-unsigned；单位：kVAh,换算：-2  

0093      1    C 相正向视在电能                  电能量∷=double-long-unsigned；单位：kVAh,换算：-2  

00A0      1    反向视在电能                     电能量∷=double-long-unsigned；单位：kVAh,换算：-2  

00A1      1    A 相反向视在电能                  电能量∷=double-long-unsigned；单位：kVAh,换算：-2  

00A2      1    B 相反向视在电能                  电能量∷=double-long-unsigned；单位：kVAh,换算：-2  

00A3      1    C 相反向视在电能                  电能量∷=double-long-unsigned；单位：kVAh,换算：-2  

0110      1    正向有功基波总电能                  电能量∷=double-long-unsigned；单位：kWh,换算：-2  

0111      1    A 相正向有功基波电能                电能量∷=double-long-unsigned；单位：kWh,换算：-2  

0112      1    B 相正向有功基波电能                电能量∷=double-long-unsigned；单位：kWh,换算：-2  

0113      1    C 相正向有功基波电能                电能量∷=double-long-unsigned；单位：kWh,换算：-2  

0120      1    反向有功基波总电能                  电能量∷=double-long-unsigned；单位：kWh,换算：-2  

0121      1    A 相反向有功基波电能                电能量∷=double-long-unsigned；单位：kWh,换算：-2  

0122      1    B 相反向有功基波电能                电能量∷=double-long-unsigned；单位：kWh,换算：-2  

0123      1    C 相反向有功基波电能                电能量∷=double-long-unsigned；单位：kWh,换算：-2  

0210      1    正向有功谐波总电能                  电能量∷=double-long-unsigned；单位：kWh,换算：-2  

0211      1    A 相正向有功谐波电能                电能量∷=double-long-unsigned；单位：kWh,换算：-2  

0212      1    B 相正向有功谐波电能                电能量∷=double-long-unsigned；单位：kWh,换算：-2  

0213      1    C 相正向有功谐波电能                电能量∷=double-long-unsigned；单位：kWh,换算：-2  

0220      1    反向有功谐波总电能                  电能量∷=double-long-unsigned；单位：kWh,换算：-2  

0221      1    A 相反向有功谐波电能                电能量∷=double-long-unsigned；单位：kWh,换算：-2  

0222      1    B 相反向有功谐波电能                电能量∷=double-long-unsigned；单位：kWh,换算：-2  

0223      1    C 相反向有功谐波电能                电能量∷=double-long-unsigned；单位：kWh,换算：-2  

0300      1    铜损有功总电能补偿量                 电能量∷=double-long-unsigned；单位：kWh,换算：-2  

0301      1    A 相铜损有功电能补偿量               电能量∷=double-long-unsigned；单位：kWh,换算：-2  

0302      1    B 相铜损有功电能补偿量               电能量∷=double-long-unsigned；单位：kWh,换算：-2  

0303      1    C 相铜损有功电能补偿量               电能量∷=double-long-unsigned；单位：kWh,换算：-2  

0400      1    铁损有功总电能补偿量                 电能量∷=double-long-unsigned；单位：kWh,换算：-2  

0401      1    A 相铁损有功电能补偿量               电能量∷=double-long-unsigned；单位：kWh,换算：-2  

0402      1    B 相铁损有功电能补偿量               电能量∷=double-long-unsigned；单位：kWh,换算：-2  

0403      1    C 相铁损有功电能补偿量               电能量∷=double-long-unsigned；单位：kWh,换算：-2  

0500      1    关联总电能                      电能量∷=double-long-unsigned；单位：kWh,换算：-2  

0501      1    A 相关联电能                    电能量∷=double-long-unsigned；单位：kWh,换算：-2  

0502      1    B 相关联电能                    电能量∷=double-long-unsigned；单位：kWh,换算：-2  

0503      1    C 相关联电能                    电能量∷=double-long-unsigned；单位：kWh,换算：-2  

                                                                                      125  

----------------------- Page 130-----------------------

                                                                       DL/T 698.45—201X  

      

A.2  最大需量类对象  

    有关最大需量类的对象标识定义见表A.2  。  

                              表A.2  最大需量类对象标识定义  

对象标识   接口类                      对象名称                          实例的对象属性及方法定义  

   OI      IC  

 1010      2    正向有功最大需量                                 最大需量值∷= double-long-unsigned  

                                                         单位：kW,换算：-4  

 1011      2    A 相正向有功最大需量                              最大需量值∷= double-long-unsigned  

                                                         单位：kW,换算：-4  

 1012      2    B 相正向有功最大需量                              最大需量值∷= double-long-unsigned  

                                                         单位：kW,换算：-4  

 1013      2    C 相正向有功最大需量                              最大需量值∷= double-long-unsigned  

                                                         单位：kW,换算：-4  

 1020      2    反向有功最大需量                                 最大需量值∷= double-long-unsigned  

                                                         单位：kW,换算：-4  

 1021      2    A 相反向有功最大需量                              最大需量值∷= double-long-unsigned  

                                                         单位：kW,换算：-4  

 1022      2    B 相反向有功最大需量                              最大需量值∷= double-long-unsigned  

                                                         单位：kW,换算：-4  

 1023      2    C 相反向有功最大需量                              最大需量值∷= double-long-unsigned   

                                                         单位：kW,换算：-4  

 1030      2    组合无功1 最大需量                               最大需量值∷= double-long  

                                                         单位：kvar,换算：-4  

 1031      2    A 相组合无功1 最大需量                            最大需量值∷= double-long  

                                                         单位：kvar,换算：-4  

 1032      2    B 相组合无功1 最大需量                            最大需量值∷= double-long  

                                                         单位：kvar,换算：-4  

 1033      2    C 相组合无功1 最大需量                            最大需量值∷= double-long  

                                                         单位：kvar,换算：-4  

 1040      2    组合无功2 最大需量                               最大需量值∷= double-long  

                                                         单位：kvar,换算：-4  

 1041      2    A 相组合无功2 最大需量                            最大需量值∷= double-long  

                                                         单位：kvar,换算：-4  

 1042      2    B 相组合无功2 最大需量                            最大需量值∷= double-long  

                                                         单位：kvar,换算：-4  

 1043      2    C 相组合无功2 最大需量                            最大需量值∷= double-long  

                                                         单位：kvar,换算：-4  

 1050      2    第一象限最大需量                                 最大需量值∷= double-long-unsigned  

                                                                                    126  

----------------------- Page 131-----------------------

                                                                      DL/T 698.45—201X  

                                                        单位：kvar,换算：-4  

1051     2     A 相第一象限最大需量                              最大需量值∷= double-long-unsigned  
                                                        单位：kvar,换算：-4  

1052     2     B 相第一象限最大需量                              最大需量值∷= double-long-unsigned  
                                                        单位：kvar,换算：-4  

1053     2     C 相第一象限最大需量                              最大需量值∷= double-long-unsigned  
                                                        单位：kvar,换算：-4  

1060     2     第二象限最大需量                                 最大需量值∷= double-long-unsigned  
                                                        单位：kvar,换算：-4  

1061     2     A 相第二象限最大需量                              最大需量值∷= double-long-unsigned  
                                                        单位：kvar,换算：-4  

1062     2     B 相第二象限最大需量                              最大需量值∷= double-long-unsigned  
                                                        单位：kvar,换算：-4  

1063     2     C 相第二象限最大需量                              最大需量值∷= double-long-unsigned, 
                                                        单位：kvar,换算：-4  

1070     2     第三象限最大需量                                 最大需量值∷= double-long-unsigned  
                                                        单位：kvar,换算：-4  

1071     2     A 相第三象限最大需量                              最大需量值∷= double-long-unsigned  
                                                        单位：kvar,换算：-4  

1072     2     B 相第三象限最大需量                              最大需量值∷= double-long-unsigned  
                                                        单位：kvar,换算：-4  

1073     2     C 相第三象限最大需量                              最大需量值∷= double-long-unsigned  
                                                        单位：kvar,换算：-4  

1080     2     第四象限最大需量                                 最大需量值∷= double-long-unsigned  
                                                        单位：kvar,换算：-4  

1081     2     A 相第四象限最大需量                              最大需量值∷= double-long-unsigned  
                                                        单位：kvar,换算：-4  

1082     2     B 相第四象限最大需量                              最大需量值∷= double-long-unsigned  
                                                        单位：kvar,换算：-4  

1083     2     C 相第四象限最大需量                              最大需量值∷= double-long-unsigned  
                                                        单位：kvar,换算：-4  

1090     2     正向视在最大需量                                 最大需量值∷= double-long-unsigned  
                                                        单位：kVA,换算：-4  

1091     2     A 相正向视在最大需量                              最大需量值∷= double-long-unsigned  
                                                        单位：kVA,换算：-4  

1092     2     B 相正向视在最大需量                              最大需量值∷= double-long-unsigned  
                                                        单位：kVA,换算：-4  

1093     2     C 相正向视在最大需量                              最大需量值∷= double-long-unsigned  
                                                        单位：kVA,换算：-4  

10A0     2     反向视在最大需量                                 最大需量值∷= double-long-unsigned  
                                                        单位：kVA,换算：-4  

10A1     2     A 相反向视在最大需量                              最大需量值∷= double-long-unsigned  

                                                                                   127  

----------------------- Page 132-----------------------

                                                                    DL/T 698.45—201X  

                                                      单位：kVA,换算：-4  

10A2     2    B 相反向视在最大需量                             最大需量值∷= double-long-unsigned  
                                                      单位：kVA,换算：-4  

10A3     2    C 相反向视在最大需量                             最大需量值∷= double-long-unsigned  

                                                      单位：kVA,换算：-4  

1110     2    冻结周期内正向有功最大需量                           最大需量值∷= double-long-unsigned  

                                                      单位：kW,换算：-4  

1111     2    冻结周期内A 相正向有功最大需量                        最大需量值∷= double-long-unsigned  

                                                      单位：kW,换算：-4  

1112     2    冻结周期内B 相正向有功最大需量                        最大需量值∷= double-long-unsigned  

                                                      单位：kW,换算：-4  

1113     2    冻结周期内C 相正向有功最大需量                        最大需量值∷= double-long-unsigned  

                                                      单位：kW,换算：-4  

1120     2    冻结周期内反向有功最大需量                           最大需量值∷= double-long-unsigned  

                                                      单位：kW,换算：-4  

1121     2    冻结周期内A 相反向有功最大需量                        最大需量值∷= double-long-unsigned  

                                                      单位：kW,换算：-4  

1122     2    冻结周期内B 相反向有功最大需量                        最大需量值∷= double-long-unsigned  

                                                      单位：kW,换算：-4  

1123     2    冻结周期内C 相反向有功最大需量                        最大需量值∷= double-long-unsigned   

                                                      单位：kW,换算：-4  

1130     2    冻结周期内组合无功1 最大需量                         最大需量值∷= double-long  

                                                      单位：kvar,换算：-4  

1131     2    冻结周期内A 相组合无功1 最大需量                      最大需量值∷= double-long  

                                                      单位：kvar,换算：-4  

1132     2    冻结周期内B 相组合无功1 最大需量                      最大需量值∷= double-long  

                                                      单位：kvar,换算：-4  

1133     2    冻结周期内冻结周期内C 相组合无功1 最大需量                 最大需量值∷= double-long  

                                                      单位：kvar,换算：-4  

1140     2    冻结周期内组合无功2 最大需量                         最大需量值∷= double-long  

                                                      单位：kvar,换算：-4  

1141     2    冻结周期内A 相组合无功2 最大需量                      最大需量值∷= double-long  

                                                      单位：kvar,换算：-4  

1142     2    冻结周期内B 相组合无功2 最大需量                      最大需量值∷= double-long  

                                                      单位：kvar,换算：-4  

1143     2    冻结周期内C 相组合无功2 最大需量                      最大需量值∷= double-long  

                                                      单位：kvar,换算：-4  

1150     2    冻结周期内第一象限最大需量                           最大需量值∷= double-long-unsigned  

                                                      单位：kvar,换算：-4  

1151     2    冻结周期内A 相第一象限最大需量                        最大需量值∷= double-long-unsigned  

                                                      单位：kvar,换算：-4  

1152     2    冻结周期内B 相第一象限最大需量                        最大需量值∷= double-long-unsigned  

                                                                                 128  

----------------------- Page 133-----------------------

                                                                     DL/T 698.45—201X  

                                                       单位：kvar,换算：-4  

1153     2    冻结周期内C 相第一象限最大需量                         最大需量值∷= double-long-unsigned  

                                                       单位：kvar,换算：-4  

1160     2    冻结周期内第二象限最大需量                            最大需量值∷= double-long-unsigned  

                                                       单位：kvar,换算：-4  

1161     2    冻结周期内A 相第二象限最大需量                         最大需量值∷= double-long-unsigned  

                                                       单位：kvar,换算：-4  

1162     2    冻结周期内B 相第二象限最大需量                         最大需量值∷= double-long-unsigned  

                                                       单位：kvar,换算：-4  

1163     2    冻结周期内C 相第二象限最大需量                         最大需量值∷= double-long-unsigned, 

                                                       单位：kvar,换算：-4  

1170     2    冻结周期内第三象限最大需量                            最大需量值∷= double-long-unsigned  

                                                       单位：kvar,换算：-4  

1171     2    冻结周期内A 相第三象限最大需量                         最大需量值∷= double-long-unsigned  

                                                       单位：kvar,换算：-4  

1172     2    冻结周期内B 相第三象限最大需量                         最大需量值∷= double-long-unsigned  

                                                       单位：kvar,换算：-4  

1173     2    冻结周期内C 相第三象限最大需量                         最大需量值∷= double-long-unsigned  

                                                       单位：kvar,换算：-4  

1180     2    冻结周期内第四象限最大需量                            最大需量值∷= double-long-unsigned  

                                                       单位：kvar,换算：-4  

1181     2    冻结周期内A 相第四象限最大需量                         最大需量值∷= double-long-unsigned  

                                                       单位：kvar,换算：-4  

1182     2    冻结周期内B 相第四象限最大需量                         最大需量值∷= double-long-unsigned  

                                                       单位：kvar,换算：-4  

1183     2    冻结周期内C 相第四象限最大需量                         最大需量值∷= double-long-unsigned  

                                                       单位：kvar,换算：-4  

1190     2    冻结周期内正向视在最大需量                            最大需量值∷= double-long-unsigned  

                                                       单位：kVA,换算：-4  

1191     2    冻结周期内A 相正向视在最大需量                         最大需量值∷= double-long-unsigned  

                                                       单位：kVA,换算：-4  

1192     2    冻结周期内B 相正向视在最大需量                         最大需量值∷= double-long-unsigned  

                                                       单位：kVA,换算：-4  

1193     2    冻结周期内冻结周期内C 相正向视在最大需量                    最大需量值∷= double-long-unsigned  

                                                       单位：kVA,换算：-4  

11A0     2    冻结周期内反向视在最大需量                            最大需量值∷= double-long-unsigned  

                                                       单位：kVA,换算：-4  

11A1     2    冻结周期内A 相反向视在最大需量                         最大需量值∷= double-long-unsigned  

                                                       单位：kVA,换算：-4  

11A2     2    冻结周期内B 相反向视在最大需量                         最大需量值∷= double-long-unsigned  

                                                       单位：kVA,换算：-4  

11A3     2    冻结周期内C 相反向视在最大需量                         最大需量值∷= double-long-unsigned  

                                                                                  129  

----------------------- Page 134-----------------------

                                                                        DL/T 698.45—201X  

                                                          单位：kVA,换算：-4  

    注：组合无功最大需量的正负数是用来标志潮流的方向,组合无功最大需量从参与组合无功电能运算的象限中抽取 

       最大值,如果来自象限3、4,以负数上传。  

  

A.3  变量类对象  

    有关变量类的对象标识定义见表A.3  。  

                                表A.3  变量类对象标识定义  

对象标识   接口类                对象名称                          实例的对象属性及方法定义  

   OI      IC  

 2000      3     电压                        数据类型：long-unsigned,单位：V,换算：-1  

 2001      3     电流                        数据类型：double-long,单位：A 换算：-3  

 2002      3     电压相角                      数据类型：long-unsigned,单位：度,换算：-1  

 2003      3     电压电流相角                    数据类型：long-unsigned,单位：度,换算：-1  

 2004      4     有功功率                      数据类型：double-long,单位：W,换算：-1  

 2005      4     无功功率                      数据类型：double-long,单位：var,换算：-1  

 2006      4     视在功率                      数据类型：double-long,单位：VA,换算：-1  

 2007      4     一分钟平均有功功率                 数据类型：double-long,单位：W,换算：-1  

 2008      4     一分钟平均无功功率                 数据类型：double-long,单位：var,换算：-1  

 2009      4     一分钟平均视在功率                 数据类型：double-long,单位：VA,换算：-1  

  200A     4     功率因数                      数据类型：long,单位：无,换算：-3  

  200B     3     电压波形失真度                   数据类型：long,单位：%,换算：-2  

  200C     3     电流波形失真度                   数据类型：long,单位：%,换算：-2  

  200D     5     电压谐波含有量（总及2…n 次）  数据类型：long,单位：%,换算：-2  

  200E     5     电流谐波含有量（总及2…n 次）  数据类型：long,单位：%,换算：-2  

  200F     6     电网频率                      数据类型：long-unsigned,单位：Hz,换算：-2  

 2010      6     表内温度                      数据类型：long,单位：℃,换算：-1  

 2011      6     时钟电池电压                    数据类型：long-unsigned,单位：V,换算：-2  

 2012      6     停电抄表电池电压                  数据类型：long-unsigned,单位：V 换算：-2  

 2013      6     时钟电池工作时间                  数据类型：double-long-unsigned,单位：分钟,无换算  

 2014      6     电能表运行状态字                  数据类型：array octet-string(SIZE(2)),无单位,无换算, 

                                           包括电能表运行状态字1~7,见附  录  G。  

 2015      6     对称密钥状态字                   数据类型：bit-string(SIZE(64)),无单位,无换算  

 2016      6     证书状态字                     数据类型：bit-string(SIZE(16)),无单位,无换算  

 2017      6     当前有功需量                    数据类型：double-long,单位：kW,换算：-4  

 2018      6     当前无功需量                    数据类型：double-long,单位：kvar,换算：-4  

 2019      6     当前视在需量                    数据类型：double-long,单位：kVA,换算：-4  

  201A     6     当前电价                      数据类型：double-long-unsigned,单位：元/kWh,换算：-4  

  201B     6     当前费率电价                    数据类型：double-long-unsigned,单位：元/kWh,换算：-4  

                                                                                     130  

----------------------- Page 135-----------------------

                                                                            DL/T 698.45—201X  

201C      6     当前阶梯电价                       数据类型：double-long-unsigned,单位：元/kWh,换算：-4  

201D      6     安全认证剩余时长                     数据类型：long-unsigned,单位：分钟,无换算,安全认证 

                                             通过后的剩余有效时间时长,不足1 分钟以1 分钟计  

201E      8     事件发生时间                       数据类型：DateTimeBCD  

2020      8     事件结束时间                       数据类型：DateTimeBCD  

2021      8     数据冻结时间                       数据类型：DateTimeBCD  

2022      8     事件记录序号                       数据类型：double-long-unsigned  

2023      8     冻结记录序号                       数据类型：double-long-unsigned  

2024      8     事件发生源                        具体对象定义。  

2025      8     事件当前值                         structure  
                                              {  
                                               事件发生次数  double-long-unsigned,  
                                               事件累计时间  double-long-unsigned （单位：分钟,无 
                                             换算）  
                                              }  

2026      6     电压不平衡率                       数据类型：long-unsigned,单位：%,换算：-2  

2027      6     电流不平衡率                       数据类型：long-unsigned,单位：%,换算：-2  

2028      6     负载率                          数据类型：long-unsigned,单位：%,换算：-2  

2029      6     安时值                          属性2 安时数值∷=array 相安时值  

                                             相安时值∷=double-long-unsigned,单位：Ah,换算：-2  

                                             相安时值包总、A、B、C 相。  

202C      8      （当前）钱包文件                    数值∷=structure  

                                              {  

                                               剩余金额   double-long-unsigned （单位：元,换算：-2）,  

                                               购电次数   double-long-unsigned  

                                             }  

202D      6      （当前）透支金额                    数据类型：double-long-unsigned,单位：元,换算：-2  

202E      6     累计购电金额                       数据类型：double-long-unsigned,单位：元,换算：-2  

202F      8     电能表主动上报                      属性2 主动上报状态∷=主动上报状态  

                                             主动上报状态∷=structure  

                                              {  

                                               主动上报状态字  bit-string,  

                                               主动上报事件新增次数  array unsigned  

                                             }  

                                             属性3 主动上报模式开关∷=主动上报模式字  

                                             主动上报模式字∷=bit-string  

                                             方法1∷=复位（参数）  

                                             参数∷=bit-string  

2031      6     月度用电量                        属性2 用电量∷=double-long-unsigned,  

                                             单位：kWh,换算：-2  

2032      6     阶梯结算用电量                      属性2 用电量∷=double-long-unsigned,  

                                             单位：kWh,换算：-2  

2040      6     控制命令执行状态字                    数据类型：bit-string(SIZE(16)),无单位,无换算  

                                                                                          131  

----------------------- Page 136-----------------------

                                                                           DL/T 698.45—201X  

2041      6     控制命令错误状态字                   数据类型：bit-string(SIZE(16)),无单位,无换算  

2100     14     分钟区间统计                      统计周期单位为分钟  

2101     14     小时区间统计                      统计周期单位为日  

2102     14     日区间统计                       统计周期单位为日  

2103     14     月区间统计                       统计周期单位为月  

2104     14     年区间统计                       统计周期单位为年  

2110     15     分钟平均                        统计周期单位为分钟  

2111     15     小时平均                        统计周期单位为时  

2112     15     日平均                         统计周期单位为日  

2113     15     月平均                         统计周期单位为月  

2114     15     年平均                         统计周期单位为年  

2120     16     分钟极值                        统计周期单位为分钟  

2121     16     小时极值                        统计周期单位为时  

2122     16     日极值                         统计周期单位为日  

2123     16     月极值                         统计周期单位为月  

2124     16     年极值                         统计周期单位为年  

2130      6     总电压合格率                      属性2 （电压合格率数据）∷=structure  

                                             {  

                                              电压合格时间  double-long-unsigned (单位：分钟,无换 

                                            算),  

                                              电压监测时间  double-long-unsigned (单位：分钟,无换 

                                            算),  

                                              电压合格率   long-unsigned (单位：%,换算：-2),  

                                              电压超限率   long-unsigned (单位：%,换算：-2),  

                                              电压超上限时间  double-long-unsigned (单位：分钟,无 

                                            换算),  

                                              电压超下限时间  double-long-unsigned (单位：分钟,无 

                                            换算)  

                                            }  

2131      6     A 相电压合格率                    同2130。  

2132      6     B 相电压合格率                    同2130。  

2133      6     C 相电压合格率                    同2130。  

2140      2     日最大有功功率及发生时间                最大功率及发生时间∷=structure  

                                             {  

                                              最大功率值 double-long-unsigned,  

                                              发生时间   DatetimeBCD_S  

                                            }  

                                            功率单位：kW,换算：-4  

2141      2     月最大有功功率及发生时间                同2140。  

2200      6     通信流量                        数值∷=structure  

                                             {  

                                              当日通信流量  double-long-unsigned,  

                                                                                        132  

----------------------- Page 137-----------------------

                                                                                       DL/T 698.45—201X  

                                                      当月通信流量  double-long-unsigned  

                                                   }  

                                                   单位：byte,换算：0。  

2203        6     供电时间                             数值∷=structure  

                                                    {  

                                                      日供电累计时间  double-long-unsigned,  

                                                      月供电累计时间  double-long-unsigned  

                                                   }  

                                                   单位：分钟,换算：0。  

2204        6     复位次数                             数值∷=structure  

                                                    {  

                                                      日复位累计次数  long-unsigned,  

                                                      月复位累计次数  long-unsigned  

                                                   }  

2301       23     总加组1                               

2302       23     总加组2                               

2303       23     总加组3                               

2304       23     总加组4                               

2305       23     总加组5                               

2306       23     总加组6                               

2307       23     总加组7                               

2308       23     总加组8                               

2401       12     脉冲计量1                              

2402       12     脉冲计量2                              

2403       12     脉冲计量3                              

2404       12     脉冲计量4                              

2405       12     脉冲计量5                              

2406       12     脉冲计量6                              

2407       12     脉冲计量7                              

2408       12     脉冲计量8                              

                                                                                             3 
2500        6     累计水（热）流量                         数据类型：double-long-unsigned,单位：m ,换算：-4  

                                                     （注：水表和热表共用）  

                                                                                             3 
2501        6     累计气流量                            数据类型：double-long-unsigned,单位：m ,换算：-4  

2502        6     累计热量                             数据类型：double-long-unsigned,单位：J,换算：-2  

2503        6     热功率                              数据类型：double-long-unsigned,单位：J/h,换算：-2  

2504        6     累计工作时间                           数据类型：double-long-unsigned,单位：小时,换算：0  

2505        6     水温                               数值∷=structure  

                                                    {  

                                                      供水温度  double-long-unsigned,  

                                                      回水温度  double-long-unsigned  

                                                   }  

                                                   单位：℃,换算：-2。  

                                                                                                      133  

----------------------- Page 138-----------------------

                                                                              DL/T 698.45—201X  

  2506      6      （仪表）状态ST                    数值∷=structure  

                                                {  

                                                 阀门状态  enum{开 （0）,关 （1）,保留 （2）,异常 （3）},  

                                                 电池电压  enum{正常 （0）,欠压 （0）}  

                                               }  

    注1：三相三线电能表电压A 相为Uab,B 相为0,C 相为Ucb；电流A 相为Ia,B 相为0,C 相为Ic；功率因数A 相 

        为Uab 与Ia 的夹角余弦,B 相为0,C 相为Ucb 与Ic 的夹角余弦；相角A 相为Uab 与Ia 的夹角,B 相为0,C 

        相为Ucb 与Ic 的夹角。  

    注2：电流、有功功率、无功功率、视在功率、功率因数、当前有功需量、当前无功需量、当前视在需量、表内温 

        度按潮流方向分为正负数,正数代表输入,负数代表输出。需量一定意义上也可称作平均功率,因此它与瞬 

         时功率一样有潮流方向的区分。表内温度存在零上和零下的区别,正数为摄氏零上,负数为摄氏零下。  

    注3：相角测量范围是0～360 度。  

    注4 ：当前有功需量、当前无功需量、当前视在需量是最近一段时间的平均功率。  

    注5：组合无功最大需量的正负数是用来标志潮流的方向,组合无功最大需量从参与组合电能运算的象限中抽取最 

        大值,如果来自象限3、4,以负数上传。  

  

A.4  事件类对象  

    有关事件类的对象标识定义见表A.4  。  

                                   表A.4  事件类对象标识定义  

对象标识   接口类                  对象名称                             实例的对象属性及方法定义  

   OI       IC  

  3000      24    电能表失压事件                      属性5 （配置参数）∷=structure  

                                               {  

                                                 电压触发上限  long-unsigned （单位：V,换算：-1）,  

                                                 电压恢复下限  long-unsigned （单位：V,换算：-1）,  

                                                 电流触发下限  double-long （单位：A,换算：-3）,  

                                                 判定延时时间  unsigned （单位：s,换算：0）  

                                               }  

                                               属性12 （失压统计）∷=structure  

                                               {  

                                                  事件发生总次数       double-long-unsigned,  
                                                  事件总累计时间       double-long-unsigned （单位： 
                                               分钟,无换算）,  
                                                  最近一次失压发生时间 DateTimeBCD,  
                                                  最近一次失压结束时间 DateTimeBCD  

                                               }  

  3001      24    电能表欠压事件                      属性5 （配置参数）∷=structure  

                                               {  

                                                 电压触发上限  long-unsigned （单位：V,换算：-1）,  

                                                 判定延时时间  unsigned （单位：s,换算：0）  

                                                                                            134  

----------------------- Page 139-----------------------

                                                                                     DL/T 698.45—201X  

                                                  }  

3002       24     电能表过压事件                         属性5 （配置参数）∷=structure  

                                                  {  

                                                    电压触发下限  long-unsigned （单位：V,换算：-1）,  

                                                    判定延时时间  unsigned （单位：s,换算：0）  

                                                  }  

3003       24     电能表断相事件                         属性5 （配置参数）∷=structure  

                                                  {  

                                                    电压触发上限  long-unsigned （单位：V,换算：-1）,  

                                                    电流触发上限  long-unsigned （单位：V,换算：-1）,  

                                                    判定延时时间  unsigned （单位：s,换算：0）  

                                                  }  

3004       24     电能表失流事件                         属性5 （配置参数）∷=structure  

                                                  {  

                                                    电压触发下限  long-unsigned （单位：V,换算：-1）,  

                                                    电流触发上限  double-long （单位：A,换算：-3）,  

                                                    电流恢复下限  double-long （单位：A,换算：-3）,  

                                                    判定延时时间  unsigned （单位：s,换算：0）  

                                                  }  

3005       24     电能表过流事件                         属性5 （配置参数）∷=structure  

                                                  {  

                                                    电流触发下限  double-long （单位：A,换算：-3）,  

                                                    判定延时时间  unsigned （单位：s,换算：0）  

                                                  }  

3006       24     电能表断流事件                         属性5 （配置参数）∷=structure  

                                                  {  

                                                    电压触发下限  long-unsigned （单位：V,换算：-1）,  

                                                    电流触发上限  double-long （单位：A,换算：-3）,  

                                                    判定延时时间  unsigned （单位：s,换算：0）  

                                                  }  

3007       24     电能表潮流反向事件                       属性5 （配置参数）∷=structure  

                                                  {  

                                                    有功功率触发下限  double-long （单位：W,换算：-1）,  

                                                    判定延时时间  unsigned （单位：s,换算：0）  

                                                  }  

3008       24     电能表过载事件                         属性5 （配置参数）∷=structure  

                                                  {  

                                                    有功功率触发下限  double-long （单位：W,换算：-1）,  

                                                    判定延时时间  unsigned （单位：s,换算：0）  

                                                  }  

3009        7     电能表正向有功需量超限事件                   属性2 （事件记录表）∷=array 电能表需量超限事件单元  

                                                  属性5 （配置参数）∷=structure  

                                                                                                     135  

----------------------- Page 140-----------------------

                                                                                   DL/T 698.45—201X  

                                                 {  

                                                  触发下限  double-long-unsigned （单位：kW,换算：-4）,  

                                                  判定延时时间  unsigned （单位：s,换算：0）  

                                                }  

                                                事件发生源∷=NULL  

300A       7      电能表反向有功需量超限事件                 属性2 （事件记录表）∷=array 电能表需量超限事件单元  

                                                属性5 （配置参数）∷=structure  

                                                 {  

                                                  触发下限  double-long-unsigned （单位：kW,换算：-4）,  

                                                  判定延时时间  unsigned （单位：s,换算：0）  

                                                }  

                                                事件发生源∷=NULL  

300B       24     电能表无功需量超限事件                   属性5 （配置参数）∷=structure  

                                                 {  

                                                  触发下限 double-long-unsigned （单位：kvar,换算：-4）,  

                                                  判定延时时间 unsigned （单位：s,换算：0）  

                                                }  

300C       7      电能表功率因数超下限事件                  属性2 （事件记录表）∷=array 标准事件记录单元  

                                                属性6 （配置参数）∷=structure  

                                                 {  

                                                  下限阀值  long （单位：%,换算：-1）,  

                                                  判定延时时间  unsigned （单位：s,换算：0）  

                                                }  

                                                事件发生源∷=NULL  

300D       7      电能表全失压事件                      属性2 （事件记录表）∷=array 标准事件记录单元  

                                                属性6 （配置参数）∷=structure  

                                                 {  

                                                }  

                                                事件发生源∷=NULL  

300E       7      电能表辅助电源掉电事件                   属性2 （事件记录表）∷=array 标准事件记录单元  

                                                属性6 （配置参数）∷=structure  

                                                 {  

                                                  判定延时  unsigned （单位：s,换算：0）  

                                                }  

                                                事件发生源∷=NULL  

300F       7      电能表电压逆相序事件                    属性2 （事件记录表）∷=array 标准事件记录单元  

                                                属性6 （配置参数）∷=structure  

                                                 {  

                                                  判定延时  unsigned （单位：s,换算：0）  

                                                }  

                                                事件发生源∷=NULL  

3010       7      电能表电流逆相序事件                    属性2 （事件记录表）∷=array 标准事件记录单元  

                                                                                                  136  

----------------------- Page 141-----------------------

                                                                                    DL/T 698.45—201X  

                                                 属性6 （配置参数）∷=structure  

                                                  {  

                                                   判定延时  unsigned （单位：s,换算：0）  

                                                 }  

                                                 事件发生源∷=NULL  

3011        7     电能表掉电事件                        属性2 （事件记录表）∷=array 标准事件记录单元  

                                                 属性6 （配置参数）∷=structure  

                                                  {  

                                                   判定延时  unsigned （单位：s,换算：0）  

                                                 }  

                                                 事件发生源∷=NULL  

3012        7     电能表编程事件                        属性2 （事件记录表）∷=array 电能表编程事件单元  

                                                 属性6 （配置参数）∷=structure  

                                                  {  

                                                 }  

3013        7     电能表清零事件                        属性2 （事件记录表）∷=array 标准事件记录单元  

                                                 属性6 （配置参数）∷=structure  

                                                  {  

                                                 }  

                                                 事件发生源∷=NULL  

3014        7     电能表需量清零事件                      属性2 （事件记录表）∷=array 标准事件记录单元  

                                                 属性6 （配置参数）∷=structure  

                                                  {  

                                                 }  

                                                 事件发生源∷=NULL  

3015        7     电能表事件清零事件                      属性2 （事件记录表）∷=array 事件清零事件记录单元  

                                                 属性6 （配置参数）∷=structure  

                                                  {  

                                                 }  

                                                 事件发生源∷=NULL  

3016        7     电能表校时事件                        属性2 （事件记录表）∷=array 标准事件记录单元  

                                                 属性6 （配置参数）∷=structure  

                                                  {  

                                                 }  

                                                 事件发生源∷=NULL  

3017        7     电能表时段表编程事件                     属性2 （事件记录表）∷=array 标准事件记录单元  

                                                 属性6 （配置参数）∷=structure  

                                                  {  

                                                 }  

                                                 事件发生源∷=NULL  

3018        7     电能表时区表编程事件                     属性2 （事件记录表）∷=array 标准事件记录单元  

                                                 属性6 （配置参数）∷=structure  

                                                                                                    137  

----------------------- Page 142-----------------------

                                                                                    DL/T 698.45—201X  

                                                  {  

                                                 }  

                                                 事件发生源∷=NULL  

3019        7     电能表周休日编程事件                     属性2 （事件记录表）∷=array 标准事件记录单元  

                                                 属性6 （配置参数）∷=structure  

                                                  {  

                                                 }  

                                                 事件发生源∷=NULL  

301A        7     电能表结算日编程事件                     属性2 （事件记录表）∷=array 标准事件记录单元  

                                                 属性6 （配置参数）∷=structure  

                                                  {  

                                                 }  

                                                 事件发生源∷=NULL  

301B        7     电能表开盖事件                        属性2 （事件记录表）∷=array 标准事件记录单元  

                                                 属性6 （配置参数）∷=structure  

                                                  {  

                                                 }  

                                                 事件发生源∷=NULL  

301C        7     电能表开端钮盒事件                      属性2 （事件记录表）∷=array 标准事件记录单元  

                                                 属性6 （配置参数）∷=structure  

                                                  {  

                                                 }  

                                                 事件发生源∷=NULL  

301D        7     电能表电压不平衡事件                     属性2 （事件记录表）∷=array 标准事件记录单元  

                                                 属性6 （配置参数）∷=structure  

                                                  {  

                                                   限值  long （单位：%,换算：-2）,  

                                                   判定延时时间  unsigned （单位：s,换算：0）  

                                                 }  

                                                 事件发生源∷=NULL  

301E        7     电能表电流不平衡事件                     属性2 （事件记录表）∷=array 标准事件记录单元  

                                                 属性6 （配置参数）∷=structure  

                                                  {  

                                                   限值  long （单位：%,换算：-2）,  

                                                   判定延时时间  unsigned （单位：s,换算：0）  

                                                 }  

                                                 事件发生源∷=NULL  

301F        7     电能表跳闸事件                        属性2 （事件记录表）∷=array 标准事件记录单元  

                                                 属性6 （配置参数）∷=structure  

                                                  {  

                                                 }  

                                                 事件发生源∷=NULL  

                                                                                                    138  

----------------------- Page 143-----------------------

                                                                                     DL/T 698.45—201X  

3020        7     电能表合闸事件                         属性2 （事件记录表）∷=array 标准事件记录单元  

                                                  属性6 （配置参数）∷=structure  

                                                  {  

                                                  }  

                                                  事件发生源∷=NULL  

3021        7     电能表节假日编程事件                      属性2 （事件记录表）∷=array 标准事件记录单元  

                                                  属性6 （配置参数）∷=structure  

                                                  {  

                                                  }  

                                                  事件发生源∷=NULL  

3022        7     电能表有功组合方式编程事件                   属性2 （事件记录表）∷=array 标准事件记录单元  

                                                  属性6 （配置参数）∷=structure  

                                                  {  

                                                  }  

                                                  事件发生源∷=NULL  

3023        7     电能表无功组合方式编程事件                   属性2 （事件记录表）∷=array 标准事件记录单元  

                                                  属性6 （配置参数）∷=structure  

                                                  {  

                                                  }  

                                                  事件发生源∷=enum  

                                                  {  

                                                    无功组合方式1 特征字 （0）,  

                                                    无功组合方式2 特征字 （1）  

                                                  }  

3024        7     电能表费率参数表编程事件                    属性2 （事件记录表）∷=array 标准事件记录单元  

                                                  属性6 （配置参数）∷=structure  

                                                  {  

                                                  }  

                                                  事件发生源∷=NULL  

3025        7     电能表阶梯表编程事件                      属性2 （事件记录表）∷=array 标准事件记录单元  

                                                  属性6 （配置参数）∷=structure  

                                                  {  

                                                  }  

                                                  事件发生源∷=NULL  

3026        7     电能表密钥更新事件                       属性2 （事件记录表）∷=array 标准事件记录单元  

                                                  属性6 （配置参数）∷=structure  

                                                  {  

                                                  }  

                                                  事件发生源∷=NULL  

3027        7     电能表异常插卡事件                       属性2 （事件记录表）∷=array 标准事件记录单元  

                                                  属性6 （配置参数）∷=structure  

                                                  {  

                                                                                                     139  

----------------------- Page 144-----------------------

                                                                                   DL/T 698.45—201X  

                                                }  

                                                属性9 （非法插卡总次数）∷=double-long-unsigned  

                                                事件发生源∷=NULL  

3028       7      电能表购电记录                       属性2 （事件记录表）∷=array 标准事件记录单元  

                                                属性6 （配置参数）∷=structure  

                                                 {  

                                                }  

                                                事件发生源∷=NULL  

3029       7      电能表退费记录                       属性2 （事件记录表）∷=array 标准事件记录单元  

                                                属性6 （配置参数）∷=structure  

                                                 {  

                                                }  

                                                事件发生源∷=NULL  

302A       7      电能表恒定磁场干扰事件                   属性2 （事件记录表）∷=array 标准事件记录单元  

                                                属性6 （配置参数）∷=structure  

                                                 {  

                                                  判定延时  unsigned （单位：s,换算：0）  

                                                }  

                                                事件发生源∷=NULL  

302B       7      电能表负荷开关误动作事件                  属性2 （事件记录表）∷=array 标准事件记录单元  

                                                属性6 （配置参数）∷=structure  

                                                 {  

                                                  判定延时  unsigned （单位：s,换算：0）  

                                                }  

                                                事件发生源∷=NULL  

302C       7      电能表电源异常事件                     属性2 （事件记录表）∷=array 标准事件记录单元  

                                                属性6 （配置参数）∷=structure  

                                                 {  

                                                  判定延时  unsigned （单位：s,换算：0）  

                                                }  

                                                事件发生源∷=NULL  

302D       7      电能表电流严重不平衡事件                   属性2 （事件记录表）∷=array 标准事件记录单元  

                                                属性6 （配置参数）∷=structure  

                                                 {  

                                                  限值  long （单位：%,换算：-2）  

                                                  判定延时时间  unsigned （单位：s,换算：0）  

                                                }  

                                                事件发生源∷=NULL  

302E       7      电能表时钟故障事件                     属性2 （事件记录表）∷=array 标准事件记录单元  

                                                属性6 （配置参数）∷=structure  

                                                 {  

                                                  判定延时  unsigned （单位：s,换算：0）  

                                                                                                  140  

----------------------- Page 145-----------------------

                                                                                    DL/T 698.45—201X  

                                                 }  

                                                 事件发生源∷=NULL  

302F       7      电能表计量芯片故障事件                    属性2 （事件记录表）∷=array 标准事件记录单元  

                                                 属性6 （配置参数）∷=structure  

                                                 {  

                                                   判定延时  unsigned （单位：s,换算：0）  

                                                 }  

                                                 事件发生源∷=NULL  

3100       7      终端初始化事件                        属性2 （事件记录表）∷=array 标准事件记录单元  

                                                 属性6 （配置参数）∷=structure  

                                                 {  

                                                 }  

                                                 事件发生源∷=NULL  

3101       7      终端版本变更事件                       属性2 （事件记录表）∷=array 标准事件记录单元  

                                                 属性6 （配置参数）∷=structure  

                                                 {  

                                                 }  

                                                 事件发生源∷=NULL  

3104       7      终端状态量变位事件                      属性2 （事件记录表）∷=array 标准事件记录单元  

                                                 属性6 （配置参数）∷=structure  

                                                 {  

                                                 }  

                                                 事件发生源∷=NULL  

3105       7      电能表时钟超差事件                      属性2 （事件记录表）∷=array 标准事件记录单元  

                                                 属性6 （配置参数）∷=structure  

                                                 {  

                                                   异常判别阈值  long-unsigned （单位：秒）  

                                                 }  

                                                 事件发生源∷=TSA  

3106       7      终端停/上电事件                       属性2 （事件记录表）∷=array 停上电事件记录单元  

                                                 属性6 （配置参数）∷=structure  

                                                 {  

                                                   停电数据采集配置参数  structure  

                                                   {  

                                                     采集标志  bit-string(SIZE(8)),  

                                                     停电事件抄读时间间隔（小时） unsigned ,  

                                                     停电事件抄读时间限值（分钟） unsigned,  

                                                     需要读取停电事件电能表       array TSA  

                                                   },  

                                                   停电事件甄别限值参数  structure  

                                                   {  

                                                     停电时间最小有效间隔(分钟)  long-unsigned,  

                                                                                                   141  

----------------------- Page 146-----------------------

                                                                                DL/T 698.45—201X  

                                                  停电时间最大有效间隔(分钟)  long-unsigned,  

                                                  停电事件起止时间偏差限值(分钟)  long-unsigned,  

                                                  停电事件时间区段偏差限值(分钟)  long-unsigned,  

                                                  停电发生电压限值  long-unsigned(单位：V,换算：-1),  

                                                  停电恢复电压限值  long-unsigned(单位：V,换算：-1)  

                                                 }  

                                               }  

                                              采集标志：  

                                              bit0：置“1”有效,置“0”无效；  

                                              bit1：置“1”随机选择测量点,置“0”只采集设置的测量点。  

                                              事件发生源∷=NULL  

3107       7     终端直流模拟量越上限事件                  属性2 （事件记录表）∷=array 标准事件记录单元  

                                               属性6 （配置参数）∷=structure  

                                               {  

                                                直流模拟量上限  double-long  

                                               }  

                                              事件发生源∷=unsigned （直流模拟量号）  

3108       7     终端直流模拟量越下限事件                  属性2 （事件记录表）∷=array 标准事件记录单元  

                                               属性6 （配置参数）∷=structure  

                                               {  

                                                直流模拟量下限  double-long  

                                               }  

                                              事件发生源∷=OAD （直流模拟量号）  

3109       7     终端消息认证错误事件                    属性2 （事件记录表）∷=array 标准事件记录单元  

                                               属性6 （配置参数）∷=structure  

                                               {  

                                               }  

                                              事件发生源∷=NULL  

310A       7     终端故障记录                        属性2 （事件记录表）∷=array 标准事件记录单元  

                                               属性6 （配置参数）∷=structure  

                                               {  

                                               }  

                                              事件发生源∷=enum  

                                               {  

                                                  终端主板内存故障（0）,  

                                                  时钟故障         （1）,  

                                                  主板通信故障     （2）,  

                                                  485 抄表故障     （3）,  

                                                  显示板故障       （4）,  

                                                  载波通道异常     （5）  

                                               }  

310B       7     电能表示度下降事件                     属性2 （事件记录表）∷=array 标准事件记录单元  

                                                                                              142  

----------------------- Page 147-----------------------

                                                                                     DL/T 698.45—201X  

                                                  属性6 （配置参数）∷=structure  

                                                  {  

                                                  }  

                                                  事件发生源∷=TSA  

310C        7     电能量超差事件                         属性2 （事件记录表）∷=array 标准事件记录单元  

                                                  属性6 （配置参数）∷=structure  

                                                  {  

                                                    阈值  double-long-unsigned  

                                                  }  

                                                  事件发生源∷=TSA  

310D        7     电能表飞走事件                         属性2 （事件记录表）∷=array 标准事件记录单元  

                                                  属性6 （配置参数）∷=structure  

                                                  {  

                                                    阈值  double-long-unsigned  

                                                  }  

                                                  事件发生源∷=TSA  

310E        7     电能表停走事件                         属性2 （事件记录表）∷=array 标准事件记录单元  

                                                  属性6 （配置参数）∷=structure  

                                                  {  

                                                    阈值  TI  

                                                  }  

                                                  事件发生源∷=TSA  

310F        7     终端抄表失败事件                        属性2 （事件记录表）∷=array 标准事件记录单元  

                                                  属性6 （配置参数）∷=structure  

                                                  {  

                                                      重试轮次  unsigned  

                                                  }事件发生源∷=TSA  

3110        7     月通信流量超限事件                       属性2 （事件记录表）∷=array 标准事件记录单元  

                                                  属性6 （配置参数）∷=structure  

                                                  {  

                                                    通信流量门限  double-long-unsigned （单位：byte）  

                                                  }  

                                                  事件发生源∷=NULL  

3111        7     发现未知电能表事件                       属性2 （事件记录表）∷=array 发现未知电能表事件单元  

                                                  属性6 （配置参数）∷=structure  

                                                  {  

                                                  }  

3112        7     跨台区电能表事件                        属性2 （事件记录表）∷=array 垮台区电能表事件单元  

                                                  属性6 （配置参数）∷=structure  

                                                  {  

                                                  }  

3114        7     终端对时事件                          属性2 （事件记录表）∷=array 标准事件记录单元  

                                                                                                     143  

----------------------- Page 148-----------------------

                                                                               DL/T 698.45—201X  

                                              属性6 （配置参数）∷=structure  

                                              {  

                                              }  

                                              事件发生源∷=NULL  

3115       7     遥控跳闸记录                       属性2 （事件记录表）∷=array 遥控事件记录单元  

                                              属性6 （配置参数）∷=structure  

                                              {  

                                              }  

                                              事件发生源∷=unsigned(继电器序号)  

3116       7     有功总电能量差动越限事件记录   属性2 （事件记录表）∷=array 差动越限事件记录单元  

                                              属性6 （配置参数）∷= array 有功总电能量差动组配置  

                                              有功总电能量差动组配置∷=structure  

                                              {  

                                                有功总电能量差动组序号 unsigned,  

                                                对比的总加组           OI,  

                                                参照的总加组           OI,  

                                                参与差动的电能量的时间区间及对比方法标志 bit-string 

                                               （SIZE （8））,  

                                                差动越限相对偏差值 integer （单位：%,换算：-2）,  

                                                差动越限绝对偏差值 double-long （单位：kWh,换算：0）  

                                              }  

                                              参与差动的电能量的时间区间及对比方法标志：  

                                              bit0～bit1 编码表示电能量的时间跨度,取值范围0～2 依次 

                                              表示60 分钟电量、30 分钟电量、15 分钟电量,其他值无效。  

                                              bit7 表示对比方法标志,置“0”：相对对比,公式见公式（1）； 

                                              置“1”：绝对对比,公式见公式（2）。  

                                              bit2～bit6 备用。  

                                                   | Q q | 
                                                          100 ％  ..... (1)  
                                                      q 
                                                   | Q  q |  .............  (2)  

                                              式中：  

                                                  Q——对比的总加组总电能量；  

                                                  q——参照的总加组总电能量。  

3117       7     输出回路接入状态变位事件记录   属性2 （事件记录表）∷=array 标准事件记录单元  

                                              属性6 （配置参数）∷=structure  

                                              {  

                                              }  

3118       7     终端编程记录                       属性2 （事件记录表）∷=array 编程记录事件单元  

                                              属性6 （配置参数）∷=structure  

                                              {  

                                              }  

3119       7     终端电流回路异常事件                   属性2 （事件记录表）∷=array 标准记录事件单元  

                                              属性6 （配置参数）∷=structure  

                                                                                             144  

----------------------- Page 149-----------------------

                                                                                       DL/T 698.45—201X  

                                                   {  

                                                   }  
                                                   事件发生源∷=enum{短路(0),开路(1)}  

311A        7      电能表在网状态切换事件                     属性2 （事件记录表）∷=array 一条事件记录  
                                                   一条事件记录∷=structure  
                                                   {  

                                                     事件记录序号  double-long-unsigned,  

                                                     事件发生时间  DatetimeBCD,  

                                                     事件结束时间  DatetimeBCD,  

                                                     事件发生源    NULL,  

                                                     事件记录状态  bit-string （SIZE(8)）,  

                                                     状态变迁事件 array structure   
                                                     {  
                                                         电能表地址  TSA,  
                                                        在网状态    bool  
                                                     }  

                                                   }  

                                                   属性5 （配置参数）∷=structure  

                                                   {  

                                                      判定延时时间  long-unsigned （单位：s,换算：0）  

                                                   }  

                                                   事件发生源∷=NULL  

                                                     

                                                   此事件只记录电表在网状态变迁。  

3200        7     功控跳闸记录                           属性2 （事件记录表）∷=array 功控跳闸记录单元  

                                                   属性6 （配置参数）∷=structure  

                                                   {  

                                                   }  

3201        7      电控跳闸记录                          属性2 （事件记录表）∷=array 电控跳闸记录单元  

                                                   属性6 （配置参数）∷=structure  

                                                   {  

                                                   }  

3202        7     购电参数设置记录                         属性2 （事件记录表）∷=array 标准事件记录单元  

                                                   属性6 （配置参数）∷=structure  

                                                   {  

                                                   }  

                                                   事件发生源∷=OI  

3203        7      电控告警事件记录                        属性2 （事件记录表）∷=array 电控告警事件单元  

                                                   属性6 （配置参数）∷=structure  

                                                   {  

                                                   }  

3300        8     事件记录状态                             

3301        8     标准事件记录单元                         标准事件记录单元∷=structure  
                                                   {  
                                                     事件记录序号  double-long-unsigned,  

                                                                                                      145  

----------------------- Page 150-----------------------

                                                                                DL/T 698.45—201X  

                                                事件发生时间  DatetimeBCD,  
                                                事件结束时间  DatetimeBCD,  
                                                事件发生源    instance-specific,  
                                                事件记录状态  bit-string （SIZE(8)）,  
                                                第1 个关联对象属性的数据  Data,  
                                                …  
                                                第n 个关联对象属性的数据  Data  
                                               }  

3302       8     编程记录事件单元                      编程记录事件单元∷=structure  

                                               {  

                                                事件记录序号  double-long-unsigned,  

                                                事件发生时间  DatetimeBCD,  

                                                事件结束时间  DatetimeBCD,  

                                                事件发生源    NULL,  

                                                事件记录状态  bit-string （SIZE(8)）,  

                                                编程对象列表  array OAD,  

                                                第1 个关联对象属性的数据  Data,  

                                                …  

                                                第n 个关联对象属性的数据  Data  

                                               }  

3303       8     发现未知电能表事件单元                   发现未知电能表事件∷=structure  

                                               {  

                                                事件记录序号  double-long-unsigned,  

                                                事件发生时间  DatetimeBCD,  

                                                事件结束时间  DatetimeBCD,  

                                                事件发生源    NULL,  

                                                事件记录状态  bit-string （SIZE(8)）,  

                                                搜表结果      array 一个搜表结果,  

                                               }  

3304       8     跨台区电能表事件单元                    跨台区电能表事件单元∷=structure  

                                               {  

                                                事件记录序号    double-long-unsigned,  

                                                事件发生时间    DatetimeBCD,  

                                                事件结束时间    DatetimeBCD,  

                                                事件发生源      NULL,  

                                                事件记录状态    bit-string （SIZE(8)）,  

                                                跨台区搜表结果  array  一个跨台区结果,  

                                                第1 个关联对象属性的数据  Data,  

                                                …  

                                                第n 个关联对象属性的数据  Data  

                                               }  

3305       8     功控跳闸记录单元                      功控跳闸记录单元∷=structure  
                                               {  
                                                事件记录序号  double-long-unsigned,  

                                                                                              146  

----------------------- Page 151-----------------------

                                                                              DL/T 698.45—201X  

                                               事件发生时间  DatetimeBCD,  
                                               事件结束时间  DatetimeBCD,  
                                               事件发生源    OI,  
                                               事件记录状态  bit-string （SIZE(8)）,  
                                               事件发生后2 分钟功率  long64(单位：W,换算-1),  
                                               控制对象      OI,  
                                               跳闸轮次      bit-string(SIZE(8)),  
                                               功控定值      long64 （单位：kWh,换算-4）,  
                                               第1 个关联对象属性的数据  Data,  
                                               …  
                                               第n 个关联对象属性的数据  Data  

                                              }  
3306       8     电控跳闸记录单元                     电控跳闸记录单元∷=structure  
                                              {  
                                               事件记录序号  double-long-unsigned,  
                                               事件发生时间  DatetimeBCD,  
                                               事件结束时间  DatetimeBCD,  
                                               事件发生源    OI,  
                                               事件记录状态  bit-string （SIZE(8)）,  
                                               控制对象      OI,  
                                               跳闸轮次      bit-string(SIZE(8)),  
                                                电控定值      long64 （单位：kWh,换算-4）,  
                                               第1 个关联对象属性的数据  Data,  
                                               …  
                                               第n 个关联对象属性的数据  Data  
                                              }  

3307       8     电控告警事件单元                     电控告警事件单元∷=structure  
                                              {  
                                               事件记录序号  double-long-unsigned,  
                                               事件发生时间  DatetimeBCD,  
                                               事件结束时间  DatetimeBCD,  
                                               事件发生源    OI,  
                                               事件记录状态  bit-string （SIZE(8)）,  
                                               控制对象      OI,  
                                               电控定值      long64 （单位：kWh,换算-4）,  
                                               第1 个关联对象属性的数据  Data,  
                                               …  
                                               第n 个关联对象属性的数据  Data  
                                              }  

3308       8     电能表需量超限事件单元                  电能表需量超限事件单元∷=structure  
                                              {  
                                               事件记录序号  double-long-unsigned,  
                                               事件发生时间  DatetimeBCD,  
                                               事件结束时间  DatetimeBCD,  
                                               事件发生源    NULL,  
                                               事件记录状态  bit-string （SIZE(8)）,  
                                               超限期间正向有功需量最大值  double-long-unsigned,  
                                               超限期间需量最大值发生时间  DateTimeBCD_S,  
                                               第1 个关联对象属性的数据   Data,  

                                                                                            147  

----------------------- Page 152-----------------------

                                                                            DL/T 698.45—201X  

                                               …  
                                               第n 个关联对象属性的数据   Data  
                                             }  

3309      8     停上电事件记录单元                    停上电事件记录单元∷=structure  
                                             {  
                                               事件记录序号  double-long-unsigned,  
                                               事件发生时间  DatetimeBCD,  
                                               事件结束时间  DatetimeBCD,  
                                               事件发生源    enum{停电(0),上电(1)},  
                                               事件记录状态  bit-string （SIZE(8)）,    
                                              属性标志      bit-string （SIZE(8)）,  
                                               第1 个关联对象属性的数据   Data,  
                                               …  
                                               第n 个关联对象属性的数据   Data  
                                             }  
                                             属性标志：  
                                             bit0 置“1”：事件正常,bit0 置“0”：事件异常,此处是对 
                                             停电时间有效间隔的判断；  
                                             bit1 置“1”：事件有效,bit1置“0”：事件无效,此处是对 
                                             停电时间偏差限值的判断；  
                                             bit2～bit7 备用。  

330A      8     遥控事件记录单元                     遥控事件记录单元∷=structure  
                                             {  
                                               事件记录序号  double-long-unsigned,  
                                               事件发生时间  DatetimeBCD,  
                                               事件结束时间  DatetimeBCD,  
                                               事件发生源    OAD,  
                                               事件记录状态  bit-string （SIZE(8)）,  
                                               控后2 分钟总加组功率 array long64,  
                                               第1 个关联对象属性的数据   Data,  
                                               …  
                                               第n 个关联对象属性的数据   Data  
                                             }  

330B      8     有功总电能量差动越限事件记录 有功总电能量差动越限事件记录单元∷=structure  
                单元                           {  
                                               事件记录序号  double-long-unsigned,  
                                               事件发生时间  DatetimeBCD,  
                                               事件结束时间  DatetimeBCD,  
                                               事件发生源    unsigned,  
                                               事件记录状态  bit-string （SIZE(8)）,  
                                               越限时对比总加组有功总电能量 long64(单位：kWh,换算： 
                                             -4),  
                                               越限时参照总加组有功总电能量 long64(单位：kWh,换算： 
                                             -4),  
                                               越限时差动越限相对偏差值 integer （单位：%,换算：-2）,  
                                               越限时差动越限绝对偏差值 double-long （单位：kWh,换 
                                             算：0）  
                                             }  

330C      8     事件清零事件记录单元                   事件清零事件记录单元∷=structure  

                                                                                          148  

----------------------- Page 153-----------------------

                                                                                        DL/T 698.45—201X  

                                                     {  
                                                      事件记录序号  double-long-unsigned,  
                                                      事件发生时间  DatetimeBCD,  
                                                      事件结束时间  DatetimeBCD,  
                                                      事件发生源    NULL,  
                                                      事件记录状态  bit-string （SIZE(8)）,  
                                                      事件清零列表  array OMD  
                                                     }  

  

A.5  参变量类对象  

     有关参变量类的对象标识定义见表A.5  。  

                                      表A.5  参变量类对象标识定义  

对象标识   接口类                  对象名称                                  实例的对象属性及方法定义  

   OI         IC  

  4000        8      日期时间                      属性2∷=DateTimeBCD  

                                               方法127：校时（参数）  

                                               参数∷=DateTimeBCD  

  4001        8     通信地址                       属性2∷=TSA  

  4002        8     表号                         属性2∷=octet-string  

  4003        8     客户编号                       属性2∷=octet-string  

  4004        8     设备地理位置                     属性2∷=structure  

                                                {  

                                                  经度  structure  

                                                  {  

                                                    方位   enum{E （0）,W （1）},  

                                                    度     unsigned,  

                                                    分     unsigned,  

                                                    秒     unsigned  

                                                  },  

                                                  纬度  structure  

                                                  {  

                                                    方位   enum{S （0）,N （1）},  

                                                    度     unsigned,  

                                                    分     unsigned,  

                                                    秒     unsigned  

                                                  },  

                                                  高度（cm）  double-long-unsigned  

                                                }  

  4005        8     组地址                        属性2∷=array TSA  

  4006        8     时钟源                        属性2 （只读）∷=structure  

                                                                                                        149  

----------------------- Page 154-----------------------

                                                                                DL/T 698.45—201X  

                                          {  

                                            时钟源  enum  

                                            {  

                                              内部 （0）,时钟芯片 （1）,互联网时钟 （2）,  

                                              卫星时钟 （3）,长波时钟 （4）  

                                            },  

                                            状态  enum{可用 （0）,不可用 （1）}  

                                          }  

                                          方法127：启用（）  

                                          方法128：禁用（）  

4007       8     LCD 参数                   属性2::=structure  

                                          {  

                                            上电全显时间  unsigned,  

                                            背光点亮时间  long-unsigned(按键时背光点亮时间),  

                                            显示查看背光点亮时间  long-unsigned,  

                                            有电按键屏幕驻留最大时间  long-unsigned,  

                                            无电按键屏幕驻留最大时间  long-unsigned,  

                                            显示电能小数位数  unsigned,  

                                            显示功率（最大需量）小数位数  unsigned  

                                          }  

                                          以上时间的单位均为：秒。  

4008       8     两套时区表切换时间                属性2∷=DateTimeBCD_S  

4009       8     两套日时段切换时间                属性2∷=DateTimeBCD_S  

400A       8     两套分时费率切换时间               属性2∷=DateTimeBCD_S  

400B       8     两套阶梯电价切换时间               属性2∷=DateTimeBCD_S  

400C       8     时区时段数                    属性2∷=structure  

                                          {  

                                            年时区数(p≤14)                 unsigned,  

                                            日时段表数（q≤8）              unsigned,  

                                            日时段数(每日切换数) （m≤14）   unsigned,  

                                            费率数（k≤63）                 unsigned,  

                                            公共假日数（n≤254）            unsigned  

                                          }  

400D       8     阶梯数                      属性2∷=unsigned,无单位,无换算  

400E       8     谐波分析次数                   属性2∷=unsigned,无单位,无换算  

400F       8     密钥总条数                    属性2∷=unsigned,无单位,无换算  

4010       8     计量元件数                    属性2∷=unsigned,无单位,无换算  

                                          计量元件数单相表为1,三相三线表为2,三相四线表为3。  

4011       8     公共假日表                    属性2∷=array 公共假日  

                                          公共假日∷=structure  

                                          {  

                                             日期        DateBCD,  

                                                                                              150  

----------------------- Page 155-----------------------

                                                                                DL/T 698.45—201X  

                                             日时段表号  unsigned  

                                          }  

                                           电能表实际使用多少个公共假日取决于公共假日数,建议电能表内 

                                          至少可保存20 个公共假日。  

4012       8     周休日特征字                   属性2∷=bit-string(SIZE(8)),见附录G  

4013       8     周休日釆用的日时段表号              属性2∷=unsigned,无单位,无换算  

4014       8     当前套时区表                   属性2∷=array 时区  

                                          时区∷=structure  

                                           {  

                                            月          ComBCD2,  

                                             日          ComBCD2,  

                                             日时段表号  unsigned  

                                          }  

4015       8     备用套时区表                    同4014 定义。  

4016       8     当前套日时段表                  属性2∷=array  日时段表  

                                           日时段表∷=array 时段  

                                          时段∷=structure  

                                           {  

                                            时     ComBCD2,  

                                            分     ComBCD2,  

                                            费率号 unsigned  

                                          }  

                                          费率号：该时段采用的费率号。  

4017       8     备用套日时段表                   同4016 定义。  

4018       8     当前套费率电价                  属性2∷=array 费率电价  

                                          费率电价∷=double-long-unsigned  

                                          单位：元/kWh,换算：-4,电能表最多支持32 个费率电价,当前套 

                                          费率电价协议只读。  

4019       8     备用套费率电价                  属性2∷=array 费率电价  

                                          费率电价∷=double-long-unsigned  

                                          单位：元/kWh,换算：-4,电能表最多支持32 个费率电价,备用套 

                                          费率电价可读可写。  

401A       8     当前套阶梯电价                  阶梯参数∷=structure  

                                           {  

                                            阶梯值数组    array 阶梯值,  

                                            阶梯电价数组  array 阶梯电价,  

                                            阶梯结算日数组  array 阶梯结算日  

                                          }  

                                          阶梯值∷=double-long-unsigned  

                                          阶梯电价∷=double-long-unsigned  

                                          阶梯结算日∷=structure  

                                           {  

                                                                                               151  

----------------------- Page 156-----------------------

                                                                                DL/T 698.45—201X  

                                            月  ComBCD2,  

                                             日  ComBCD2,  

                                            时  ComBCD2  

                                          }  

                                          阶梯值：单位：kWh,换算：-2  

                                          阶梯电价：单位：元/kWh,换算：-4  

                                          阶梯结算日中月、日、时均有效时则按结算日执行阶梯冻结,如果 

                                          第 1 阶梯结算日中仅月、日有效则以此每月该日时执行阶梯冻结, 

                                          当全部无效时不执行阶梯冻结。  

                                          当前套阶梯参数协议只读。  

401B       8     备用套阶梯电价                  格式同401A,备用套阶梯参数可读可写。  

401C       8     电流互感器变比                  属性2∷=double-long-unsigned,无单位,换算:-2  

401D       8     电压互感器变比                  属性2∷=double-long-unsigned,无单位,换算:-2  

401E       8     报警金额限值                   属性2 （参数）∷=structure  

                                           {  

                                            报警金额限值 1    double-long-unsigned,  

                                            报警金额限值2    double-long-unsigned,  

                                          }  

                                          单位：元,换算：-2  

401F       8     其它金额限值                   属性2 （参数）∷=structure  

                                           {  

                                            透支金额限值     double-long-unsigned,  

                                            囤积金额限值     double-long-unsigned,  

                                            合闸允许金额限值 double-long-unsigned,  

                                          }  

                                          单位：元,换算：-2  

4020       8     报警电量限值                   属性2∷=structure  

                                           {  

                                            报警电量限值 1    double-long-unsigned,  

                                            报警电量限值2    double-long-unsigned,  

                                          }  

                                          单位：kWh,换算：-2  

4021       8     其它电量限值                   属性2∷=structure  

                                           {  

                                            囤积电量限值     double-long-unsigned,  

                                            透支电量限值     double-long-unsigned,  

                                            合闸允许电量限值 double-long-unsigned,  

                                          }  

                                          单位：kWh,换算：-2  

4022       8     插卡状态字                    属性2∷=bit-string(SIZE(16)),无单位,无换算,见附录G  

4023       8     认证有效时长                   属性2∷=long-unsigned ,单位：分钟,无换算  

4030       8     电压合格率参数                  属性2∷=structure  

                                                                                               152  

----------------------- Page 157-----------------------

                                                                                DL/T 698.45—201X  

                                           {  

                                             电压考核上限  long-unsigned （单位：V,换算：-1）,  

                                            电压考核下限  long-unsigned （单位：V,换算：-1）,  

                                             电压合格上限  long-unsigned （单位：V,换算：-1）,  

                                            电压合格下限  long-unsigned （单位：V,换算：-1）  

                                          }  

4100       8     最大需量周期                   属性2∷=unsigned,单位：分钟,换算：0  

4101       8     滑差时间                     属性2∷=unsigned,单位：分钟,换算：0  

4102       8     校表脉冲宽度                   属性2∷=unsigned,单位：毫秒,换算：0  

4103       8     资产管理编码                   属性2∷=visible-string(SIZE(32))  

4104       8     额定电压                     属性2∷=visible-string(SIZE(6))  

4105       8     额定电流/基本电流                属性2∷=visible-string(SIZE(6))  

4106       8     最大电流                     属性2∷=visible-string(SIZE(6))  

4107       8     有功准确度等级                  属性2∷=visible-string(SIZE(4))  

4108       8     无功准确度等级                  属性2∷=visible-string(SIZE(4))  

4109       8     电能表有功常数                  属性2∷=double-long-unsigned,单位：imp/kWh,换算：0  

410A       8     电能表无功常数                  属性2∷=double-long-unsigned,单位：imp/kvarh,换算：0  

410B       8     电能表型号                    属性2∷=visible-string(SIZE(32))  

410C       8     ABC 各相电导系数               属性2∷=structure  

                                           {  

                                            A 相电导  long,单位：无,换算：-3  

                                            B 相电导  long,单位：无,换算：-3  

                                            C 相电导  long,单位：无,换算：-3  

                                           }  

410D       8     ABC 各相电抗系数               属性2∷=structure  

                                           {  

                                            A 相电抗  long,单位：无,换算：-3  

                                            B 相电抗  long,单位：无,换算：-3  

                                            C 相电抗  long,单位：无,换算：-3  

                                           }  

410E       8     ABC 各相电阻系数               属性2∷=structure  

                                           {  

                                            A 相电阻  long,单位：无,换算：-3  

                                            B 相电阻  long,单位：无,换算：-3  

                                            C 相电阻  long,单位：无,换算：-3  

                                           }  

410F       8     ABC 各相电纳系数               属性2∷=structure  

                                           {  

                                            A 相电纳  long,单位：无,换算：-3  

                                            B 相电纳  long,单位：无,换算：-3  

                                            C 相电纳  long,单位：无,换算：-3  

                                           }  

                                                                                               153  

----------------------- Page 158-----------------------

                                                                                DL/T 698.45—201X  

4110       8     电能表运行特征字1                属性2∷=bit-string(SIZE (8))  

4111       8     软件备案号                    属性2∷=visible-string  

4112       8     有功组合方式特征字                属性2∷=bit-string(SIZE(8)),见附录G  

4113       8     无功组合方式1 特征字              属性2∷=bit-string(SIZE(8)),见附录G  

4114       8     无功组合方式2 特征字              属性2∷=bit-string(SIZE(8)),见附录G  

4115       8     IC 卡                     属性2∷=structure  

                                           {  

                                            IC 卡类型  enum  

                                             {  

                                              参数预制卡 （0）,用户开户卡 （1）,  

                                              用户购电卡 （2）,用户补卡 （3）  

                                            },  

                                          }  

4116       8     结算日                      属性2 （配置参数）∷=array 结算日日期  

                                          结算日日期∷=structure  

                                           {  

                                              日  ComBCD2,  

                                             时  ComBCD2  

                                          }  

4117       8     期间需量冻结周期                 属性2 （配置参数）∷= TI  

4200       11    路由表                      属性2 （配置表）∷=array 路由信息单元  

                                          方法127：Add (路由信息单元)  

                                          添加一个路由信息单元。  

                                          方法128：AddBatch(array 路由信息单元)   

                                          批量添加路由信息单元。  

                                          方法129：Update(TSA,路由信息单元)  

                                          更新路由表的路由信息单元对象。  

                                          方法134：Clear()  

                                          清空路由表  

4201       8     路由信息单元                   属性2 （routing definition）∷=structure  

                                           {  

                                            通信地址   TSA,  

                                            父节点集合 array  TSA  

                                          }  

4202       8     级联通信参数                   属性2∷=structure  

                                           {  

                                            级联标志            bool,  

                                            级联通信端口号      OAD,  

                                            总等待超时（10ms）  long-unsigned,  

                                            字节超时（10ms）    long-unsigned,  

                                            重发次数            unsigned,  

                                            巡测周期（min）     unsigned,  

                                                                                               154  

----------------------- Page 159-----------------------

                                                                      DL/T 698.45—201X  

                                       级联（被）端口数    unsigned,  

                                       级联（被）终端地址  array TSA  

                                     }  

4204      8    终端广播校时时间              属性2∷= time  

4300     19    集中器                     

4301     19    路由模块                  属性10：主节点地址∷=octet-string(SIZE(6))  

4303     19    专变终端                    

4304     19    控制模块                    

4305     19    采集器                     

4306     19    电能表                     

4307     19    水表                    方法127：出厂启用（）  

                                     出厂前发出,且只能发一次。  

                                     方法128：阀门控制（参数）  

                                     参数∷=enum {开阀 （55H）,关阀 （99H）}。  

                                     方法129：机电同步（double-long-unsigned）  

                                     用于出厂前机电同步,仅允许执行一次。  

4308     19    气表                    方法127：出厂启用（）  

                                     出厂前发出,且只能发一次。  

                                     方法128：阀门控制（参数）  

                                     参数∷=enum {开阀 （55H）,关阀 （99H）}。  

                                     方法129：机电同步（double-long-unsigned）  

                                     用于出厂前机电同步,仅允许执行一次。  

4309     19    热表                    方法127：出厂启用（）  

                                     出厂前发出,且只能发一次。  

                                     方法128：阀门控制（参数）  

                                     参数∷=enum {开阀 （55H）,关阀 （99H）}。  

                                     方法129：机电同步（参数1,参数2）  

                                     参数1,热量∷=double-long-unsigned  

                                     参数2：热流量（水流量）∷=double-long-unsigned  

                                     用于出厂前机电同步,仅允许执行一次。  

4400     20    应用连接                    

4401      8    应用连接认证密码              属性2∷=visible-string  

4500     25    公网通信模块1                 

4501     25    公网通信模块2                 

4510     26    以太网通信模块1                

4511     26    以太网通信模块2                

4512     26    以太网通信模块3                

4513     26    以太网通信模块4                

4514     26    以太网通信模块5                

4515     26    以太网通信模块6                

4516     26    以太网通信模块7                

4517     26    以太网通信模块8                

                                                                                   155  

----------------------- Page 160-----------------------

                                                                           DL/T 698.45—201X  

  

A.6  冻结类对象  

    有关冻结类的对象标识定义见表A.6  。  

                                 表A.6  冻结类对象标识定义  

对象标识   接口类               对象名称                            实例的对象属性及方法定义  

   OI       IC  

 5000       9    瞬时冻结                       

 5001       9    秒冻结                        

 5002       9    分钟冻结                       

 5003       9    小时冻结                       

 5004       9     日冻结                       

 5005       9    结算日冻结                      

 5006       9    月冻结                        

 5007       9    年冻结                        

 5008       9    时区表切换冻结                    

 5009       9     日时段表切换冻结                  

  500A      9    费率电价切换冻结                   

  500B      9    阶梯切换冻结                     

 5010       9     电压合格率月冻结                  

 5011       9    阶梯结算冻结                     

  

A.7  采集监控类对象  

    有关采集监控类的对象标识定义见表A.7  。  

                               表A.7  采集监控类对象标识定义  

对象标识   接口类               对象名称                            实例的对象属性及方法定义  

   OI       IC  

 6000       11   采集档案配置表                  属性2 （配置表）∷=array 采集档案配置单元  

                                            

                                          方法127：Add (采集档案配置单元)  

                                          添加一个采集档案配置单元,配置单元的信息中基本信息必须是完 

                                          整的。  

                                          方法128：AddBatch(array 采集档案配置单元)   

                                          批量添加采集档案配置单元。  

                                          方法129：Update(配置序号,基本信息)  

                                          更新配置单元的基本信息对象  

                                          方法130：Update(配置序号,扩展信息,附属信息)  

                                                                                        156  

----------------------- Page 161-----------------------

                                                                                   DL/T 698.45—201X  

                                             更新配置单元的扩展信息以及附属信息,对象为NULL 表示不更新。  

                                             方法131：Delete(配置序号)  

                                             删除配置单元,通过配置序号删除  

                                             方法132：Delete(基本信息)  

                                             删除配置单元,通过基本信息对象删除  

                                             方法133：Delete(通信地址, 端口号)  

                                             删除配置单元,通过通信地址及端口删除  

                                             方法134：Clear()  

                                             清空采集档案配置表  

6001       8     采集档案配置单元                    属性2 （Acquisition document definition）∷=structure  

                                              {  

                                               配置序号  long-unsigned,  

                                               基本信息  Basic_object,  

                                               扩展信息  Extended_object,  

                                               附属信息  Annex_object  

                                             }  

                                             Basic_object ∷=structure  

                                              {  

                                               通信地址  TSA,  

                                               波特率    enum  

                                                {  

                                                 300bps （0）,  600bps （1）,    1200bps （2）,  

                                                 2400bps （3）, 4800bps （4）,   7200bps （5）,  

                                                 9600bps （6）, 19200bps （7）,  38400bps （8）,  

                                                 57600bps （9）,115200bps （10）,自适应 （255）  

                                               },  

                                               规约类型  enum  

                                                {  

                                                 未知  (0),  

                                                 DL/T645-1997 （1）,  

                                                 DL/T645-2007 （2）,  

                                                 DL/T698.45 （3）,  

                                                 CJ/T 188-2004 （4）  

                                               },  

                                               端口      OAD,  

                                               通信密码  octet-string,  

                                               用户类型  unsigned,  

                                               接线方式  enum  

                                                {  

                                                  未知 （0）,  

                                                  单相 （1）,  

                                                  三相三线 （2）,  

                                                                                                  157  

----------------------- Page 162-----------------------

                                                                                        DL/T 698.45—201X  

                                                     三相四线 （3）  

                                                  }  

                                                }  

                                                Extended_object ∷=structure  

                                                {  

                                                  采集器地址  TSA,  

                                                  资产号      octet-string,  

                                                  PT          long-unsigned,  

                                                  CT          long-unsigned  

                                                }  

                                                Annex_object ∷=array structure  

                                                {  

                                                    对象属性描述  OAD,  

                                                    属性值        Data  

                                                }  

6002        11    搜表                            属性2 所有搜表结果∷=array 一个搜表结果  

                                                属性5 跨台区搜表结果∷=array  一个跨台区结果  

                                                属性6 所有搜表结果记录数∷=long-unsigned  

                                                属性7 跨台区搜表结果记录数∷=long-unsigned  

                                                属性8∷=structure  

                                                {  

                                                    是否启用每天周期搜表 bool  

                                                    自动更新采集档案     bool  

                                                    是否产生搜表相关事件 bool  

                                                    清空搜表结果选项   enum   

                                                    {  

                                                       不清空              （0）,  

                                                       每天周期搜表前清空  （1）,  

                                                       每次搜表前清空      （2）  

                                                    }  

                                                }  

                                                属性9 每天周期搜表参数配置∷=array 定时搜表参数  

                                                定时搜表参数∷=structure  

                                                {  

                                                   开始时间          time  

                                                   搜表时长（min）   long-unsigned  

                                                }  

                                                属性10 ∷= enum  

                                                {  

                                                    空闲（0）,搜表中（1）   

                                                }  

                                                  

                                                                                                       158  

----------------------- Page 163-----------------------

                                                                                    DL/T 698.45—201X  

                                              方法127：实时启动搜表(搜表时长)  

                                              搜表时长∷=long-unsigned,单位：分钟,  

                                              表示搜表持续时间,0 表示不限时间直至搜表结束。  

                                              方法128：清空搜表结果()  

                                              方法129：清空跨台区搜表结果()  

6003        8     一个搜表结果                      一个搜表结果∷=structure  

                                              {  

                                                通信地址         TSA,  

                                                所属采集器地址   TSA,  

                                                规约类型  enum  

                                                {  

                                                  未知           （0）,  

                                                  DL/T645-1997   （1）,  

                                                  DL/T645-2007   （2）,  

                                                  DL/T698.45     （3）,  

                                                  CJ/T 188-2004  （4）  

                                                },  

                                                相位             enum{未知 （0）,A （1）,B （2）,C （3）},  

                                                信号品质         unsigned,  

                                                搜到的时间       DateTimeBCD,  

                                                搜到的附加信息   array 附加信息  

                                              }  

                                                

                                              附加信息∷=structure  

                                               {  

                                                对象属性描述  OAD,  

                                                属性值        Data  

                                              }  

6004        8     一个跨台区结果                     一个跨台区结果∷=structure  

                                               {  

                                                通信地址       TSA  

                                                主节点地址     TSA  

                                                变更时间       DateTimeBCD  

                                              }  

                                                                                                    159  

----------------------- Page 164-----------------------

                                                                             DL/T 698.45—201X  

6012      10    任务配置表                     属性2 （配置表）∷=array 任务配置单元；  

                                          属性3 （记录表）∷=array 记录单元；  

                                          记录单元∷=structure  

                                          {  

                                            采集启动时标  DateTimeBCD,  

                                            采集成功时标  DateTimeBCD,  

                                            采集存储时标  DateTimeBCD,  

                                            采集通信地址  TSA,  

                                            采集的数据 1   Data,  

                                            …  

                                            采集的数据N   Data  

                                          }  

                                          属性4 （监控记录表）∷=array 记录单元；  

                                          记录单元∷=structure  

                                          {  

                                            采集启动时标  DateTimeBCD,  

                                            采集成功时标  DateTimeBCD,  

                                            采集存储时标  DateTimeBCD,  

                                            采集通信地址  TSA,  

                                            本次采集的数据1     Data,  

                                            变化前采集的数据1   Data,  

                                              

                                            …  

                                            本次采集的数据N     Data,  

                                            变化前采集的数据N   Data  

                                          }  

                                          方法127：Add(array 任务配置单元)  

                                          添加或更新一组任务配置单元。  

                                          方法128：Delete(array  任务ID )  

                                          删除一组配置单元。  

                                          方法129：Clear()  

                                          清空任务配置表。  

6013       8    任务配置单元                    属性2 （任务配置单元）∷=structure  

                                          {  

                                            任务ID    unsigned  

                                            执行频率  TI,  

                                            方案类型  enum  

                                            {  

                                              普通采集方案  （1）,   事件采集方案  （2）,  

                                              透明方案      （3）,   上报方案      （4）,  

                                              脚本方案      （5）,   实时监控方案  （6）  

                                            },  

                                                                                           160  

----------------------- Page 165-----------------------

                                                                                DL/T 698.45—201X  

                                             方案编号    unsigned,  

                                             开始时间    DateTimeBCD ,  

                                             结束时间    DateTimeBCD ,  

                                             延时        TI ,  

                                             执行优先级  enum{首要（1）,必要（2）,需要（3）,可能（4）},  

                                             状态        enum{正常 （1）,停用 （2）},  

                                             任务开始前脚本id   long-unsigned,  

                                             任务完成后脚本id   long-unsigned,  

                                             任务运行时段       structure,  

                                            }  

                                            当方案类型为脚本时,方案编号为脚本id。  

                                           任务运行时段::=structrue  

                                            {  

                                              类型  enum  

                                               {  

                                                  前闭后开     （0）,  

                                                  前开后闭     （1）,  

                                                  前闭后闭     （2）,  

                                                  前开后开     （3）  

                                               },  

                                               时段表  array 时段  

                                            }  

                                            时段::=structure  

                                            {  

                                               起始小时  unsigned,  

                                               起始分钟  unsigned,  

                                               结束小时  unsigned,  

                                               结束分钟  unsigned  

                                            }  

6014       11    普通采集方案集                   属性2∷=array 普通采集方案  

                                           方法127：Add(array 普通采集方案)  

                                           添加或更新一组普通采集方案。  

                                           方法128：Delete(array 方案编号)  

                                           删除一组普通采集方案。  

                                           方法129：Clear()  

                                           清空普通采集方案集。  

                                           方法130：Set_CSD (方案编号,array CSD)  

                                           重置方案的记录列选择。  

6015       8     普通采集方案                    属性2 （普通采集方案）∷=structure  

                                            {  

                                             方案编号  unsigned,  

                                             存储深度  long-unsigned,  

                                                                                              161  

----------------------- Page 166-----------------------

                                                                                                DL/T 698.45—201X  

                                                       采集方式  structure  

                                                       {  

                                                         采集类型  unsigned,  

                                                         采集内容  Data  

                                                       },  

                                                       记录列选择  array CSD,  

                                                       电能表集合  MS,  

                                                       存储时标选择 enum  

                                                       {  

                                                            未定义               （0）,  

                                                            任务开始时间         （1）,  

                                                            相对当日0 点0 分     （2）,  

                                                            相对上日23 点59 分   （3）,  

                                                            相对上日0 点0 分     （4）,  

                                                            相对当月1 日0 点0 分（5）  

                                                       }  

                                                     }  

                                                     采集方式数据格式如下：  

                                                      采集类型                  采集内容                   表示  

                                                      0                     NULL                   采集当前数据  

                                                      1                     unsigned               采集上第N 次  

                                                      2                     NULL                   按冻结时标采集  

                                                      3                     TI                     按时标间隔采集  

                                                       

6016         11     事件采集方案集                          属性2∷=array 事件采集方案  

                                                     方法127：Add(array 事件采集方案)  

                                                     添加或更新一组事件采集方案。  

                                                     方法128：Delete(array 方案编号)  

                                                     删除一组事件采集方案。  

                                                     方法129：Clear()  

                                                     清空事件采集方案集。  

                                                     方法130：UpdateReportFlag(方案编号,上报标识)  

                                                     上报标识∷=bool  

6017         8      事件采集方案                           属性2 （事件采集方案Event acq plan）∷=structure  

                                                     {  

                                                       方案编号        unsigned,  

                                                       采集的事件数据  array ROAD,  

                                                       电能表集合      MS,  

                                                       上报标识        bool （True：立即上报；False:不上报）,  

                                                       存储深度        long-unsigned  

                                                     }  

6018         11     透明方案集                            属性2∷=array 透明方案  

                                                     方法127：Add(透明方案)  

                                                                                                                  162  

----------------------- Page 167-----------------------

                                                                                  DL/T 698.45—201X  

                                             添加更新一个透明方案或添加一组方案内容。  

                                             方法128：AddMeterFrame(方案编号,通信地址, 方案控制标志, 

                                             方案报文集)  

                                             添加一组报文。  

                                             方法129：Delete(方案编号,array 通信地址)  

                                             删除一个方案的一组方案内容。  

                                             方法130：Delete (array 方案编号)  

                                             删除一组透明方案。  

                                             方法131：Clear()  

                                             清空透明方案集。  

6019       8     透明方案                        属性2 （透明方案）∷=structure  

                                             {  

                                               方案编号     unsigned,  

                                               方案内容集   array 方案内容  

                                             }  

                                             方案内容∷=structure  

                                             {  

                                               通信地址                 TSA,  

                                               开始前脚本id              long-unsigned,  

                                               完成后脚本id         long-unsigned,  

                                               方案控制标志          structure  

                                               方案报文集            array 方案报文  

                                             }  

                                             方案控制标志∷=structure  

                                             {  

                                               上报透明方案结果并等待后续报文    bool,  

                                               等待后续报文超时时间(秒)          long-unsigned,  

                                               结果比对标识    enum{ 不比对(0),比对(1),比对上报（2） },  

                                               结果比对参数                      structure  

                                             }  

                                             方案报文∷=structure  

                                             {  

                                               报文序号  unsigned,  

                                               报文内容  octet-string  

                                             }  

                                             结果比对参数∷=structure  

                                             {  

                                               特征字节      unsigned,  

                                               截取开始      long-unsigned,  

                                               截取长度      long-unsigned  

                                             }  

601A       11    透明方案结果集                     属性2∷=array 一个透明方案结果  

                                                                                                 163  

----------------------- Page 168-----------------------

                                                                                   DL/T 698.45—201X  

601B       8     一个透明方案结果                    一个透明方案结果∷=structure  

                                              {  

                                               方案编号      unsigned,  

                                               方案执行时间  DateTimeBCD,  

                                               通信地址      TSA,  

                                               结果集        array 结果  

                                             }  

                                             结果∷=structure  

                                              {  

                                               报文序号      unsigned,  

                                               报文响应时间  DateTimeBCD,  

                                               命令结果      octet-string  

                                             }  

601C       11    上报方案集                       属性2∷=array 上报方案  

                                             方法127：Add(array 上报方案)  

                                             添加或更新一组上报方案。  

                                             方法128：Delete(array 方案编号)  

                                             删除一组上报方案。  

                                             方法129：Clear()  

                                             清空上报方案集。  

601D       8     上报方案                        属性2 （上报方案 report plan）∷=structure  

                                              {  

                                               方案编号          unsigned,  

                                               上报通道          array OAD,  

                                               上报响应超时时间  TI,  

                                               最大上报次数      unsigned,  

                                               上报内容          strcuture  

                                                {  

                                                 类型  unsigned,  

                                                 数据  Data  

                                               }  

                                             }  

                                             上报内容：  

                                              上报类型             上报内容            表示  

                                              0                OAD             对象属性数据  

                                               1               RecordData      上报记录型对象属性  

                                               

                                             RecordData∷=structure  

                                              {  

                                               主对象属性描述符      OAD,  

                                               记录型对象属性描述符  RCSD,  

                                               行选择                RSD  

                                                                                                  164  

----------------------- Page 169-----------------------

                                                                                        DL/T 698.45—201X  

                                                }  

601E        11    采集规则库                         属性2 （采集规则库）∷=array 采集规则  

                                                方法127：Add(array 采集规则)  

                                                添加或更新一组采集规则。  

                                                方法128：Delete(array CSD)  

                                                删除一组采集规则。  

                                                方法129：Clear()  

                                                清空采集规则库。  

601F        8     采集规则                          属性2∷=structure  

                                                {  

                                                  数据列选择描述符  CSD,  

                                                  规则描述  structrue  

                                                  {  

                                                    AcqCmd_2007  structure  

                                                    {  

                                                      主用DI  array octet-string(SIZE(4)),  

                                                      备用DI  array octet-string(SIZE(4))  

                                                    },  

                                                    AcqCmd_1997  structure  

                                                    {  

                                                      主用DI  array octet-string(SIZE(2)),  

                                                      备用DI  array octet-string(SIZE(2))  

                                                    },  

                                                    AcqCmd_Trans  structure  

                                                    {  

                                                      Frame  octet-string  

                                                    }  

                                                  }  

                                                }  

                                                当主用DI 无法抄到时,使用备用DI 替换抄读。  

                                                DI 为多功能电能表通信协议中的数据标识,见DL/T 645-2007。  

6032        11    采集状态集                         属性2 数据∷= array 一个采集状态  

6033        8     一个采集状态                        一个采集状态∷=structure  

                                                {  

                                                  通信地址              TSA,  

                                                  中继级别              unsigned,  

                                                                                                       165  

----------------------- Page 170-----------------------

                                                                             DL/T 698.45—201X  

                                            中继地址              TSA,  

                                            端口                  OAD,  

                                            最后一次采集成功时间  DateTimeBCD,  

                                            采集失败次数          unsigned,  

                                            相位       enum{未知 （0）,A 相 （1）,B 相 （2）,C 相 （3）},  

                                            相序异常   enum{正常（0）,LN 互易（1）,逆相序（2）}  

                                          }  

6034      11    采集任务监控集                   属性2∷=array 采集任务监控单元  

6035       8    采集任务监控单元                  采集任务监控单元∷=structure  

                                          {  

                                            任务ID                 unsigned  

                                            任务执行状态            enum  

                                            {  

                                               未执行 （0）,  

                                               执行中 （1）,  

                                               已执行 （2）  

                                            },  

                                            任务执行开始时间         DateTimeBCD,    

                                            任务执行结束时间         DateTimeBCD,     

                                            采集总数量               long-unsigned,  

                                            采集成功数量             long-unsigned,  

                                            已发送报文条数           long-unsigned,  

                                            已接收报文条数           long-unsigned,  

                                          }  

                                          说明：采集成功数量、已发送报文条数、已接收报文条数,每次任 

                                          务执行先清零。  

6040       8    采集启动时标                    属性2∷=DateTimeBCD  

6041       8    采集成功时标                    属性2∷=DateTimeBCD  

6042       8    采集存储时标                    属性2∷=DateTimeBCD  

6051      11    实时监控采集方案集                 属性2∷=array 实时监控采集方案  

                                          方法127：Add(array 实时监控采集方案)  

                                          添加或更新一组实时监控采集方案。  

                                          方法128：Delete(array 方案编号)  

                                          删除一组实时监控采集方案。  

                                          方法129：Clear()  

                                          清空实时监控采集方案。  

                                          方法130：UpdateReportFlag(方案编号,上报标识)  

                                          上报标识∷=bool  

6052       8    实时监控采集方案                  属性2 （实时监控采集方案）∷=structure  

                                          {  

                                            方案编号         unsigned,  

                                            监控数据         array CSD,  

                                                                                           166  

----------------------- Page 171-----------------------

                                                                              DL/T 698.45—201X  

                                              电能表集合       MS,  

                                              变化后上报标识   bool （True：立即上报；False:不上报）  

                                            }  

  

A.8  集合类对象  

    有关集合类的对象标识定义见表A.8  。  

                                   表A.8  集合类对象标识定义  

对象标识   接口类                对象名称                             实例的对象属性及方法定义  

   OI       IC  

  7000      11    文件集合                      方法127：WriteFile （文件名,偏移,内容）  

                                            写文件。  

                                            方法128：Execute(文件名)  

                                            执行文件。  

                                            方法129：DeleteFile(文件名)  

                                            删除文件。  

                                            文件名∷=visible-string  

                                            偏移∷=double-long  

                                            内容∷=octet-string  

  7001      8     文件                        属性2：文件  

                                            文件∷=structure  

                                            {  

                                              文件名    visible-string,  

                                              扩展名    visible-string,  

                                              文件长度  long-unsigned,  

                                              创建时间  DateTimeBCD,  

                                              修改时间  DateTimeBCD,  

                                              数据来源  enum  

                                              {  

                                               主站（0）,终端自身（1）,采集器（2）,电能表（3）,其它（255）  

                                              },  

                                              文件内容  octet-string  

                                            }  

                                            文件名：不包含扩展名；  

                                            扩展名：取专用文件格式描述符或者非标准自定义文件描述符,如  

                                            Dat、jpg、bmp、mp3、mpeg、avi、等；  

                                            文件长度：单位字节；  

                                            数据来源：描述文件数据内容来源；  

                                            文件内容：文件的数据内容。  

  7010      11    脚本集合                      属性2∷=array 脚本  

                                                                                            167  

----------------------- Page 172-----------------------

                                                                          DL/T 698.45—201X  

                                         方法127：Add(脚本)  

                                         添加更新一个脚本。  

                                         方法128：Delete(脚本id)  

                                         删除一个脚本。  

                                         方法129：Execute(脚本id)   

                                         执行脚本。  

                                         方法130：Clear()  

                                         清空脚本集。  

                                         脚本id∷=long-unsigned  

  7011      8    脚本                      属性2：脚本  

                                         脚本∷=structure  

                                          {  

                                           脚本ID  long-unsigned,  

                                           操作集  array 一个操作  

                                          }  

                                         一个操作∷=APDU  

                                         一个操作等价于一个APDU。  

  7012      11   脚本执行结果集                 属性2∷=array 一个脚本执行结果  

  7013      8    一个脚本执行结果                脚本执行结果∷=structure  

                                          {  

                                           脚本ID         long-unsigned,  

                                           脚本执行时间    DateTimeBCD,  

                                           脚本执行结果集  array 一个执行结果  

                                          }  

                                         一个执行结果∷=APDU  

                                         一个结果等价于一个APDU。  

  7100      11   扩展变量对象集合                属性2：扩展变量对象集合  

                                         扩展变量对象集合∷=array 变量类对象  

                                         变量类对象∷=Data  

  7101      11   扩展参变量对象集合               属性2：扩展参变量对象集合  

                                         扩展参变量对象集合∷=array 参变量类对象  

                                         参变量类对象∷=Data  

                                           

      

A.9  控制类对象  

    有关控制类的对象标识定义见表A.9  。  

                                 表A.9  控制类对象标识定义  

对象标识   接口类               对象名称                           实例的对象属性及方法定义  

   OI      IC  

                                                                                       168  

----------------------- Page 173-----------------------

                                                                         DL/T 698.45—201X  

8000      8    遥控                       属性2 “配置参数”∷=structure  

                                        {  

                                          继电器拉闸电流门限值    double-long-unsigned （单位：A, 

                                        换算-3）,  

                                          超电流门限保护延时时间  long-unsigned （单位：分钟,换算 

                                        0）  

                                        }  

                                        属性3 “继电器输出状态”∷=bit-string(SIZE(8))  

                                        继电器输出状态：bit0～bit7 分别按顺序对位表示1～8 号继电器 

                                        遥控跳闸输出状态,置“1”：跳闸状态；置“0”：合闸状态。  

                                        属性4 “告警状态”∷=bit-string(SIZE(8))  

                                        告警状态：bit0～bit7 分别按顺序对位表示1～8 号继电器遥控告 

                                        警输出状态,置“1”：处于告警状态；置“0”：未处于告警状态。  

                                        属性5 “命令状态”∷=array unsigned  

                                        方法127：触发告警（参数）  

                                        参数∷=NULL  

                                        方法128：解除报警（参数）  

                                        参数∷=NULL  

                                        方法129：跳闸（参数）  

                                        参数∷=array structure  

                                        {  

                                          继电器      OAD,  

                                          告警延时    unsigned （单位：分钟,换算：0）,  

                                          限电时间    long-unsigned （单位：分钟,换算：0）,  

                                          限电时间    long-unsigned （单位：分钟,0 表示永久限电）,  

                                          自动合闸    bool （True：自动合闸；False：非自动合闸）  

                                        }  

                                        方法130：合闸（参数）  

                                        参数∷=array structure  

                                        {  

                                          继电器    OAD,  

                                          命令      enum{合闸允许 （0）,直接合闸 （1）}  

                                        }  

8001      8    保电                       属性2：保电状态∷=enum{解除 （0）,保电 （1）}  

                                        方法127：投入保电（参数）  

                                        参数∷=NULL  

                                        用于投入保电状态,即禁止一切执行跳闸的继电器输出控制,且恢 

                                        复已跳闸的继电器输出控制。  

                                        方法128：解除保电（参数）  

                                        参数∷=NULL  

                                        用于解除保电状态,即允许按实际情况或命令执行跳闸的继电器输 

                                        出控制。  

                                                                                      169  

----------------------- Page 174-----------------------

                                                                             DL/T 698.45—201X  

8002       8    催费告警                      属性2：催费告警状态∷=enum{未告警(0),告警(1)}  

                                          方法127：催费告警（参数）  

                                          参数∷=structure  

                                          {  

                                            告警时段：octet-string(SIZE(3)),  

                                            告警信息：visible-string(200)  

                                          }  

                                          方法128：取消催费告警（参数）  

                                          参数∷=NULL  

8003      11    一般中文信息                    属性2∷= array ChineseInfo  

                                          ChineseInfo∷=structure  

                                          {  

                                            序号：unsigned,  

                                            发布时间：DateTimeBCD_S,  

                                            已阅读标识：bool,  

                                            信息内容：visible-string(SIZE(200))  

                                          }  

                                          方法127：添加信息（序号,发布时间,信息内容）  

                                          序号∷=unsigned  

                                          发布时间∷=DateTimeBCD_S  

                                          信息内容∷=visible-string(SIZE(200))  

                                            

                                          方法128：删除信息（序号）  

                                          序号参见方法 127。  

8004      11    重要中文信息                    属性2∷= array ChineseInfo  

                                          ChineseInfo 定义参见8003。  

                                          方法127：添加信息（序号,发布时间,信息内容）  

                                          序号∷=unsigned  

                                          发布时间∷=DateTimeBCD_S  

                                          信息内容∷=visible-string(SIZE(200))  

                                            

                                          方法128：删除信息（序号）  

                                          序号参见方法 127。  

8100       8    终端保安定值                    终端保安定值∷=long64 （单位：W,换算：-1）  

8101       8    终端功控时段                    属性2 “配置参数”∷=array unsigned   

                                          终端功控时段单元格式见表A.10  。  

8102       8    功控告警时间                    属性2 “配置参数”∷=array unsigned  

                                          告警时间按顺序表示1-n 轮次的功控告警时间（单位：分钟）  

8103      13    时段功控                      属性2 “控制方案集”∷=array 时段功控配置单元  

                                          方法127：时段功控方案切换（总加组对象,控制方案）  

                                          总加组对象∷= OI  

                                          控制方案∷=structure  

                                                                                           170  

----------------------- Page 175-----------------------

                                                                            DL/T 698.45—201X  

                                          {  

                                            时段功控投入标识    bit-string(SIZE(8)),  

                                            时段功控定值方案号  unsigned  

                                          }  

                                          时段功控投入标识：D0～D7 按顺序对位表示第1～第8 时段,置“1”： 

                                          有效,置“0”：无效。  

                                          时段功控定值方案号：数值范围：0～2 依次表示第1～第3 套方案, 

                                          其他值无效。  

8104      13    厂休控                       属性2 “控制方案集”∷=array 厂休控配置单元  

8105      13    营业报停控                     属性2 “控制方案集”∷=array 营业报停控配置单元  

8106      13    当前功率下浮控                   属性2：不可访问  

                                          方法127 投入（总加组对象,控制方案）  

                                          总加组对象∷=OI  

                                          控制方案∷=structure  

                                          {  

                                            当前功率下浮控定值滑差时间    unsigned （单位：分钟）,  

                                            当前功率下浮控定值浮动系数    integer （单位：%）,  

                                            控后总加有功功率冻结延时时间  unsigned （单位：分钟）,  

                                            当前功率下浮控的控制时间      unsigned （单位：0.5 小时）,  

                                            当前功率下浮控第1 轮告警时间  unsigned （单位：分钟）,  

                                            当前功率下浮控第2 轮告警时间  unsigned （单位：分钟）,  

                                            当前功率下浮控第3 轮告警时间  unsigned （单位：分钟）,  

                                            当前功率下浮控第4 轮告警时间  unsigned （单位：分钟）  

                                          }  

8107      13    购电控                       属性2 “控制方案集”∷=array 购电控配置单元  

8108      13    月电控                       属性2 “控制方案集”∷=array 月电控配置单元  

8109      8     时段功控配置单元                  属性2∷=structure  

                                          {  

                                            总加组对象  OI,  

                                            方案标识    bit-string(SIZE(8)),  

                                            第一套定值  PowerCtrlParam,  

                                            第二套定值  PowerCtrlParam,  

                                            第三套定值  PowerCtrlParam,  

                                            时段功控定值浮动系数  integer （单位：%）  

                                          }  

                                          PowerCtrlParam ∷=structure  

                                          {  

                                              时段号          bit-string(SIZE(8)),  

                                              时段1 功控定值  long64 （单位：W,换算：-1）,  

                                              时段2 功控定值  long64 （单位：W,换算：-1）,  

                                              时段3 功控定值  long64 （单位：W,换算：-1）,  

                                              时段4 功控定值  long64 （单位：W,换算：-1）,  

                                                                                          171  

----------------------- Page 176-----------------------

                                                                                DL/T 698.45—201X  

                                                 时段5 功控定值  long64 （单位：W,换算：-1）,  

                                                 时段6 功控定值  long64 （单位：W,换算：-1）,  

                                                 时段7 功控定值  long64 （单位：W,换算：-1）,  

                                                 时段8 功控定值  long64 （单位：W,换算：-1）  

                                            }  

810A       8     厂休控配置单元                    属性2∷=structure  

                                            {  

                                              总加组对象    OI,  

                                              厂休控定值    long64 （单位：W,换算：-1）,  

                                              限电起始时间  DateTimeBCD_S （年=99H,月=99H,日=99H）,  

                                              限电延续时间  long-unsigned （单位：分钟）,  

                                              每周限电日    bit-string(SIZE(8))   

                                            }  

                                            每周限电日：D1～D7 表示星期一～星期日,D0=0。  

810B       8     营业报停控配置单元                  属性2∷=structure  

                                            {  

                                              总加组对象      OI,  

                                              报停起始时间    DateTimeBCD_S （时=99H,分=99H）,  

                                              报停结束时间    DateTimeBCD_S （时=99H,分=99H）,  

                                              报停控功率定值  long64 （单位：W,换算：-1）  

                                            }  

810C       8     购电控配置单元                    属性2∷=structure  

                                            {  

                                                总加组对象     OI,  

                                                 购电单号       double-long-unsigned,  

                                                 追加/刷新标识  unsigned,  

                                                 购电量(费)值   long64 （单位：kWh/元, 换算：-4）,  

                                                报警门限值     long64 （单位：kWh/元,换算：-4）,  

                                                跳闸门限值     long64 （单位：kWh/元,换算：-4）  

                                                购电控模式     enum{本地模式 （0）,远程模式 （1）}  

                                            }  

810D       8     月电控配置单元                    属性2∷=structure  

                                            {  

                                                总加组对象      OI,  

                                                 月电量控定值    long64 （单位：kWh,换算：-4）,  

                                                报警门限值系数  unsigned （单位：%）,  

                                                 月电量控定值浮动系数  integer （单位：%）  

                                            }  

810E       8     控制对象                         

810F       8     跳闸轮次                         

8110       8     电控定值                         

    

                                                                                               172  

----------------------- Page 177-----------------------

                                                                   DL/T 698.45—201X  

    终端功控时段数据单元格式见表A.10  。  

                           表A.10  终端功控时段数据单元格式  

                             数据内容  
                                                                        字节数  
  D7       D6      D5      D4      D3      D2       D1      D0  

    1:30-2:00       1:00-1:30        0:30-1:00       0:00-0:30         第1 字节  

    3:30-4:00       3:00-3:30        2:30-3:00       2:00-2:30         第2 字节  

      ……              ……               ……              ……                   

   23:30-24:00     23:00-23:30      22:30-23:00     22:00-22:30        第12 字节  

      
    a)  每半小时以两位编码表示4 种控制状态：取值0～3 依次表示不控制、控制1、控制2、保留。  
    b)  控制状态标识的应用规则：连续时间单元具有相同控制状态标识表示同一控制时段；连续时间 
        单元具有不同控制状态标识,表示相邻的两个时段,控制1 与控制2 用以区分具备2 个不同的 
        定值的连续时段,当控制状态标识发生变化时,表示前一控制时段结束,后一控制时段开始, 
       对于不连续的控制时段可以用控制1 或控制2 表示。  

A.10  文件传输类对象  

    有关文件传输类的对象标识定义见表A.11  。  

                            表A.11  文件传输类对象标识定义  

对象标识   接口类            对象名称                         实例的对象属性及方法定义  

   OI     IC  

  F000    18    文件分帧传输管理             属性4 （文件内容）∷=octet-string  

                                     传输文件的内容,由分帧服务完成分帧传输。  

                                     写文件内容：用SET方法,目标文件不存在则创建,并清零当前指 

                                     针。  

                                     读文件内容：用GET方法,源文件不存在则返回错误,目标文件不 

                                     存在则创建,并清零当前指针。  

                                     属性5 （当前指针）∷=double-long-unsigned  

                                      当前传输文件的所在位置指针,单位byte。用于断点续传。  

  F001    18    文件分块传输管理             属性4 （传输块大小）∷=long-unsigned  

                                     传输块大小：传输文件的分块尺寸。  

                                     传输块总数 = 文件大小/传输块大小。  

                                     属性5 （传输块状态字）∷=bit-string  

                                     按bit 位标识每个数据块的传输状态,bit0 代表第一个数据块, 

                                     依次类推。bitN=0,表示未传输,bitN=1,表示传输成功（N 从0~ 

                                     总传输块数-1）。  

                                     方法7：写文件（参数）  

                                     参数∷=structure  

                                      {  

                                                                               173  

----------------------- Page 178-----------------------

                                                                              DL/T 698.45—201X  

                                              块序号  long-unsigned,  
                                              块数据  octet-string  

                                           }  

                                           目标文件不存在则创建,并清零传输状态字。  

                                           方法8：读文件（参数）  

                                           参数∷=structure  

                                           {  

                                              块序号  long-unsigned  

                                           }  

                                           应答∷=structure  
                                           {  
                                              块数据  octet-string  

                                           }  

                                           源文件不存在则返回错误,目标文件不存在则创建,并清零传输状 

                                           态字。  

                                           方法9：软件比对（参数）  

                                           参数∷=structure  
                                           {  

                                            CPU 编号      unsigned,  

                                             密钥索引      unsigned,  

                                             因子起始地址  double-long-unsigned,  

                                             数据起始地址  double-long-unsigned  

                                           }  
                                           应答∷=structure  
                                           {  

                                             比对块数据  octet-string  

                                           }  

                                           软件比对是指：对设备的软件进行比对,命令中CPU 编号的bit0～ 

                                           bit2 有效,其它保留。该字节缺省为00,如设备内部存在多个CPU, 

                                           主CPU 编号为0,其它自行编号,最多支持8 个CPU。  

                                           软件比对命令中如果比对因子起始地址或比对数据起始地址超出 

                                           设备MCU 的地址空间,则认为设备不支持这部分数据,返回应答“地 

                                           址异常”。  

                                           软件比对命令中比对因子和比对数据的起始地址用绝对地址表示。  

                                           软件比对命令中嵌有安全模块的设备应采用安全模块加密保护方 

                                           式比对,不支持异或加密方式比对；未嵌安全模块的设备应采用异 

                                           或加密方式比对。  

                                           软件比对命令中未嵌安全模块的设备比对密钥索引固定为0。  

                                           异或加密方式见附录D.  

F002      18    文件扩展传输管理                   属性4 （服务器信息）∷=structure  

                                           {  

                                             IP 地址  octet-string,  

                                             端口    long-unsigned,  

                                             用户名  visible-string,  

                                                                                            174  

----------------------- Page 179-----------------------

                                                                                 DL/T 698.45—201X  

                                               密码    visible-string  

                                             }  

                                             扩展传输是对基于TCP 连接的通用文件传输协议的扩展支持。  

                                             方法7：从服务器下载 （参数）  

                                             参数∷=enum  

                                             {  

                                               telnet+zmodem 协议 （0）,  

                                               ftp 协议            （1）,  

                                               sftp 协议           （2）,  

                                               http 协议           （3）,  

                                               https 协议          （4）  

                                             }  

                                             以客户机模式主动连接指定远程服务器下载文件,并通过“命令结 

                                             果”反馈执行情况。目标文件不存在则创建。  

                                             方法8：上传到服务器 （参数）  

                                             参数∷=enum  

                                             {  

                                               telnet+zmodem 协议 （0）,  

                                               ftp 协议           （1）,  

                                               sftp 协议          （2）,  

                                               http 协议          （3）,  

                                               https 协议         （4）  

                                             }  

                                             以客户机模式主动连接指定远程服务器上传文件,并通过“命令结 

                                             果”反馈执行情况。源文件不存在则返回错误,目标文件不存在则 

                                             创建。  

      

A.11  ESAM接口类对象  

     有关ESAM接口类的对象标识定义见表A.12  。  

                                 表A.12  ESAM 接口类对象标识定义  

对象标识   接口类                 对象名称                              实例的对象属性及方法定义  

   OI       IC  

  F100      21     ESAM                         

  F101       8     安全模式参数                    属性2 安全模式选择∷=enum  

                                             {  

                                               不启用安全模式参数 （0）,  

                                               启用安全模式参数   （1）  

                                             }  

                                             属性3 显式安全模式参数∷=array 安全模式参数  

                                                                                               175  

----------------------- Page 180-----------------------

                                                                           DL/T 698.45—201X  

                                          安全模式参数∷=structure  

                                          {  

                                            对象标识   OI,  

                                            安全模式   long-unsigned  

                                          }  

                                          安全模式选择意义：0—不启用安全模式参数、默认安全模式参数, 

                                          1—启用安全模式参数、默认安全模式参数。  

                                          属性3 为显式安全模式参数（设置值）,如果对象安全性不在属性 

                                          3 中,则按默认安全模式参数。如果同一对象安全性在安全模式参 

                                          数、默认安全模式参中均有说明,则按显式安全模式参数执行。安 

                                          全模式参数、默认安全参数具体定义见附录F,安全模式定义见附 

                                          录F 中表F.1。  

                                            

                                          方法1：复位（参数）  

                                          参数∷=integer （0）  

                                          复位时,清空属性3。  

                                          方法127：增加显式安全模式参数 （对象标识,权限）  

                                          对象标识∷=OI,  

                                          权限∷= long-unsigned  

                                          方法128：删除显式安全模式参数 （对象标识）  

                                          对象标识∷=OI  

                                          方法129：批量增加显式安全模式参数 （array 安全模式参数）  

                                          安全模式参数∷=structure  

                                          {  

                                            对象标识    OI,  

                                            安全模式    long-unsigned  

                                          }  

A.12  输入输出设备类对象  

                             表A.13  输入输出设备类对象标识定义  

对象标识      接口类            对象名称                            实例的对象属性及方法定义  

   OB       IC  

  F200      22    RS232                   属性2 “设备对象列表”::=array 端口  

                                          端口::=structure  

                                          {  

                                            端口描述符 visible-string,  

                                            端口参数   COMDCB,  

                                            端口功能   enum{上行通信（0）,抄表（1）,级联（2）,停用（3）}  

                                          }  

                                          方法127：配置端口（端口号,端口参数,端口功能）  

  F201      22    RS485                   同F200 定义。  

                                                                                         176  

----------------------- Page 181-----------------------

                                                                                  DL/T 698.45—201X  

F202       22     红外                         属性2 “设备对象列表”::=array 红外端口  

                                             红外端口::=structure  

                                             {  

                                               端口描述符    visible-string,  

                                               端口参数      COMDCB  

                                             }  

                                             方法127：配置端口（端口号,端口参数）  

F203       22     开关量输入                      属性2 “设备对象列表”∷=array 开关量单元  

                                             开关量单元∷=structure  

                                             {  

                                               状态ST  unsigned,  

                                               变位CD  unsigned  

                                             }  

                                             状态ST——0：“分”状态；1：“合”状态。  

                                             变位 CD——0：自前次遥信传送后无状态变化；1：自前次遥信传 

                                             送后至少有一次状态变化。  

                                             属性4∷=structure  

                                             {  

                                               开关量接入标志bit-string(SIZE （8）)  

                                                （  

                                                 bit0～bit7 按顺序对位表示第1～8 路状态量输入,置“1”： 

                                             接入,置“0”：未接入。  

                                               ）,  

                                               开关量属性标志bit-string(SIZE （8）)  

                                                （  

                                                 bit0～bit7 按顺序对位表示第 1～8 路状态量输入,置“1” 

                                             常开触点。置“0”：常闭触点。  

                                               ）  

                                             }  

F204       22     直流模拟量                      属性2 “设备对象列表”∷=array 直流模拟量单元  

                                             直流模拟量单元∷=structure  

                                             {  

                                               当前值：double-long  

                                             }  

                                             属性4∷=array 直流模拟量配置  

                                             直流模拟量配置∷=structure  

                                             {  

                                               量程起始值  double-long,  

                                               量程结束值  double-long,  

                                               换算及单位  Scaler_Unit  

                                             }  

F205       22     继电器输出                      属性2 “设备对象列表”∷=array 继电器单元  

                                                                                                 177  

----------------------- Page 182-----------------------

                                                                                     DL/T 698.45—201X  

                                               继电器单元∷=structure  

                                               {  

                                                 描述符    visible-string,  

                                                 当前状态  enum{未输出 （0）,输出 （1）},  

                                                 开关属性  enum{脉冲式 （0）,保持式 （1）},  

                                                 接线状态  enum{接入(0),未接入(1) }  

                                               }  

F206        22     告警输出                        属性2 “设备对象列表”∷=array 告警单元  

                                               告警单元∷=structure  

                                               {  

                                                 状态   enum{未输出 （0）,输出 （1）}  

                                               }  

                                               属性4∷=array 允许告警时段  

                                               允许告警时段∷=structure  

                                               {  

                                                 起始时间  Time,  

                                                 结束时间  Time  

                                               }  

F207        22     多功能端子                       属性2 “设备对象列表”∷=array 端子  

                                               端子∷=structure  

                                               {  

                                                 工作模式   enum  

                                                 {  

                                                    秒脉冲输出 （0）,  

                                                    需量周期   （1）,  

                                                    时段投切   （2）  

                                                 }  

                                               }  

                                              方法127：修改工作模式（路号,工作模式）  

                                              路号∷=unsigned  

F209        22     载波/微功率无线接口                  属性2 “设备对象列表”::=array 本地通信模块单元  

                                               本地通信模块单元::=structure  

                                               {  

                                                  端口描述符    visible-string,  

                                                  通信参数     COMDCB  

                                               }  

                                               方法127：透明转发（参数）  

                                               参数::=structure  

                                               {  

                                                 通信地址                     TSA,  

                                                 接收等到报文超时时间（秒）   long-unsigned,  

                                                 透明转发命令                 octet-string  

                                                                                                     178  

----------------------- Page 183-----------------------

                                                                                     DL/T 698.45—201X  

                                               }  

                                               返回结果::=octet-string  

  F20A       22     脉冲输入设备                     属性2 “设备对象列表”::=array 脉冲输入单元  

                                               脉冲输入单元::=structure  

                                                {  

                                                  端口描述符    visible-string  

                                               }  

  F20B       22     蓝牙                         属性2 “设备对象列表”::=array 蓝牙模块  

                                               蓝牙模块::=structure  

                                                {  

                                                  端口描述符    visible-string,  

                                                  通信参数     COMDCB  

                                               }  

       

A.13  显示类对象  

     有关显示类的对象标识定义见表A.6  。  

                                     表A.14  显示类对象标识定义  

对象标识   接口类                  对象名称                                实例的对象属性及方法定义  

   OI        IC  

  F300     17       自动轮显                         

  F301     17       按键轮显                         

       
       

                                                                                                    179  

----------------------- Page 184-----------------------

                                                                                                 DL/T 698.45—201X  
                                                     B       B   

                                                     附  录  B  
                                                   （规范性附录）  
                                                物理单位枚举定义  

   物理单位的枚举定义见表B.1  。  

                                          表B.1  物理单位的枚举定义  

代码            单位                           量                            单位名称                          SI 定义  

  1             a                         时间                                年                               

  2            mo                         时间                                月                               

  3            wk                         时间                                周                      7*24*60*60s  

  4             d                         时间                                日                       24*60*60s  

  5             h                         时间                               小时                         60*60s  

  6           min                         时间                                分                           60s  

  7             s                      时间 （t）                               秒                            s  

  8            °                         （相）角                               度                       rad*180/π  

  9            ℃                       温度（T）                             摄氏度                         K-273.15  

  10          货币                      （当地）货币                                                                

  11            m                      长度 （l）                               米                            m  

  12          m/s                      速度 （v）                             米/秒                           m/s  

  13                                   体积 （V）  
                3                                                                                         3 
               m                                                         立方米                             m   
                            rV,仪表常数或脉冲值（容积）  

                3                                                                                         3 
  14           m                      修正的体积                              立方米                             m   

               3                                                                                     3 
  15          m /h                        流量                          立方米每小时                       m /(60*60s)  

               3                                                                                     3 
  16          m /h                    修正的流量                           立方米每小时                       m /(60*60s)  

               3                                                                                   3 
  17          m /d                        流量                        立方米每24 小时                     m /(24*60*60s)  

               3                                                                                   3 
  18          m /d                    修正的流量                         立方米每24 小时                     m /(24*60*60s)  

                                                                                                         -3  3 
  19            l                         容积                                升                          10 m   

  20           kg                      质量 （m）                              千克                           kg  

  21           N                        力 （F）                              牛顿                            N  

  22           Nm                         能量                             牛顿米                         J=Nm=Ws  

                                                                                                           2 
  23            P                      压力 （p）                            帕斯卡                           N/m   

                                                                                                        -5   2 
  24          bar                      压力 （p）                               巴                         10 N/m   

  25            J                         能量                               焦耳                        J=Nm=Ws  

  26          J/h                         热功                            焦每小时                        J/(60*60s)  

  27           W                     有功功率（P）                                瓦                          W=J/s  

  28           kW                    有功功率（P）                               千瓦                     kW=J/(s*1000)  

  29           VA                   视在功率（S）                                伏安                               

  30          kVA                   视在功率（S）                              千伏安                                

                                                                                                                   180  

----------------------- Page 185-----------------------

                                                                                    DL/T 698.45—201X  

  31          var               无功功率（Q）                           乏                          

  32         kvar               无功功率（Q）                          千乏                          

  33                               有功能量  
              kWh                                              千瓦-时                  kW*(60*60s)  
                          rw,有功电能表常数或脉冲值  

  34                               视在能量  
             kVAh                                            千伏-安-小时                 kVA*(60*60s)  
                          rS,视在电能表常数或脉冲值  

  35                               无功能量  
             kvarh                                             千乏-时                 kvar*(60*60s)  
                           rB,无功电能表常数或脉冲  

  36           A                   电流（I）                         安培                       A  

  37           C                   电量 （Q）                        库仑                      C=As  

  38           V                   电压（U）                         伏特                       V  

  39          V/m                电场强度 （E）                       伏每米                      V/m  

  40           F                   电容 （C）                        法拉                    C/V=As/V  

  41           Ω                   电阻 （R）                        欧姆                     Ω=V/A  

               2 
  42         Ωm/m               电阻系数 （ρ）                                                  Ωm  

  43          Wb                 磁通量 （Φ）                         韦伯                     Wb=Vs  

                                                                                             2 
  44           T                磁通密度 （T）                        泰斯拉                      Wb/m   

  45          A/m               磁场强度 （H）                       安培每米                      A/m  

  46           H                   电感 （L）                        亨利                     H=Wb/A  

  47          Hz                     频率                          赫兹                       1/s  

  48        1/(Wh)           有功能量表常数或脉冲                                                 imp/kWh  

  49       1/(varh)          无功能量表常数或脉冲                                                      

  50        1/(VAh)          视在能量表常数或脉冲                                                      

  51           %                    百分比                         百分之                          

  52         byte                    字节                          字节                          

  53          dBm                  分贝毫瓦                                                      

  54        元/kWh                    电价                                                      

  55          Ah                     安时                          安时                          

56…253                                                 保留  

  254                                                其他单位  

  255                                          无单位、缺单位、计数  

      
    数值举例见表B.2  。  

                                           表B.2  数值举例  

         数值                         换算                         单位                         数据  

                                                                 3                              3 
         263788                      -3                         m                      263.783 m   

          593                         3                         Wh                      593 kWh  

          3467                        0                         V                        3467 V  

      
      

                                                                                                   181  

----------------------- Page 186-----------------------

                                                                                 DL/T 698.45—201X  
                                             C      C   

                                             附  录  C  
                                           （规范性附录）  
                                          有关一致性协商  

C.1  协议一致性协商  

     协议一致性协商内容定义见表C.1  。  

                                  表C.1  协议一致性协商内容定义  

                               数据类型定义                                                 说明  

ProtocolConformance ∷=bit-string （SIZE （64））                                              

{  

     应用连接协商Application Association                （0）,  

     请求对象属性Get Normal                             （1）,  

     批量请求基本对象属性Get With List                      （2）,  

     请求记录型对象属性Get Record                          （3）,  

     代理请求对象属性Get Proxy                            （4）,  

     代理请求记录型对象属性Get Proxy Record                  （5）,  

     请求分帧后续帧Get Subsequent Frame                  （6）,  

     设置基本对象属性Set Normal                           （7）,  

     批量设置基本对象属性Set With List                      （8）,  

     设置后读取Set With Get                            （9）,  

     代理设置对象属性Set Proxy                            （10）,  

     代理设置后读取对象属性Set Proxy With Get                （11）,  

     执行对象方法Action Normal                          （12）,  

     批量执行对象方法Action With List                     （13）,  

     执行方法后读取Action With List                      （14）,  

     代理执行对象方法Action Proxy                         （15）,  

     代理执行后读取Action Proxy With Get                 （16）,  

     事件主动上报Active Event Report                    （17）,  

     事件尾随上报                                       （18),  

     事件请求访问位ACD 上报                                （19),  

     分帧数据传输 Slicing Service                       （20）,  

     Get-request 分帧                               （21）,  

     Get-response 分帧                              （22）,  

     Set-request 分帧                               （23）,  

     Set-response 分帧                              （24）,  

     Action-request 分帧                            （25）,  

     Action-response 分帧                           （26）,  

     Proxy-request 分帧                             （27）,  

                                                                                               182  

----------------------- Page 187-----------------------

                                                                                DL/T 698.45—201X  

     Proxy-response 分帧                            （28）,  

     事件上报分帧                                       （29）,  

     DL/T645-2007                                 （30）,  

     安全方式传输                                       （31）,  

     对象属性ID 为0 的读取访问                      （32）,  

     对象属性ID 为0 的设置访问                      （33）  

}  

      

C.2  功能一致性协商  

     功能一致性协商内容定义见表C.2  。  

                                 表C.2  功能一致性协商内容定义  

                              数据类型定义                                                 说明  

FunctionConformance ∷=bit-string （SIZE （128））                                            

{  

     电能量计量                                   （0）,  

    双向有功计量                                   （1）,  

    无功电能计量                                   （2）,  

    视在电能计量                                   （3）,  

    有功需量                                     （4）,  

    无功需量                                     （5）,  

    视在需量                                     （6）,  

     复费率                                     （7）,  

     阀控                                      （8）,  

    本地费控                                     （9）,  

    远程费控                                     （10）,  

    基波电能                                     （11）,  

    谐波电能                                     （12）,  

    谐波含量                                     （13）,  

    波形失真度                                    （14）,  

     多功能端子输出                                 （15）,  

    事件记录                                     （16）,  

    事件上报                                     （17）,  

    温度测量                                     （18）,  

    状态量监测（如：开表盖/开端钮盖）                        （19）,  

     以太网通信                                   （20）,  

     红外通信                                    （21）,  

    蓝牙通信                                     （22）,  

     多媒体采集                                   （23）,  

    级联                                       （24）,  

                                                                                              183  

----------------------- Page 188-----------------------

                                                                                       DL/T 698.45—201X  

     直流模拟量                                       （25）,  

     弱电端子12V 输出                                  （26）,  

     搜表                                          （27）,  

     三相负载平衡                                      （28）,  

     升级                                          （29）,  

     比对                                          （30）  

}      

       
       

                                                                                                       184  

----------------------- Page 189-----------------------

                                                                                    DL/T 698.45—201X  
                                               D      D   

                                               附  录  D  
                                             （资料性附录）  
                                               校验算法  

D.1  校验算法  

     /*  
     * u16 represents an unsigned 16-bit number. Adjust the typedef for  
     * your hardware.  
     * Drew D. Perkins at Carnegie Mellon University.  
     * Code liberally borrowed from Mohsen Banan and D. Hugh Redelmeier.  
     */  
     typedef unsigned short u16;  
     /*  
     * FCS lookup table as calculated by the table generator.  
     */  
     static u16 fcstab[256] = {  
       0x0000, 0x1189, 0x2312, 0x329b, 0x4624, 0x57ad, 0x6536, 0x74bf,  
       0x8c48, 0x9dc1, 0xaf5a, 0xbed3, 0xca6c, 0xdbe5, 0xe97e, 0xf8f7,  
       0x1081, 0x0108, 0x3393, 0x221a, 0x56a5, 0x472c, 0x75b7, 0x643e,  
       0x9cc9, 0x8d40, 0xbfdb, 0xae52, 0xdaed, 0xcb64, 0xf9ff, 0xe876,  
       0x2102, 0x308b, 0x0210, 0x1399, 0x6726, 0x76af, 0x4434, 0x55bd,  
       0xad4a, 0xbcc3, 0x8e58, 0x9fd1, 0xeb6e, 0xfae7, 0xc87c, 0xd9f5,  
       0x3183, 0x200a, 0x1291, 0x0318, 0x77a7, 0x662e, 0x54b5, 0x453c,  
       0xbdcb, 0xac42, 0x9ed9, 0x8f50, 0xfbef, 0xea66, 0xd8fd, 0xc974,  
       0x4204, 0x538d, 0x6116, 0x709f, 0x0420, 0x15a9, 0x2732, 0x36bb,  
       0xce4c, 0xdfc5, 0xed5e, 0xfcd7, 0x8868, 0x99e1, 0xab7a, 0xbaf3,  
       0x5285, 0x430c, 0x7197, 0x601e, 0x14a1, 0x0528, 0x37b3, 0x263a,  
       0xdecd, 0xcf44, 0xfddf, 0xec56, 0x98e9, 0x8960, 0xbbfb, 0xaa72,  
       0x6306, 0x728f, 0x4014, 0x519d, 0x2522, 0x34ab, 0x0630, 0x17b9,  
       0xef4e, 0xfec7, 0xcc5c, 0xddd5, 0xa96a, 0xb8e3, 0x8a78, 0x9bf1,  
       0x7387, 0x620e, 0x5095, 0x411c, 0x35a3, 0x242a, 0x16b1, 0x0738,  
       0xffcf, 0xee46, 0xdcdd, 0xcd54, 0xb9eb, 0xa862, 0x9af9, 0x8b70,  
       0x8408, 0x9581, 0xa71a, 0xb693, 0xc22c, 0xd3a5, 0xe13e, 0xf0b7,  
       0x0840, 0x19c9, 0x2b52, 0x3adb, 0x4e64, 0x5fed, 0x6d76, 0x7cff,  
       0x9489, 0x8500, 0xb79b, 0xa612, 0xd2ad, 0xc324, 0xf1bf, 0xe036,  
       0x18c1, 0x0948, 0x3bd3, 0x2a5a, 0x5ee5, 0x4f6c, 0x7df7, 0x6c7e,  
       0xa50a, 0xb483, 0x8618, 0x9791, 0xe32e, 0xf2a7, 0xc03c, 0xd1b5,  
       0x2942, 0x38cb, 0x0a50, 0x1bd9, 0x6f66, 0x7eef, 0x4c74, 0x5dfd,  
       0xb58b, 0xa402, 0x9699, 0x8710, 0xf3af, 0xe226, 0xd0bd, 0xc134,  
       0x39c3, 0x284a, 0x1ad1, 0x0b58, 0x7fe7, 0x6e6e, 0x5cf5, 0x4d7c,  

                                                                                                   185  

----------------------- Page 190-----------------------

                                                                                   DL/T 698.45—201X  

   0xc60c, 0xd785, 0xe51e, 0xf497, 0x8028, 0x91a1, 0xa33a, 0xb2b3,  
   0x4a44, 0x5bcd, 0x6956, 0x78df, 0x0c60, 0x1de9, 0x2f72, 0x3efb,  
   0xd68d, 0xc704, 0xf59f, 0xe416, 0x90a9, 0x8120, 0xb3bb, 0xa232,  
   0x5ac5, 0x4b4c, 0x79d7, 0x685e, 0x1ce1, 0x0d68, 0x3ff3, 0x2e7a,  
   0xe70e, 0xf687, 0xc41c, 0xd595, 0xa12a, 0xb0a3, 0x8238, 0x93b1,  
   0x6b46, 0x7acf, 0x4854, 0x59dd, 0x2d62, 0x3ceb, 0x0e70, 0x1ff9,  
   0xf78f, 0xe606, 0xd49d, 0xc514, 0xb1ab, 0xa022, 0x92b9, 0x8330,  
   0x7bc7, 0x6a4e, 0x58d5, 0x495c, 0x3de3, 0x2c6a, 0x1ef1, 0x0f78  
};  
#define PPPINITFCS16 0xffff /* Initial FCS value */  
#define PPPGOODFCS16 0xf0b8 /* Good final FCS value */  
/*  
* Calculate a new fcs given the current fcs and the new data.  
*/  
u16 pppfcs16(fcs, cp, len)  
register u16 fcs;  
register unsigned char *cp;  
register int len;  
{  
  ASSERT(sizeof (u16) == 2);  
  ASSERT(((u16) -1) > 0);  
  while (len--)  
     fcs = (fcs >> 8) ^ fcstab[(fcs ^ *cp++) & 0xff];  
  return (fcs);  
}  
/*  
* How to use the fcs  
*/  
tryfcs16(cp, len)  
register unsigned char *cp;  
register int len;  
{  
  u16 trialfcs;  
  /* add on output */  
   trialfcs = pppfcs16( PPPINITFCS16, cp, len );  
   trialfcs ^= 0xffff; /* complement */  
   cp[len] = (trialfcs & 0x00ff); /* least significant byte first */  
   cp[len+1] = ((trialfcs >> 8) & 0x00ff);  
  /* check on input */  
   trialfcs = pppfcs16( PPPINITFCS16, cp, len + 2 );  
   if ( trialfcs == PPPGOODFCS16 )  
     printf("Good FCS\n");  
}   

                                                                                                   186  

----------------------- Page 191-----------------------

                                                                                       DL/T 698.45—201X  

D.2  校验表发生器  

     /*  
     * Generate a FCS-16 table.  
     * Drew D. Perkins at Carnegie Mellon University.  
     * Code liberally borrowed from Mohsen Banan and D. Hugh Redelmeier.  
     * The FCS-16 generator polynomial: x**0 + x**5 + x**12 + x**16.  
     */  
     #define P 0x8408  
     /*  
     * NOTE The hex to "least significant bit" binary always causes  
     * confusion, but it is used in all HDLC documents. Example: 03H  
     * translates to 1100 0000B. The above defined polynomial value  
     * (0x8408) is required by the algorithm to produce the results  
     * corresponding to the given generator polynomial  
     * (x**0 + x**5 + x**12 + x**16)  
     */  
     main()  
     {  
       register unsigned int b, v;  
       register int i;  
       printf("typedef unsigned short u16;\n");  
       printf("static u16 fcstab[256] = {");  
       for (b = 0; ; )   
        {  
          if (b % 8 == 0)  
          printf("\n");  
          v = b;  
          for (i = 8; i-- ; )  
          v = v & 1 ? (v >> 1) ^ P : v >> 1;  
          printf("\t0x%04x", v & 0xFFFF);  
          if (++b == 256)  
            break;  
          printf(",");  
       }  
       printf("\n};\n");  
     }   
       

                                                                                                       187  

----------------------- Page 192-----------------------

                                                        DL/T 698.45—201X  
                                E    E   

                               附  录  E  
                              （规范性附录）  
                              安全认证说明  

E.1  比对加密方式  

E.1.1  补位规则  

   如待加密数据个数不足指定长度时（待加密数据单元长度为256字节,比对因子长度为16字节),采 
用如下补位方法,先补结束符0x80,剩余字节补0x00。比对因子和待加密数据均遵循此规则。   

E.1.2  嵌有安全模块的电能表比对方案  

   a)  进行远程安全认证  
   b)  提取比对因子,共 8 字节,从比对因子起始地址开始,在程序存储器中取 16 个字节。将 16 
      字节分为前8 字节和后8 字节两部分,再将前8 字节与后8 字节异或,得8 字节的异或结果作 
      为比对因子；  
   c)  使用比对因子计算比对因子密钥；  
   d)  提取待加密数据,从比对数据起始地址开始取256 个字节,以64 字节为单位分成四个数据块 
       (Data1,Data2,Data3,Data4),然后对数据块进行处理( Data1^Data2^Data3^Data4=Data5,其 
      中^代表异或运算符),得到64 个字节的待加密数据；  
   e)  使用比对因子密钥对待加密数据进行加密。  

E.1.3  未嵌安全模块的电能表比对方案  

   a)  获取比对因子：从比对因子起始地址开始取 256 个字节,以 64 字节为单位分成四个数据块 
       (Data1,Data2,Data3,Data4),然后对数据块进行处理( Data1^Data2^Data3^Data4=Data5,其 
      中^代表异或运算符),得到64 个字节的比对因子Data5。  
   b)  获取加密数据单元：从比对数据起始地址开始取256 个字节,以64 字节为单位分成四个数据 
      块(Data6,Data7,Data8,Data9),然后对数据块进行处理( Data6^Data7^Data8^Data9=Data10, 
      其中^代表异或运算符),得到64 个字节的加密数据单元Data10。  
   c)    获取代码密文： 将比对因子 Data5 与加密数据单元 Data10 进行异或运算得到代码密文 
      Data11。  
   d)  返回加密数据帧：将代码密文Data11 作为一个数据项,倒项后返回。  
   如果获取的比对因子中连续16字节为相同数据（例全00或全FF）时,电能表应返回安全认证异常应 
答“地址异常”。  

E.2  安全方式说明  

   安全模式参数通过密文+数据验证码的方式进行更改。  
   如果某一对象操作方式和安全模式参数中不一致,则返回安全认证不匹配。  
   如果每天收到的数据帧数据验证码校验失败、密文校验失败总累计达到200次,则要求终端远程设 
置参数、远程控制、清零功能挂起；在每日的零点,清除挂起状态、累计次数。  

                                                                  188  

----------------------- Page 193-----------------------

                                                                           DL/T 698.45—201X  

收到的抄读命令中数据验证码校验失败、密文校验失败不累计失败次数,挂起后能正常抄读。  
  
  

                                                                                         189  

----------------------- Page 194-----------------------

                                                                  DL/T 698.45—201X  
                                     F     F   

                                     附  录  F  
                                    （资料性附录）  
                                   安全模式参数  

F.1  安全模式参数  

    安全模式参数设置值的定义见表F.1  。  

                            表F.1  安全模式参数设置值定义  

                                               安全模式  
           对象标识 
   编号  
             OI          读取              设置              操作              代理  

  字节数       2 字节                                2 字节  

      
    安全模式定义见表F.2  。  

                                表F.2  安全模式定义  

   Bit7       Bit6      Bit5      Bit4      Bit3       Bit2      Bit1      Bit0  

明文方式操作  明文+数据验 密文方式操作  密文+数据验 保留                   代理读取         代理设置      代理操作  

            证码操作                 证码操作  

   Bit15     Bit14     Bit13      Bit12     Bit11     Bit10      Bit9      Bit8  

明文方式读取  明文+数据验 密文方式读取  密文+数据验 明文方式设置  明文+数据验 密文方式设置  密文+数据验 

            证码读取                 证码读取                证码设置                 证码设置  

      

F.2  默认安全模式参数  

    默认安全模式参数的定义见表F.3  。   

                              表F.3  默认安全模式参数  

 对象  对象名称             读取                设置                操作          代    代    代 

 标识            明 明文   密 密文       明 明文   密 密文        明 明文   密 密文       理    理    理 

 OI            文    +   文    +   文    +   文    +    文   +    文    +   读    设    操 

                   数据       数据       数据       数据       数据       数据  取      置    作  

                   验证       验证       验证       验证       验证       验证 

                    码        码        码        码        码        码  

 0ZZZ  当前电能     √                                                      √          

 1ZZZ  最大需量         √                                                             

 202C  （当前） √                                                          √          

      钱包文件  

                                                                              190  

----------------------- Page 195-----------------------

                                                                              DL/T 698.45—201X  

202F   电能表主            √                                √    √                                   

       动上报  

2ZZZ   变量              √                                           √                             

3ZZZ   事件              √                                √                    √                   

4000   日期时间       √                                     √    √               √     √             

4001   通信地址       √                                     √                          √             

4002   表号         √                          √                                     √             

4003   客户编号            √                     √                                                   

4008   两套分时            √                     √                                                   

       费率切换 

       时间  

4009   两套阶梯            √                     √                                                   

       切换时间  

401C   电流互感            √                     √                                                   

       器变比  

401D   电压互感            √                     √                                                   

       器变比  

401E   金额限值            √                     √                                                   

4018   当前套费            √                                                                         

       率电价  

4019   备用套费            √                     √                                                   

       率电价  

401A   当前套阶            √                                                                         

       梯参数  

401B   备用套阶            √                     √                                                   

       梯参数  

4111   备案号        √                                     √                          √             

4302   远程通信            √               √                                                         

       模块  

4ZZZ   参变量             √                                √                                        

50ZZ   冻结              √                                √                                        

60ZZ   采集监控       √                    √                     √                     √     √     √  

70ZZ   集合         √                                          √                     √           √  

80ZZ   控制              √                                √                    √                   

F000   分帧传输       √                                     √                    √                   

                                                                                            191  

----------------------- Page 196-----------------------

                                                                          DL/T 698.45—201X  

F001   分块传输      √                              √                   √                       

F002   扩展传输      √                   √                    √                                 

F100   ESAM      √                         √                             √     √            

F101   安全模式  √                                       √              √          √            

       参数  

F2ZZ   输入输出  √                       √                    √                    √    √     √  

       接口设备  

FFZZ   自定义       √                   √                    √                    √    √     √  

   注1：Z代表本半字节所列数值的任意一个取值,但不能覆盖以上表格中已经列出的,例如以上表格中2ZZZ不能覆盖 

       202C、202E；  

   注2：其它数据如果在安全模式参数中没有明确要求,均采用明文+MAC方式读取；  

   注3：除以上表格中规定外,其它参数设置如果在安全模式参数中没有明确要求,均采用密文+MAC方式设置；  

   注4 ：默认安全模式参数和显式安全模式参数如果冲突,以显式安全模式参数为准。  

   注5：设置基表远程通信模块的信号强度时,不须硬件配合,不须密码验证。  

   注6：其它数据如果在安全模式参数中没有明确要求,均采用明文+MAC方式读取。  

     
     
     
     

                                                                                       192  

----------------------- Page 197-----------------------

                                                                       DL/T 698.45—201X  
                                        G     G   

                                        附  录  G  
                                      （资料性附录）  
                                 状态字、特征字、模式字  

G.1  电能表运行状态字1  

    格式见表G.1  。  

                                           表G.1    

  Bit7     Bit6      Bit5        Bit4        Bit3        Bit2        Bit1        Bit0  

                  无功功率方向  有功功率方向                        时钟电池      需量积算方式         保留  
                                          停电抄表电池  
  保留       保留    (0正向、1反向) (0正向、1反向)                   (0正常,1 欠 (0滑差,1 区间)  
                                         (0正常,1欠压)  
                                                          压)  

  Bit15   Bit14      Bit13       Bit12       Bit11       Bit10       Bit9        Bit8  

时钟故障  透支状态  存储器故障或 内部程序错误                    保留          保留        ESAM 错误    控制回路错误  

                     损坏  

      

G.2  电能表运行状态字2   

    格式见表G.2  。  

                                           表G.2    

 Bit7     Bit6         Bit5        Bit4      Bit3      Bit2        Bit1         Bit0  

       C 相无功功率      B 相无功功率     A 相无功功率            C 相有功功率      B 相有功功率      A 相有功功率  
 保留                                          保留  
          方向           方向          方向                  方向          方向           方向  

 Bit15    Bit14       Bit13        Bit12    Bit11     Bit10        Bit9         Bit8  

 保留       保留           保留          保留        保留        保留          保留           保留  

      

   注：0代表正向,1代表反向  

G.3  电能表运行状态字3 （操作类）  

    格式见表G.3  。  

                                           表G.3    

    Bit7       Bit6       Bit5        Bit4        Bit3       Bit2     Bit1      Bit0  

 预跳闸报警状 继电器命令                                                   供电方式  
                                   继电器状态       编程允许状态  
     态         状态         保留                                (00主电源,01 辅助电       保留  
                                   (0通,1 断)  (0失效,1 有效)  
 (0无,1 有)  (0通,1 断)                                          源,10 电池供电)  

                                                                                    193  

----------------------- Page 198-----------------------

                                                                     DL/T 698.45—201X  

   Bit15      Bit14      Bit13      Bit12        Bit11     Bit10    Bit9      Bit8  

                                                                        电能表类型  
  远程开户       本地开户     安全认证状态       保电状态  
                                                                  (00 非预付费表,01 电量型 
(0 开户,1 未开 (0 开户,1 未 (0失效,1 有 (0 非保电,1 保         保留         保留  
                                                                  预付费表,10 电费型预付费 
    户)        开户)         效)          电)  
                                                                          表)  

      

   注1：编程允许状态(bit3)：对于有编程键的电能表,此位为编程允许状态。  

   注2：继电器状态(bit4),指线路实际工作状态,线路处于跳闸状态时此位置1,线路处于导通状态时此位置0。  

   注3：继电器远程拉闸命令状态(Bit6)。电能表收到主站跳闸命令时,Bit6 置1；电能表跳闸后,该状态仍维持1, 

       直到电能表解除跳闸条件,或收到主站合闸、保电命令时将该位置0。如果电能表处于保电状态时,收到远程 

       跳闸命令,提示“拒绝操作”,该位仍置0。  

   注4 ：预跳闸报警状态(Bit7)是指剩余电量/金额小于等于预置的报警阀值1 或电能表收到远程报警命令时,Bit7 置 

        1,电能表报警,提示用户购电（或交费）；否则置0。  

   注5：电能表类型有非预付费型、电量型预付费和电费型预付费三种。当电能表类型为00 时是非预付费型电能表（包 

       括远程费控电能表）；当电能表类型为 01 时使用电量型预付费电能表；当电能表类型为 10 时定义为电费型 

       预付费电能表（包括本地费控电能表）。  

   注6：Bit0、Bit5、Bit10、Bit11 保留,置0。  

G.4  电能表运行状态字4 （A相故障状态）  

    格式见表G.4  。  

                                          表G.4    

   Bit7       Bit6       Bit5       Bit4      Bit3       Bit2       Bit1       Bit0  

   断相       功率反向         过载         过流        失流         过压         欠压         失压  

   Bit15      Bit14     Bit13      Bit12      Bit11      Bit10      Bit9       Bit8  

   保留         保留         保留         保留        保留         保留         保留         断流  

      

   注：0代表无此类故障,1代表当前发生此类故障。  

G.5  电能表运行状态字5 （B相故障状态）  

    格式见表G.5  。  

                                          表G.5    

   Bit7       Bit6       Bit5       Bit4      Bit3       Bit2       Bit1       Bit0  

   断相       功率反向         过载         过流        失流         过压         欠压         失压  

   Bit15      Bit14     Bit13      Bit12      Bit11      Bit10      Bit9       Bit8  

   保留         保留         保留         保留        保留         保留         保留         断流  

      

   注：0代表无此类故障,1代表当前发生此类故障。  

                                                                                 194  

----------------------- Page 199-----------------------

                                                                          DL/T 698.45—201X  

 G.6  电能表运行状态字6 （C相故障状态）  

     格式见表G.6  。  

                                             表G.6    

    Bit7        Bit6       Bit5       Bit4        Bit3       Bit2       Bit1        Bit0  

     断相       功率反向         过载         过流          失流         过压         欠压          失压  

    Bit15      Bit14       Bit13      Bit12      Bit11       Bit10      Bit9        Bit8  

    保留          保留         保留         保留          保留         保留         保留          断流  

       

    注：0代表无此类故障,1代表当前发生此类故障。  

 G.7  电能表运行状态字7 （合相故障状态）  

     格式见表G.7  。  

                                             表G.7    

   Bit7        Bit6        Bit5       Bit4        Bit3       Bit2        Bit1        Bit0  

总功率因数超  需量超限               掉电      辅助电源失电   电流不平衡          电压不平衡       电流逆相序      电压逆相序  

    下限  

   Bit15       Bit14      Bit13       Bit12      Bit11       Bit10       Bit9        Bit8  

                           保留         保留          保留        开端钮盖        开表盖      电流严重不平 
   保留          保留  
                                                                                     衡  

       

    注：0代表无此类故障,1代表当前发生此类故障。  

 G.8  对称密钥状态字  

     格式见表G.8  。  

                                             表G.8    

   Bit7        Bit6        Bit5       Bit4        Bit3       Bit2        Bit1        Bit0  

 密钥7 状态     密钥6 状态      密钥5 状态      密钥4 状态     密钥3 状态      密钥2 状态     密钥1 状态   主控密钥状态  

(0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 

 正式状态)       正式状态)       正式状态)      正式状态)       正式状态)      正式状态)       正式状态)      正式状态)  

   Bit15       Bit14      Bit13       Bit12      Bit11       Bit10       Bit9        Bit8  

密钥15 状态   密钥14 状态  密钥13 状态   密钥12 状态   密钥11 状态   密钥10 状态   密钥9 状态                 密钥8 状态  

(0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 

 正式状态)       正式状态)       正式状态)      正式状态)       正式状态)      正式状态)       正式状态)      正式状态)  

   Bit23       Bit22      Bit21       Bit20      Bit19       Bit18       Bit17      Bit16  

密钥23 状态   密钥22 状态  密钥21 状态   密钥20 状态   密钥19 状态   密钥18 状态  密钥17 状态   密钥16 状态  

(0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 

                                                                                      195  

----------------------- Page 200-----------------------

                                                                          DL/T 698.45—201X  

 正式状态)       正式状态)       正式状态)       正式状态)      正式状态)       正式状态)       正式状态)      正式状态)  

   Bit31       Bit30      Bit29       Bit28       Bit27       Bit26      Bit25       Bit24  

密钥31 状态   密钥30 状态  密钥29 状态   密钥28 状态   密钥27 状态   密钥26 状态  密钥25 状态   密钥24 状态  

(0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 

 正式状态)       正式状态)       正式状态)       正式状态)      正式状态)       正式状态)       正式状态)      正式状态)  

   Bit39       Bit38      Bit37       Bit36       Bit35       Bit34      Bit33       Bit32  

密钥39 状态   密钥38 状态  密钥37 状态   密钥36 状态   密钥35 状态   密钥34 状态  密钥33 状态   密钥32 状态  

(0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 

 正式状态)       正式状态)       正式状态)       正式状态)      正式状态)       正式状态)       正式状态)      正式状态)  

   Bit47       Bit46      Bit45       Bit44       Bit43       Bit42      Bit41       Bit40  

密钥47 状态   密钥46 状态  密钥45 状态   密钥44 状态   密钥43 状态   密钥42 状态  密钥41 状态   密钥40 状态  

(0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 

 正式状态)       正式状态)       正式状态)       正式状态)      正式状态)       正式状态)       正式状态)      正式状态)  

   Bit55       Bit54      Bit53       Bit52       Bit51       Bit50      Bit49       Bit48  

密钥55 状态   密钥54 状态  密钥53 状态   密钥52 状态   密钥51 状态   密钥50 状态  密钥49 状态   密钥48 状态  

(0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 

 正式状态)       正式状态)       正式状态)       正式状态)      正式状态)       正式状态)       正式状态)      正式状态)  

   Bit63       Bit62      Bit61       Bit60       Bit59       Bit58      Bit57       Bit56  

密钥63 状态   密钥62 状态  密钥61 状态   密钥60 状态   密钥59 状态   密钥58 状态  密钥57 状态   密钥56 状态  

(0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 

 正式状态)       正式状态)       正式状态)       正式状态)      正式状态)       正式状态)       正式状态)      正式状态)  

       

    注：对于费控表,只有当所有指定密钥都更新到正式状态时,测试密钥状态显示才消失。  

 G.9  终端证书状态字  

     格式见表G.9  。  

                                             表G.9    

   Bit7        Bit6        Bit5        Bit4       Bit3        Bit2        Bit1       Bit0  

 证书7 状态      证书6 状态     证书5 状态      证书4 状态      证书3 状态     证书2 状态      证书1 状态      证书0 状态  

(0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 

 正式状态)       正式状态)       正式状态)       正式状态)      正式状态)       正式状态)       正式状态)      正式状态)  

   Bit15       Bit14      Bit13       Bit12       Bit11       Bit10       Bit9       Bit8  

证书15 状态   证书14 状态  证书13 状态   证书12 状态   证书11 状态   证书10 状态   证书9 状态                  证书8 状态  

(0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 (0测试状态,1 

 正式状态)       正式状态)       正式状态)       正式状态)      正式状态)       正式状态)       正式状态)      正式状态)  

       

 G.10  有功组合方式特征字  

     格式见表G.10  。  

                                                                                       196  

----------------------- Page 201-----------------------

                                                                             DL/T 698.45—201X  

                                               表G.10    

   Bit7       Bit6      Bit5       Bit4        Bit3          Bit2         Bit1          Bit0  

                                             反向有功       反向有功       正向有功       正向有功       
   保留         保留        保留         保留  
                                            (0不减,1 减)   (0不加,1 加)   (0不减,1 减)   (0不加,1 加)  

       

G.11  无功组合方式1、2 特征字  

     格式见表G.11  。  

                                               表G.11    

    Bit7        Bit6        Bit5        Bit4        Bit3        Bit2         Bit1        Bit0  

   IV 象限       IV 象限      III 象限       III 象限      II 象限       II 象限        I 象限        I 象限  

(0不减,1 减) (0不加,1 加) (0不减,1 减) (0不加,1 加) (0不减,1 减) (0不加,1 加) (0不减,1 减) (0不加,1 加)  

  

G.12  周休日特征字  

     格式见表G.12  。  

                                               表G.12    

    Bit7        Bit6        Bit5        Bit4        Bit3        Bit2         Bit1        Bit0  

    保留          周六          周五          周四          周三          周二           周一          周日  

       

    注：0代表休息,1代表工作。  

G.13  通信速率特征字（调制型、接触式、通信口1、通信口2、通信口3）  

     格式见表G.13  。  

                                               表G.13    

    Bit7        Bit6        Bit5        Bit4        Bit3        Bit2         Bit1        Bit0  

    保留        19200bps     9600bps     4800bps     2400bps     1200bps      600bps       保留  

       

    注：0代表非当前接口通信速率,1代表当前接口通信速率,特征字仅在某一位为1时有效。  

G.14  电能表运行特征字1  

     格式见表G.14  。  

                                               表G.14    

 Bit7    Bit6    Bit5   Bit4    Bit3    Bit2                Bit1                      Bit0  

                                                                                           197  

----------------------- Page 202-----------------------

                                                                           DL/T 698.45—201X  

                                            液晶①②字样意义  (0显示当前套、备用 外置开关控制方式  
 保留      保留     保留      保留     保留     保留  
                                             套时段,1 显示当前套、备用套费率)               （0 电平,1 脉冲）  

       

    注：液晶①②字样意义（Bit1）表示时段/费率状态显示模式,0代表①②显示当前套、备用套时段,1代表①②显 

        示当前套、备用套费率电价。  

G.15  主动上报模式字  

     格式见表G.15  。  

                                             表G.15    

   Bit7        Bit6        Bit5        Bit4        Bit3       Bit2        Bit1        Bit0  

  时钟故障         保留       存储器故障或 内部程序错误  时钟电池电压 内卡初始化错 ESAM 错误  负荷开关误动 

                           损坏                      低           误                     或拒动  

   Bit15       Bit14       Bit13      Bit12       Bit11       Bit10       Bit9        Bit8  

  合闸成功        跳闸成功       电源异常      恒定磁场干扰        开端钮盖        开表盖        透支状态      停电抄表电池 

                                                                                      欠压  

   Bit23       Bit22       Bit21      Bit20       Bit19       Bit18       Bit17      Bit16  

    断相        功率反向         过载          过流          失流         过压          欠压          失压  

   Bit31       Bit30       Bit29      Bit28       Bit27       Bit26       Bit25      Bit24  

    保留         保留          保留          保留          保留         保留          保留          断流  

   Bit39       Bit38       Bit37      Bit36       Bit35       Bit34       Bit33      Bit32  

总功率因数超  需量超限               掉电      辅助电源失电   电流不平衡           电压不平衡       电流逆相序      电压逆相序  

    下限  

   Bit47       Bit46       Bit45      Bit44       Bit43       Bit42       Bit41      Bit40  

    保留         保留          保留          保留          保留        全失压        潮流反向       电流严重不平 

                                                                                       衡  

   Bit55       Bit54       Bit53      Bit52       Bit51       Bit50       Bit49      Bit48  

 周休日编程       时区表编程      时段表编程          校时        事件清零        需量清零       电能表清零         编程  

   Bit63       Bit62       Bit61      Bit60       Bit59       Bit58       Bit57      Bit56  

                        费率参数表编 结算日编程           无功组合方式 无功组合方式 有功组合方式 节假日编程  
  密钥更新       阶梯表编程  
                            程                     2 编程        1 编程        编程  

                                                  

    注：0代表此类事件发生不上报,1代表此类事件发生应上报。  

G.16  主动上报状态字  

     格式见表G.16  。  

                                             表G.16    

   Bit7        Bit6        Bit5        Bit4        Bit3       Bit2        Bit1        Bit0  

  时钟故障         保留       存储器故障或 内部程序错误  时钟电池电压 内卡初始化错 ESAM 错误  负荷开关误动 

                                                                                        198  

----------------------- Page 203-----------------------

                                                                              DL/T 698.45—201X  

                            损坏                        低           误                      或拒动  

   Bit15       Bit14        Bit13       Bit12       Bit11       Bit10        Bit9        Bit8  

  合闸成功        跳闸成功         电源异常      恒定磁场干扰        开端钮盖         开表盖        透支状态       停电抄表电池 

                                                                                         欠压  

   Bit23       Bit22        Bit21       Bit20       Bit19       Bit18        Bit17       Bit16  

  A 相断相     A 相功率反向        A 相过载       A 相过流       A 相失流       A 相过压       A 相欠压        A 相失压  

   Bit31       Bit30        Bit29       Bit28       Bit27       Bit26        Bit25       Bit24  

    保留          保留          保留          保留           保留          保留          保留         A 相断流  

   Bit39       Bit38        Bit37       Bit36       Bit35       Bit34        Bit33       Bit32  

  B 相断相     B 相功率反向        B 相过载       B 相过流       B 相失流       B 相过压        B 相欠压       B 相失压  

   Bit47       Bit46        Bit45       Bit44       Bit43       Bit42        Bit41       Bit40  

    保留          保留          保留          保留           保留          保留          保留         B 相断流  

   Bit55       Bit54        Bit53       Bit52       Bit51       Bit50        Bit49       Bit48  

  C 相断相     C 相功率反向        C 相过载       C 相过流       C 相失流       C 相过压        C 相欠压       C 相失压  

   Bit63       Bit62        Bit61       Bit60       Bit59       Bit58        Bit57       Bit56  

    保留          保留          保留          保留           保留          保留          保留         C 相断流  

   Bit71       Bit70        Bit69       Bit68       Bit67       Bit66        Bit65       Bit64  

总功率因数超  需量超限                掉电       辅助电源失电   电流不平衡           电压不平衡        电流逆相序       电压逆相序  

    下限  

   Bit79       Bit78        Bit77       Bit76       Bit75       Bit74        Bit73       Bit72  

    保留          保留          保留          保留           保留         全失压        潮流反向       电流严重不平 

                                                                                          衡  

   Bit87       Bit86        Bit85       Bit84       Bit83       Bit82        Bit81       Bit80  

 周休日编程       时区表编程        时段表编程         校时         事件清零        需量清零        电能表清零         编程  

   Bit95       Bit94        Bit93       Bit92       Bit91       Bit90        Bit89       Bit88  

                         费率参数表编 结算日编程            无功组合方式 无功组合方式 有功组合方式 节假日编程  
  密钥更新       阶梯表编程  
                             程                      2 编程        1 编程         编程  

       

    注：0代表未发生此类事件,1代表已发生此类事件。  

G.17  插卡状态字  

     格式见表G.17  。  

                                               表G.17    

    Bit7        Bit6        Bit5        Bit4         Bit3        Bit2        Bit1        Bit0  

                                                                                 插卡状态  
    保留          保留          保留          保留           保留          保留  
                                                                          (00 未知,01 成功,10 失败)  

   Bit15       Bit14        Bit13       Bit12       Bit11       Bit10        Bit9        Bit8  

    保留          保留          保留          保留           保留          保留          保留          保留  

       

    注：Bit1Bit0在插卡操作后置相应状态,读取和上电后置未知。  

                                                                                            199  

----------------------- Page 204-----------------------

                                                                      DL/T 698.45—201X  

G.18  控制命令执行状态字  

    格式见表G.17  。  

                                          表G.18    

    Bit7     Bit6        Bit5         Bit4         Bit3      Bit2     Bit1      Bit0  

                       延时跳闸                      延时跳闸  
   保留        保留                    跳闸自动恢复                  直接跳闸  允许合闸         直接合闸  
                       （大电流）                   (跳闸延时时间)  

   Bit15     Bit14      Bit13         Bit12       Bit11      Bit10    Bit9      Bit8  

   保留        保留          保留           保留         报警解除        报警     保电解除        保电  

G.19  控制命令错误状态字  

    格式见表G.17  。  

                                          表G.19    

    Bit7          Bit6       Bit5      Bit4     Bit3     Bit2     Bit1        Bit0  

             跳闸自动恢复命 
 跳闸自动恢复                     跳闸失败  时间标签 安全认证 密码错误/ 
              令执行失败(保                                            MAC 错误      电表挂起  
   时间无效                      (保电)      无效       超时      未授权  
                  电)  

    Bit15        Bit14       Bit13    Bit12    Bit11     Bit10    Bit9        Bit8  

                                                                          跳闸自动恢复命令 
    保留            保留         保留        保留       保留       保留       保留  
                                                                          执行失败(跳闸)  

注：表格未包含的其他错误,应答时均置Bit2。  
      
      
      

                                                                                   200  

----------------------- Page 205-----------------------

                                                                      DL/T 698.45—201X  
                                       H     H   

                                       附  录  H  
                                     （资料性附录）  
                                     APDU 编码举例  

H.1  建立预连接  

H.1.1  建立连接  

    发送：68 1D 00 81 05 07 09 19 05 16 20 00 CS CS 01 00 00 00 B4 20 16 05 19 08 05 00 00  
A4 CS CS 16  （斜体部分为链路层内容,以下省略；带下划线部分为APDU的A-XDR编码内容）  
    68 —— 帧起始符  
    1D 00 —— 长度域L=29字节  
    81 —— 控制域C  
    05 —— AF  
    07 09 19 05 16 20 —— SA=201605190907  
    00 —— CA  
    CS CS —— 帧头校验  
    01 ——  [1] LINK-Request  
    00 —— PIID-ACD  
    00 —— 请求类型：建立连接（0）  
    00 B4 —— 心跳周期：180s  
    20 16 05 19 08 05 00 00 A4 —— 请求时间DateTimeBCD_H：2016-05-19 08:05:00:0164  
    CS CS —— 帧校验  
    16 —— 结束符  
    响应：68 2F 00 01 05 07 09 19 05 16 20 10 CS CS 81 00 80 20 16 05 19 08 05 00 00 89 20  
16 05 19 08 05 01 02 5F 20 16 05 19 08 05 02 02 DA CS CS 16  
    68 —— 帧起始符  
    2F 00 —— 长度域L=47字节  
    01 —— 控制域C  
    05 —— AF  
    07 09 19 05 16 20 —— SA=201605190907  
    10 —— CA  
    CS CS —— 帧头校验  
    81 ——  [129] LINK-Response  
    00 —— PIID  
    80 —— 结果Result：可信,成功  
    20 16 05 19 08 05 00 00 89 —— 请求时间DateTimeBCD_H：2016-05-19 08:05:00:137  
    20 16 05 19 08 05 01 02 5F —— 收到时间DateTimeBCD_H：2016-05-19 08:05:01:607  
    20 16 05 19 08 05 02 02 DA —— 响应时间DateTimeBCD_H：2016-05-19 08:05:02:730  
    CS CS —— 帧校验  
    16 —— 结束符  

                                                                                  201  

----------------------- Page 206-----------------------

                                                                        DL/T 698.45—201X  

H.1.2  心跳  

    心跳：68 1D 00 81 05 07 09 19 05 16 20 00 CS CS 01 01 01 00 B4 20 16 05 19 08 05 00 00  
00 CS CS 16  
    发送：  
    68 1D 00 81 05 07 09 19 05 16 20 00 CS CS   
    01 ——  [1] LINK-Request  
    01 —— PIID--ACD  
    01 —— 请求类型：心跳（1）  
    00 B4 —— 心跳周期：180s  
    20 16 05 19 08 05 00 01 C3 —— 请求时间DateTimeBCD_H：2016-05-19 08:05:00:451  
    CS CS 16  
    响应：同建立连接的响应。  

H.2  建立应用连接  

    发送：02 00 00 10 FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF  
FF 04 00 04 00 01 04 00 00 00 00 64 00 00  
    02 ——  [2] CONNECT-Request  
    00 —— PIID  
    00 10 —— 期望的应用层协议版本号    ComBCD4  
    FF FF FF FF FF FF FF FF —— ProtocolConformance  
    FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF —— FunctionConformance  
    04 00 —— 客户机发送帧最大尺寸  
    04 00 —— 客户机接收帧最大尺寸  
    01    —— 客户机接收帧最大窗口尺寸  
    04 00 —— 客户机最大可处理APDU尺寸  
    00 00 00 64 —— 期望的应用连接超时时间  
    00 —— 认证请求对象  [0] NullSecurity,  
    00 —— 没有时间标签  
    响应：82 00 54 4F 50 53 30 31 30 32 31 36 30 37 33 31 30 31 30 32 31 36 30 37 33 31 00  
00 00 00 00 00 00 00 00 10 FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF  
FF FF 04 00 04 00 01 04 00 00 00 00 64 00 00 00  
    82 ——  [130] CONNECT-Response  
    00 —— PIID-ACD  
    54 4F 50 53 30 31 30 32 31 36 30 37 33 31 30 31 30 32 31 36 30 37 33 31 00 00 00 00 00  
00 00 00 —— 厂商版本信息:厂商代码（size(4)）+ 软件版本号（size(4)）+软件版本日期（size(6)） 
+硬件版本号（size(4)）+硬件版本日期（size(6)）+厂家扩展信息（size(8)）  
    00 10 —— 期望的应用层协议版本号    ComBCD4  
    FF FF FF FF FF FF FF FF —— ProtocolConformance  
    FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF —— FunctionConformance  
    04 00 —— 客户机发送帧最大尺寸  
    04 00 —— 客户机接收帧最大尺寸  

                                                                                    202  

----------------------- Page 207-----------------------

                                                                      DL/T 698.45—201X  

    01    —— 客户机接收最大尺寸帧个数  
    04 00 —— 服务器最大可处理APDU尺寸  
    00 00 00 64 —— 期望的应用连接超时时间  
    00 —— 连接响应对象   允许建立应用连接      （0）  
    00 —— 认证附加信息   OPTIONAL = 0 表示没有  
    00 —— FollowReport  OPTIONAL = 0表示没有上报信息  
    00 —— 没有时间标签  

H.3  读取  

H.3.1  读取一个对象属性  

    读取电能表的通信地址  
    发送：05 01 01 40 01 02 00 00  
    05 ——  [5] GET-Request  
    01 ——  [1] GetRequestNormal  
    01 —— PIID  
    40 01 02 00 —— OAD：通信地址40020200  
    00 —— 没有时间标签  
    响应：85 01 01 40 01 02 00 01 85 06 12 34 56 78 90 12 00 00  
    85 ——  [133] GET-Response  
    01 ——  [1] GetResponseNormal  
    01 —— PIID-ACD  
    40 01 02 00 —— OAD  
    01 —— Data  
    85 —— TSA  
    06 —— SIZE(6)  
    12 34 56 78 90 12 —— 通信地址：123456789012  
    00 —— FollowReport  OPTIONAL=0 表示没有上报信息  
    00 —— 没有时间标签  

H.3.2  读取多个对象属性  

    读取三相电压、电流  
    发送：05 02 02 02 20 00 02 00 20 01 02 00 00  
    05 ——  [5] GET-Request  
    02 ——  [2] GetRequestNormalList  
    02 —— PIID  
    02 —— SEQUENCE OF OAD,个数=2  
    20 00 02 00 —— OAD1：A,B,C相计量电压  
    20 01 02 00 —— OAD2：A,B,C相计量电流  
    00 —— 没有时间标签  
    响应：85 02 02 02 20 00 02 00 01 01 03 12 09 6D 12 09 6D 12 09 6D 20 01 02 00 01 01 03  
05 00 00 03 E8 05 00 00 03 E8 05 00 00 03 E8 00 00  

                                                                                  203  

----------------------- Page 208-----------------------

                                                                         DL/T 698.45—201X  

    85 ——  [133] GET-Response  
    02 ——  [2] GetResponseNormalList  
    02 —— PIID-ACD  
    02 —— SEQUENCE OF OAD,个数=2  
    20 00 02 00 —— OAD  
    01 —— Data  
    01 —— 类型=1,表示数组  
    03 —— 数组元素个数=3  
    12 09 6D —— 元素1：类型18：long-unsigned 241.3V A相  
    12 09 6D —— 元素2：类型18：long-unsigned 241.3V B相  
    12 09 6D —— 元素3：类型18：long-unsigned 241.3V C相  
    20 01 02 00 —— OAD  
    01 —— Data  
    01 —— 类型=1,表示数组  
    03 —— 数组元素个数=3  
    05 00 00 03 E8 —— 元素1：类型：5 double-long  
    05 00 00 03 E8 —— 元素2：类型：5 double-long  
    05 00 00 03 E8 —— 元素3：类型：5 double-long  
    00 —— FollowReport  OPTIONAL=0 表示没有上报信息  
    00 —— 没有时间标签  

H.3.3  读取一个记录型对象属性  

     （1）终端读取电能表在2016-01-20 00:00:00的日冻结正向有功总及费率电能量  
    发送：05 03 03 50 04 02 00 01 20 21 02 00 1C 20 16 01 20 00 00 00 02 00 20 21 02 00 00  
00 10 02 00 00  
    05 ——  [5] GET-Request  
    03 ——  [3] GetRequestRecord  
    03 —— PIID  
    50 04 02 00 —— OAD 日冻结  
    01 —— RSD, 选择方法1  
    20 21 02 00 —— OAD,数据冻结时间  
    1C 20 16 01 20 00 00 00 —— 时间  
    02 —— RCSD,SEQUENCE OF个数=2  
    00 ——  [0] OAD  
    20 21 02 00 —— OAD  
    00 ——  [0] OAD  
    00 10 02 00 —— OAD  
    00 —— 没有时间标签  
    响应：86 03 03 01 50 04 02 00 02 00 20 21 02 00 00 00 10 02 00 01 1C 20 16 01 20 00 00  
00 01 05 06 00 00 00 00 06 00 00 00 00 06 00 00 00 00 06 00 00 00 00 06 00 00 00 00 00 00  
    85 ——  [133] GET-Response  
    03 ——  [3] GeResponseRecord  
    03 —— PIID-ACD  

                                                                                     204  

----------------------- Page 209-----------------------

                                                                          DL/T 698.45—201X  

    01 —— 记录数据  
    50 04 02 00 —— OAD  
    02 —— RCSD,SEQUENCE OF个数=2  
    00 20 21 02 00 —— 第1列OAD  
    00 00 10 02 00 —— 第2列OAD  
    01 —— M条记录,M=1  
    1C 20 16 01 20 00 00 00 —— 第1列数据Data  
    01 —— 第2列数据Data  
    05  
    06 00 00 00 00  
    06 00 00 00 00  
    06 00 00 00 00  
    06 00 00 00 00  
    06 00 00 00 00  
    00 —— FollowReport  OPTIONAL=0 表示没有上报信息  
    00 —— 没有时间标签  
     （2）主站召测集中器采集到的数据：召测5个电能表的2016-01-20 00:00:00日冻结正向有功电能 
总及费率、日冻结反向有功电能总及费率  
    发送：05 03 04 60 12 03 00 05 20 16 01 20 00 00 00 03 05 06 10 00 00 00 01 21 06 10 00  
00 00 01 22 06 10 00 00 00 01 23 06 10 00 00 00 01 24 06 10 00 00 00 01 25 05 00 40 01 02 00  
00 60 40 02 00 00 60 41 02 00 00 60 42 02 00 01 50 04 02 00 02 00 10 02 00 00 20 02 00 00  
    05 ——  [5] GET-Request  
    03 ——  [3] GetRequestRecord  
    04 —— PIID  
    60 12 03 00 —— OAD   
    05 —— RSD,选择方法5  
    20 16 01 20 00 00 00 —— 采集存储时间  
    03 —— 电能表集合MS,一组用户地址  [3] SEQUENCE OF TSA  
    05 —— SEQUENCE OF TSA的个数=5  
    06 10 00 00 00 01 21 —— TSA1  
    06 10 00 00 00 01 22  
    06 10 00 00 00 01 23  
    06 10 00 00 00 01 24  
    06 10 00 00 00 01 25 —— TSA5  
    05 —— RCSD,SEQUENCE OF CSD个数=5  
    00 40 01 02 00 —— OAD1,通信地址  
    00 60 40 02 00 —— OAD2,采集启动时标  
    00 60 41 02 00 —— OAD3,采集成功时标  
    00 60 42 02 00 —— OAD4,采集存储时标  
    01             —— ROAD5  
    50 04 02 00 ——  日冻结  
    02 —— 关联对象属性描述符  SEQUENCE OF个数=2  
    00 10 02 00 —— 正向有功总及费率  

                                                                                       205  

----------------------- Page 210-----------------------

                                                                                 DL/T 698.45—201X  

     00 20 02 00 —— 反向有功总及费率  
     00 —— 没有时间标签  
     响应：85 03 04 01 60 12 03 00 05 00 40 01 02 00 00 60 40 02 00 00 60 41 02 00 00 60 42  
02 00 01 50 04 02 00 02 00 10 02 00 00 20 02 00 05 85 06 10 00 00 00 01 21 1C 20 16 01 20 00  
00 00 1C 20 16 01 20 00 00 00 1C 20 16 01 20 00 00 00 01 02 01 05 06 00 00 00 00 06 00 00 00  
         00 06 00 00 00 00 06 00 00 00 00 06 00 00 00 00 01 05 06 00 00 00 00 06 00 00 00 00 06 00 00  
00 00 06 00 00 00 00 06 00 00 00 00 85 06 10 00 00 00 01 22 1C 20 16 01 20 00 00 00 1C 20 16  
01 20 00 00 00 1C 20 16 01 20 00 00 00 01 02 01 05 06 00 00 00 00 06 00 00 00 00 06 00 00 00  
         00 06 00 00 00 00 06 00 00 00 00 01 05 06 00 00 00 00 06 00 00 00 00 06 00 00 00 00 06 00 00  
00 00 06 00 00 00 00 85 06 10 00 00 00 01 23 1C 20 16 01 20 00 00 00 1C 20 16 01 20 00 00 00  
1C 20 16 01 20 00 00 00 01 02 01 05 06 00 00 00 00 06 00 00 00 00 06 00 00 00 00 06 00 00 00  
         00 06 00 00 00 00 01 05 06 00 00 00 00 06 00 00 00 00 06 00 00 00 00 06 00 00 00 00 06 00 00  
00 00 85 06 10 00 00 00 01 24 1C 20 16 01 20 00 00 00 1C 20 16 01 20 00 00 00 1C 20 16 01 20  
         00 00 00 01 02 01 05 06 00 00 00 00 06 00 00 00 00 06 00 00 00 00 06 00 00 00 00 06 00 00 00  
         00 01 05 06 00 00 00 00 06 00 00 00 00 06 00 00 00 00 06 00 00 00 00 06 00 00 00 00 85 06 10  
00 00 00 01 25 1C 20 16 01 20 00 00 00 1C 20 16 01 20 00 00 00 1C 20 16 01 20 00 00 00 01 02  
         01 05 06 00 00 00 00 06 00 00 00 00 06 00 00 00 00 06 00 00 00 00 06 00 00 00 00 01 05 06 00  
00 00 00 06 00 00 00 00 06 00 00 00 00 06 00 00 00 00 06 00 00 00 00 00 00  
     85 ——  [133] GET-Response  
     03 ——  [3] GeResponseRecord  
     04 —— PIID-ACD  
     01 —— 记录数据  
     60 12 03 00 —— OAD  
     05 —— RCSD,SEQUENCE OF个数=5,即N=5  
     00 40 01 02 00 —— 第1列OAD  
     00 60 40 02 00 —— 第2列OAD  
     00 60 41 02 00 —— 第3列OAD  
     00 60 42 02 00 —— 第4列OAD  
     01 ——第5列ROAD5  
     50 04 02 00 ——  日冻结  
     02   
     00 10 02 00 —— 正向有功总及费率  
     00 20 02 00 —— 反向有功总及费率  
     05 —— M条记录,M=5  
       8506100000000121 1C20160120000000 1C20160120000000 1C20160120000000   
     0102  
     010506000000000600000000060000000006000000000600000000  
     010506000000000600000000060000000006000000000600000000  
       8506100000000122 1C20160120000000 1C20160120000000 1C20160120000000   
     0102  
     010506000000000600000000060000000006000000000600000000  
     010506000000000600000000060000000006000000000600000000  
       8506100000000123 1C20160120000000 1C20160120000000 1C20160120000000   

                                                                                                206  

----------------------- Page 211-----------------------

                                                                             DL/T 698.45—201X  

    0102  
    010506000000000600000000060000000006000000000600000000  
    010506000000000600000000060000000006000000000600000000  
       8506100000000124 1C20160120000000 1C20160120000000 1C20160120000000   
    0102  
    010506000000000600000000060000000006000000000600000000  
    010506000000000600000000060000000006000000000600000000  
       8506100000000125 1C20160120000000 1C20160120000000 1C20160120000000   
    0102  
    010506000000000600000000060000000006000000000600000000  
    010506000000000600000000060000000006000000000600000000  
    00 —— FollowReport  OPTIONAL=0 表示没有上报信息  
    00 —— 没有时间标签  

H.3.4  读取多个记录型对象属性  

    参考读取一个记录型对象属性。  

H.3.5  读取分帧响应的下一个数据块  

    读取全部电能表档案：  
    发送：05 01 08 60 00 02 00 00  
    05 ——  [5] GET-Request  
    01 ——  [1] GetRequestNormal  
    08 —— PIID  
    60 00 02 00 —— OAD  
    00 —— 没有时间标签  
    响应：85 05 08 00 00 01 01 01 60 00 02 00 01 01 03 02 04 12 00 01 02 07 85 06 10 00 00  
00 22 21 16 03 16 03 51 F2 09 02 01 09 06 00 00 00 00 00 00 11 04 16 01 02 04 85 06 00 00 00  
00 00 00 09 06 00 00 00 00 00 00 12 00 01 12 00 01 01 00 02 04 12 00 02 02 07 85 06 10 00 00  
00 22 22 16 03 16 03 51 F2 09 02 01 09 06 00 00 00 00 00 00 11 04 16 01 02 04 85 06 00 00 00  
00 00 00 09 06 00 00 00 00 00 00 12 00 01 12 00 01 01 00 02 04 12 00 03 02 07 85 06 10 00 00  
00 22 23 16 03 16 03 51 F2 09 02 01 09 06 00 00 00 00 00 00 11 04 16 01 02 04 85 06 00 00 00  
00 00 00 09 06 00 00 00 00 00 00 12 00 01 12 00 01 01 00 00 00  
    85 ——  [133] GET-Response  
    05 ——  [5] GetResponseNext  
    08 —— PIID-ACD  
    00 —— 末帧标志 False  
    00 01 —— 分帧序号=1  
    01 —— 分帧响应,对象属性  [1] SEQUENCE OF A-ResultNormal  
    01 —— SEQUENCE OF个数=1  
    60 00 02 00 —— OAD  
    01 —— data  
    01 —— array  
    03 —— 个数=3  

                                                                                           207  

----------------------- Page 212-----------------------

                                                                               DL/T 698.45—201X  

    02 04 12 00 01 02 07 85 06 10 00 00 00 22 21 16 03 16 03 51 F2 09 02 01 09 06 00 00 00  
      00 00 00 11 04 16 01 02 04 85 06 00 00 00 00 00 00 09 06 00 00 00 00 00 00 12 00 01 12 00 01  
01 00  
    02 04 12 00 02 02 07 85 06 10 00 00 00 22 22 16 03 16 03 51 F2 09 02 01 09 06 00 00 00  
      00 00 00 11 04 16 01 02 04 85 06 00 00 00 00 00 00 09 06 00 00 00 00 00 00 12 00 01 12 00 01  
01 00  
    02 04 12 00 03 02 07 85 06 10 00 00 00 22 23 16 03 16 03 51 F2 09 02 01 09 06 00 00 00  
      00 00 00 11 04 16 01 02 04 85 06 00 00 00 00 00 00 09 06 00 00 00 00 00 00 12 00 01 12 00 01  
01 00  
    00 —— FollowReport  OPTIONAL=0 表示没有上报信息  
    00 —— 没有时间标签  
    读分帧的下一帧：  
    发送：05 05 09 00 01 00  
    05 ——  [5] GET-Request  
    05 ——  [5] GetRequestNext  
    09 —— PIID  
    00 01 —— 正确接收的最近一次数据块序号  
    00 —— 没有时间标签  
    响应：85 05 09 01 00 02 01 01 60 00 02 00 01 01 03 02 04 12 00 04 02 07 85 06 10 00 00  
00 22 24 16 03 16 03 51 F2 09 02 01 09 06 00 00 00 00 00 00 11 04 16 01 02 04 85 06 00 00 00  
      00 00 00 09 06 00 00 00 00 00 00 12 00 01 12 00 01 01 00 02 04 12 00 05 02 07 85 06 10 00 00  
00 22 25 16 03 16 03 51 F2 09 02 01 09 06 00 00 00 00 00 00 11 04 16 01 02 04 85 06 00 00 00  
      00 00 00 09 06 00 00 00 00 00 00 12 00 01 12 00 01 01 00 02 04 12 00 06 02 07 85 06 10 00 00  
00 22 26 16 03 16 03 51 F2 09 02 01 09 06 00 00 00 00 00 00 11 04 16 01 02 04 85 06 00 00 00  
00 00 00 09 06 00 00 00 00 00 00 12 00 01 12 00 01 01 00 00 00  
    85 ——  [133] GET-Response  
    05 ——  [5] GeResponseNext  
    09 —— PIID-ACD  
    01 ——  末帧标志 True  
    00 02 ——  分帧序号 = 2  
    01 ——  分帧响应,对象属性  [1] SEQUENCE OF A-ResultNormal  
    01 —— SEQUENCE OF个数=1  
    60 00 02 00 —— OAD  
    01 —— data  
    01 —— Data  
    03 —— 个数=3  
    02 04 12 00 04 02 07 85 06 10 00 00 00 22 24 16 03 16 03 51 F2 09 02 01 09 06 00 00 00  
      00 00 00 11 04 16 01 02 04 85 06 00 00 00 00 00 00 09 06 00 00 00 00 00 00 12 00 01 12 00 01  
01 00  
    02 04 12 00 05 02 07 85 06 10 00 00 00 22 25 16 03 16 03 51 F2 09 02 01 09 06 00 00 00  
      00 00 00 11 04 16 01 02 04 85 06 00 00 00 00 00 00 09 06 00 00 00 00 00 00 12 00 01 12 00 01  
01 00  

                                                                                             208  

----------------------- Page 213-----------------------

                                                                          DL/T 698.45—201X  

    02 04 12 00 06 02 07 85 06 10 00 00 00 22 26 16 03 16 03 51 F2 09 02 01 09 06 00 00 00  
00 00 00 11 04 16 01 02 04 85 06 00 00 00 00 00 00 09 06 00 00 00 00 00 00 12 00 01 12 00 01  
01 00  
    00 —— FollowReport  OPTIONAL=0 表示没有上报信息  
    00 —— 没有时间标签  

H.3.6  读取一个对象属性 （明文+MAC方式）  

    读取电能表的通信地址：  
    发送帧：68 L L 43 05 01 00 29 01 16 20 0A HCS_L HCS_H 10 00 08 05 01 01 40 01 02 00 00  
00 5E 85 01 02 03 06 12 34 56 78 90 12 04 12 34 56 78 FCS_L FCS_H 16   
    10 ——  [16] SECURITY-Request  
    00 —— 明文  
    08 —— 明文的长度  
    05 ——  [5] GET-Request  
    01 ——  [1] GetRequestNormal  
    01 —— PIID  
    40 01 02 00 —— OAD：通信地址40010200  
    00 —— 没有时间标签  
    00 —— 数据验证信息  [0]  SID_MAC  
    5E —— SID_MAC  
    85 01 02 03 —— 标识  
    06 12 34 56 78 90 12 —— 附加数据  
    04 —— MAC 的长度  
    12 34 56 78 —— MAC  
      
    响应帧：68 L L C3 05 01 00 29 01 16 20 0A HCS_L HCS_H 90 00 11 85 01 01 40 01 02 00 01  
85 06 20 16 01 29 00 01 00 00 5E 85 01 02 03 06 12 34 56 78 90 12 04 12 34 56 78 FCS_L FCS_H  
16  
    90 ——  [144] SECURITY-Response  
    00 —— 明文  
    11 —— 明文的长度  
    85 ——  [133] GET-Response  
    01 ——  [1] GetResponseNormal  
    01 —— PIID-ACD  
    40 01 02 00 —— OAD  
    01 —— Data  
    85 —— octet-string  
    06 —— SIZE(6)  
    20 16 01 29 00 01 —— 通信地址：201601290001  
    00 —— 没有时间标签  
    00 —— 数据验证信息  [0]  SID_MAC  
    5E —— SID_MAC  
    85 01 02 03 —— 标识  

                                                                                       209  

----------------------- Page 214-----------------------

                                                                          DL/T 698.45—201X  

    06 12 34 56 78 90 12 —— 附加数据  
    04 —— MAC 的长度  
    12 34 56 78 —— MAC  

H.4  设置  

H.4.1  设置一个对象属性请求  

    设置时钟  
    发送：06 01 02 40 00 02 00 1C 20 16 01 20 16 27 11 00  
    06 ——  [6] SET-Request  
    01 ——  [1] SetRequestNormal  
    02 —— PIID  
    40 00 02 00 —— OAD  
    1C —— Data：类型28：DataTimeBCD  
    20 16 01 20 16 27 11 —— 时间：2016-01-20 16:27:11  
    00 —— 没有时间标签  
    响应：86 01 02 40 00 02 00 00 00 00  
    86 ——  [134] SET-Response  
    01 ——  [1] SetResponseNormal  
    02 —— PIID-ACD  
    40 00 02 00 —— OAD  
    00 —— DAR,0成功  
    00 —— FollowReport  OPTIONAL=0 表示没有上报信息  
    00 —— 没有时间标签  

H.4.2  设置多个对象属性请求  

    设置通信地址和时钟  
    发送：06 02 03 02 40 01 02 00 85 06 00 00 00 00 00 01 40 00 02 00 1C 20 16 01 20 16 27  
11 00  
    06 ——  [6] SET-Request  
    02 ——  [2] SetRequestNormalList  
    03 —— PIID  
    02 —— SEQUENCE OF的个数=2  
    40 01 02 00 —— OAD1  
    85 06 00 00 00 00 00 01 —— value1  
    40 00 02 00 —— OAD2  
    1C 20 16 01 20 16 27 11 —— value2  
    00 —— 没有时间标签  
    响应：87 02 03 02 40 01 02 00 00 40 00 02 00 00 00 00  
    86 ——  [134] SET-Response  
    02 ——  [2] SetResponseNormalList  
    03 —— PIID-ACD  

                                                                                      210  

----------------------- Page 215-----------------------

                                                                       DL/T 698.45—201X  

    02 —— SEQUENCE OF个数=2  
    40 01 02 00 —— OAD1  
    00 —— DAR1,0成功  
    40 00 02 00 —— OAD2  
    00 —— DAR2,0成功  
    00 —— FollowReport  OPTIONAL=0 表示没有上报信息  
    00 —— 没有时间标签  

H.4.3  设置后读取多个对象属性请求  

    设置心跳周期后读取  
    发送：06 03 04 01 45 00 02 0B 12 01 68 45 00 02 0B 03 00  
    06 ——  [6] SET-Request  
    03 ——  [3] SetThenGetRequestNormalList  
    04 —— PIID  
    01 —— SEQUENCE OF的个数=1  
    45 00 02 0B —— set OAD：心跳周期  
    12 01 68 —— Data  
    45 00 02 0B —— read OAD：心跳周期  
    03 —— 读取延时 3秒  
    00 —— 没有时间标签  
    响应：86 03 04 01 45 00 02 0B 00 45 00 02 0B 12 01 68 00 00  
    86 ——  [134] SET-Response  
    03 ——  [3] SetThenGetResponseNormalList  
    04 —— PIID-ACD  
    01 —— SEQUENCE OF的个数=1  
    45 00 02 0B —— set OAD：心跳周期  
    00 —— DAR,0成功  
    45 00 02 0B —— read OAD：心跳周期  
    01 —— Data flag  
    12 01 68 —— Data  
    00 —— FollowReport  OPTIONAL=0 表示没有上报信息  
    00 —— 没有时间标签  

H.5  操作  

H.5.1  操作一个对象方法请求  

    执行电能量复位方法  
    发送：07 01 05 00 10 01 00 0F 00 00  
    07 ——   [7] ACTION-Request  
    01 ——   [1] ActionRequest  
    05 —— PIID  
    00 10 01 00 —— OMD  

                                                                                   211  

----------------------- Page 216-----------------------

                                                                        DL/T 698.45—201X  

    0F 00 ——参数Data, integer(0)  
    00 —— 没有时间标签  
    响应：87 01 05 00 10 01 00 00 00 00 00  
    87 ——   [135] ACTION-Response  
    01 ——   [1] ActionResponseNormal  
    05 —— PIID-ACD  
    00 10 01 00 —— OMD  
    00 —— DAR,0成功  
    00 —— Data OPTIONAL=0 表示没有数据  
    00 —— FollowReport  OPTIONAL=0 表示没有上报信息  
    00 —— 没有时间标签  

H.5.2  操作多个对象方法请求  

    参考操作一个对象方法。  

H.5.3  操作多个对象方法后读取多个对象属性请求  

    执行电能量复位方法后读取当前电能量总及分费率  
    发送：07 03 07 01 00 10 01 00 0F 00 00 10 02 00 00 00  
    07 ——  [7] ACTION-Request  
    03 ——  [3] ActionThenGetRequestNormalList  
    07 —— PIID  
    01 —— SEQUENCE OF的个数=1  
    00 10 01 00 —— OMD  
    0F 00 ——参数Data, integer(0)  
    00 10 02 00 —— OAD  
    00 —— 读取延时,0表示服务器默认的延时  
    00 —— 没有时间标签  
    响应：87 03 07 01 00 10 01 00 00 00 00 10 02 00 01 01 05 06 00 00 00 00 06 00 00 00 00  
06 00 00 00 00 06 00 00 00 00 06 00 00 00 00 00 00  
    87 ——   [135] ACTION-Response  
    03 ——   [3] ActionThenGetResponseNormalList  
    07 —— PIID-ACD  
    01 —— SEQUENCE OF的个数=1  
    00 10 01 00 —— OMD  
    00 —— DAR,0成功  
    00 —— Data OPTIONAL=0 表示没有数据  
    00 10 02 00 —— OAD  
    01 —— Data,  
    01 —— array  
    05 —— 5个元素  
    06 00 00 00 00 —— 总  
    06 00 00 00 00 —— 费率1  
    06 00 00 00 00 —— 费率2  

                                                                                     212  

----------------------- Page 217-----------------------

                                                                         DL/T 698.45—201X  

    06 00 00 00 00 —— 费率3  
    06 00 00 00 00 —— 费率4  
    00 —— FollowReport  OPTIONAL=0 表示没有上报信息  
    00 —— 没有时间标签  

H.6  上报  

H.6.1  上报多个记录型对象属性  

    参考读取多个记录型对象属性。  

H.7  代理  

H.7.1  代理读取多个服务器的多个对象属性  

    代理读取2个电能表的当前电能量  
    发送：09 01 0A 00 78 02 06 20 16 01 20 00 01 00 3C 01 00 10 02 00 06 20 16 01 20 00 02  
00 3C 01 00 10 02 00 00  
    09 ——  [9] PROXY-Request  
    01 ——  [1] ProxyGetRequestList  
    0A —— PIID  
    00 78 —— 整个代理请求的超时时间  
    02 —— SEQUENCE OF个数=2  
    06 20 16 01 20 00 01 —— TSA  
    00 3C —— 代理一个服务器的超时时间  
    01 —— SEQUENCE OF OAD个数=1  
    00 10 02 00  —— OAD  
    06 20 16 01 20 00 02 —— TSA  
    00 3C —— 代理一个服务器的超时时间  
    01 00 10 02 00 —— SEQUENCE OF OAD  
    00 —— 没有时间标签  
      
    响应：89 01 0A 02 06 20 16 01 20 00 01 01 00 10 02 00 01 01 05 06 00 00 00 00 06 00 00  
00 00 06 00 00 00 00 06 00 00 00 00 06 00 00 00 00 06 20 16 01 20 00 02 01 00 10 02 00 01 01  
05 06 00 00 00 00 06 00 00 00 00 06 00 00 00 00 06 00 00 00 00 06 00 00 00 00 00 00  
    89 ——  [137] PROXY-Response    
    01 ——  [1] ProxyGetResponseList  
    0A —— PIID-ACD  
    02 —— SEQUENCE OF个数=2  
    06 20 16 01 20 00 01 —— TSA  
    01 —— SEQUENCE OF个数=1  
    00 10 02 00  —— OAD  
    01 —— Data  
    01 —— array  

                                                                                     213  

----------------------- Page 218-----------------------

                                                                 DL/T 698.45—201X  

    05 —— 5个元素  
    06 00 00 00 00 —— 总  
    06 00 00 00 00 —— 费率1  
    06 00 00 00 00 —— 费率2  
    06 00 00 00 00 —— 费率3  
    06 00 00 00 00 —— 费率4  
    06 20 16 01 20 00 02 —— TSA  
    01 —— SEQUENCE OF个数=1  
    00 10 02 00  —— OAD  
    01 —— Data  
    01 —— array  
    05 —— 5个元素  
    06 00 00 00 00 —— 总  
    06 00 00 00 00 —— 费率1  
    06 00 00 00 00 —— 费率2  
    06 00 00 00 00 —— 费率3  
    06 00 00 00 00 —— 费率4  
    00 —— FollowReport  OPTIONAL=0 表示没有上报信息  
    00 —— 没有时间标签  

H.7.2  代理读取一个服务器的一个记录型对象属性  

    参考读取一个记录型对象属性。  

H.7.3  代理设置多个服务器的多个对象属性  

    参考设置多个对象属性。  

H.7.4  代理设置后读取多个服务器的多个对象属性  

    参考设置后读取多个对象属性。  

H.7.5  代理操作多个服务器的多个对象方法  

    参考操作多个对象方法。  

H.7.6  代理操作后读取多个服务器的多个对象方法和属性  

    参考操作多个对象方法后读取多个对象属性。  
      

                                                                             214  

----------------------- Page 219-----------------------

                                                                                      DL/T 698.45—201X  

                                            附  录  I  
                                          （资料性附录）  
                                             版本信息  

  

序号              版本号                    发布日期                                  备注  

  1              0010           2016-7-29                   

  2              0011           2016-7-31                   

                                                            

                                                            

  
  
  

                            _________________________________  

  

                                                                                                      215  
